<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.1.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>CTRDG_WriteAgbFlashSector</TITLE>
<LINK rel="stylesheet" href="../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">CTRDG_WriteAgbFlashSector <IMG src="../image/NTR.gif" align="middle"></H1>
<H2>Syntax</H2>
<DL>
  <DD>
  <PRE><CODE>#include &lt;nitro/ctrdg.h&gt;</CODE></PRE>
  <PRE><CODE>u16 CTRDG_WriteAgbFlashSector(u16 sec_num, u8* src);
  </CODE></PRE>
Corresponding AGB function: <A href="coordinate.html"><CODE>u16 (*ProgramFlashSector)(u16 secNo,u8 *src)</CODE></A>
</DL>
<H2>Arguments</H2>
<TABLE border="1">
  <TBODY>
    <TR>
<TD><SPAN class="argument">sec_num</SPAN></TD>
<TD>Destination flash sector number.</TD>
    </TR>
    <TR>
<TD><SPAN class="argument">src</SPAN></TD>
<TD>Source address.</TD>
    </TR>
  </TBODY>
</TABLE>
<H2>Return Values</H2>
<P>Returns zero if the write succeeds. Returns a nonzero value if it fails.</P>
<H2>Description</H2>
<P>Writes one sector (4 KB) of data beginning from the address given by <SPAN class="argument">src</SPAN> into the target sector number. The <CODE>CTRDG_EraseAgbFlashSector</CODE> function is called inside this function, and data is written after the sector is erased. This function returns an error if the target sector number is out of range. To find out how many bytes remain available while this function is executing, access the global variable <CODE>flash_remainder</CODE>.</P>
<P>The access cycle setting does not need to be set in advance because it is created inside the function. In addition, the <A href="../os/time/OS_InitTick.html"><CODE>OS_InitTick</CODE></A> function must be called in advance because clock ticks are used by this function to measure timeouts.</P>
<P><B>Note:</B> All interrupts are disabled inside this function, and the cartridge bus is locked for a set period. In particular, when this function is called, do not use DMA that starts automatically during direct sound and V/H blank synchronization, display synchronization, cartridge request, and so on.</P>
<P>Note that the AGB backup device cannot be accessed normally with IS-NITRO-DEBUGGER version 1.66 or earlier.</P>
<H2>See Also</H2>
<P><A href="CTRDG_WriteAndVerifyAgbFlash.html"><CODE>CTRDG_WriteAndVerifyAgbFlash</CODE></A><BR> <A href="CTRDG_WriteAgbFlashSectorAsync.html"><CODE>CTRDG_WriteAgbFlashSectorAsync</CODE></A><BR> <A href="CTRDG_WriteAndVerifyAgbFlashAsync.html"><CODE>CTRDG_WriteAndVerifyAgbFlashAsync</CODE></A></P>
<H2>Revision History</H2>
<P>2006/05/25 Added a description that the AGB backup device cannot be accessed normally with IS-NITRO-DEBUGGER version 1.66 or earlier.<BR> 2006/04/07 Initial version.</P>
<hr><p>CONFIDENTIAL</p></body>
</HTML>
