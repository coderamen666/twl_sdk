<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.1.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>CTRDG_IdentifyAgbBackup</TITLE>
<LINK rel="stylesheet" href="../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">CTRDG_IdentifyAgbBackup <IMG src="../image/NTR.gif" align="middle"></H1>
<H2>Syntax</H2>
<DL>
  <DD>
  <PRE><CODE>#include &lt;nitro/ctrdg.h&gt;</CODE></PRE>
  <PRE><CODE>u16 CTRDG_IdentifyAgbBackup(CTRDGBackupType type);
  </CODE></PRE>
  Corresponding AGB function: <A href="coordinate.html"><CODE>u16 IdentifyFlash_512K()</CODE></A>
Corresponding AGB function: <A href="coordinate.html"><CODE>u16 IdentifyFlash_1M()</CODE></A>
</DL>
<H2>Arguments</H2>
<TABLE border="1">
  <TBODY>
    <TR>
<TD><SPAN class="argument">type</SPAN></TD>
<TD>Type of backup device mounted in the NITRO cartridge.</TD>
    </TR>
  </TBODY>
</TABLE>
<H2>Return Values</H2>
<P>Returns zero if successful. Returns a nonzero value if it fails.</P>
<H2>Description</H2>
<P>Specifies the backup device that is mounted in the NITRO cartridge. If the backup device is a flash memory, the flash ID is read, the type of flash mounted in the cartridge is identified, the flash capacity and sector size is obtained, the access speed is set, and each access function for the corresponding flash is set. To refer to the flash data obtained, use the global variable <CODE>CTRDGFlashType *AgbFlash</CODE>. This function must be called once before accessing the backup device (including read access). This function returns an error if the device could not be identified and disables all access functions.</P>
<P>The access cycle setting does not need to be set in advance because it is created inside the function. The <A href="../os/time/OS_InitTick.html"><CODE>OS_InitTick</CODE></A> function must be called in advance because clock ticks are used by this function to measure timeouts.</P>
<P><B>Note:</B> All interrupts are disabled inside this function, and the cartridge bus is locked for a set period. In particular, when this function is called, do not use DMA that starts automatically during direct sound and V/H blank synchronization, display synchronization, cartridge request, and so on.<br><FONT color="#ff0033">In addition, if <CODE>CTRDG_BACKUP_TYPE_FLASH_512K</CODE> or <CODE>CTRDG_BACKUP_TYPE_FLASH_1M</CODE> is specified as the argument, a write operation to the device is executed. Note that backup data may be damaged if a different type of device from the given argument is installed in the NITRO cartridge.</FONT></P>
<P>Note that the AGB backup device cannot be accessed normally with IS-NITRO-DEBUGGER version 1.66 or earlier.</P>
<H2>See Also</H2>

<H2>Revision History</H2>
<P>2006/05/25 Added a description that the AGB backup device cannot be accessed normally with IS-NITRO-DEBUGGER version 1.66 or earlier.<BR> 2006/04/07 Initial version.</P>
<hr><p>CONFIDENTIAL</p></body>
</HTML>
