<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>OS_InitFunctionCost</TITLE>
<LINK rel="stylesheet" href="../../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">OS_InitFunctionCost <IMG src="../../image/NTR.gif" align="middle"><IMG src="../../image/TWL.gif" align="middle"></H1>
<H2>Syntax</H2>
<DL>
<DD><CODE>#include &lt;nitro/os.h&gt;</CODE><BR> <BR> <CODE>void OS_InitFunctionCost( void* buf, u32 size );</CODE>
</DL>
<H2>Arguments</H2>
<TABLE border="1">
  <TBODY>
    <TR>
<TD><CODE>buf</CODE></TD>
<TD>Function cost calculation buffer</TD>
    </TR>
    <TR>
<TD><CODE>size</CODE></TD>
<TD>Size of the function cost calculation buffer.</TD>
    </TR>
  </TBODY>
</TABLE>
<H2>Return Values</H2>
<P>None.</P>
<H2>Description</H2>
<P>Sets the buffer that will be used for function cost calculation, and begins the function cost calculation. After function cost calculation settings are made by calling this function, calculation status will be Enabled.(This is the status after the <A href="OS_EnableFunctionCost.html"><CODE>OS_EnableFunctionCost</CODE></A> function is called.)</P>
<P>In order for a function to be calculated, it must be compiled with the <CODE>profile</CODE> feature on. (When you compile with <CODE>TWL_PROFILE=TRUE</CODE>, at compile time the <CODE>-profile</CODE> option will be attached, and the profile feature will be on.)</P>
<P>To enable features that are related to function cost calculation, at link time you must include <CODE>libos.FUNCTIONCOST.a</CODE> (in the thumb version <CODE>libos.FUNCTIONCOST.thumb.a</CODE>). To do this, specify <CODE>TWL_PROFILE_TYPE=FUNCTIONCOST</CODE> as a <CODE>make</CODE> option. You may also write it in the <CODE>makefile</CODE>. However, in the final ROM version (FINALROM) library, it will not do anything.</P>
<P>An information header used for function cost calculations (<CODE>sizeof(OSFunctionCostInfo) - sizeof(OSFunctionCost)</CODE> bytes) is stored in the front of the buffer <CODE>buf</CODE>. When the function is called, the size of information stored will be <CODE>sizeof(OSFunctionCost)</CODE> bytes.</P>
<P>If you are using a thread system, buffers are independent for each thread. Therefore, if you want to store cost calculations, you will have to define a separate buffer in each thread.</P>
<P>To aggregate and display calculation results, aggregate them with the <A href="OS_CalcStatistics.html"><CODE>OS_CalcStatistics</CODE></A> or <A href="OS_CalcThreadStatistics.html"><CODE>OS_CalcThreadStatistics</CODE></A> function, then call the <A href="OS_DumpStatistics.html"><CODE>OS_DumpStatistics</CODE></A> function.</P>

<H2>See Also</H2>
<P><A href="OS_CalcStatistics.html"><CODE>OS_CalcStatistics</CODE></A><BR> <A href="OS_CalcThreadStatistics.html"><CODE>OS_CalcThreadStatics</CODE></A><BR> <A href="OS_DumpStatistics.html"><CODE>OS_DumpStatistics</CODE></A></P>
<H2>Revision History</H2>
<P>2004/06/02 Changed description of the <CODE>make</CODE> options <BR>2004/05/18 Initial version.</P>
<hr><p>CONFIDENTIAL</p></body>
</HTML>