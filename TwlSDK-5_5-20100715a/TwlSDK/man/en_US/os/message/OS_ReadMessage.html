<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>OS_ReadMessage</TITLE>
<LINK rel="stylesheet" href="../../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">OS_ReadMessage <IMG src="../../image/NTR.gif" align="middle"><IMG src="../../image/TWL.gif" align="middle"></H1>
<H2>Syntax</H2>
<DL>
  <DD>
  <PRE><CODE>#include &lt;nitro/os.h&gt;</CODE></PRE>
  <PRE><CODE>BOOL OS_ReadMessage(
     OSMessageQueue*   mq,
     OSMessage*        msg,
     s32             flags);
  </CODE></PRE>
</DL>
<H2>Arguments</H2>
<TABLE border="1" width="100%">
  <TBODY>
    <TR>
      <TD width="13%"><EM><STRONG>mq</STRONG></EM></TD>
      <TD width="87%">Pointer to the message queue</TD>
    </TR>
    <TR>
      <TD width="13%"><EM><STRONG>msg</STRONG></EM></TD>
      <TD width="87%">Viewed message</TD>
    </TR>
    <TR>
      <TD><EM><STRONG>flags</STRONG></EM></TD>
      <TD>If <CODE>OS_MESSAGE_BLOCK</CODE> is set up, <CODE>OS_ReceiveMessage</CODE> blocks empty queues. If <CODE>OS_MESSAGE_NOBLOCK</CODE> is set up, <CODE>OS_ReceiveMessage</CODE> returns immediately whether or not the queue is empty.</TD>
    </TR>
  </TBODY>
</TABLE>

<H2>Return Values</H2>
<P>
Returns <code>TRUE</code> if the message was removed without any problems. If <code>OS_MESSAGE_NOBLOCK</code> was specified and the queue was empty, FALSE is returned.
</P>

<H2>Description</H2>
<P>Copies the starting message of the message queue The status of the message queue does not change. This function differs from <code><a href="OS_ReceiveMessage.html">OS_ReceiveMessage()</a></code> in that a wait status thread is not activated to send a message to this queue. In a manner of speaking, <CODE>OS_ReadMessage()</CODE> is a function for looking at the starting message of the message queue.</P>

<P>If <code>OS_MESSAGE_BLOCK</code> is set in <em><strong><code>flags</code></strong></em>, the thread that called this function will be suspended if the queue is empty. The thread resumes immediately when message(s) are sent to the queue. If there are other receiving threads with higher priority, those are executed first, so be aware of the fact that they may remove the messages. If the message queue is empty when this thread comes to be executed, it will suspend again until another message is sent to the queue.</P>

<P>If <code>OS_MESSAGE_NOBLOCK</code> is set in <em><strong><code>flags</code></strong></em>, control immediately returns to the calling thread. If the queue is not empty, <code>TRUE</code> is returned. If it is empty, <code>FALSE</code> is returned.</P>


<H2>See Also</H2>
<P><code><a href="OS_InitMessageQueue.html">OS_InitMessageQueue</a></code>, <code><a href="OS_SendMessage.html">OS_SendMessage</a></code>, <code><a href="OS_ReceiveMessage.html">OS_ReceiveMessage</a></code></P>

<H2>Revision History</H2>
<P>2004/03/12 Initial version.</P>
<hr><p>CONFIDENTIAL</p></body>
</HTML>