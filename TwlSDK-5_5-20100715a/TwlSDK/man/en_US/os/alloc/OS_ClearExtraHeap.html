<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.1.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>OS_ClearExtraHeap</TITLE>
<LINK rel="stylesheet" href="../../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">OS_ClearExtraHeap<IMG src="../../image/TWL.gif" align="middle"></H1>
<H2>Syntax</H2>
<DL>
  <DD>
  <PRE><CODE>#include &lt;nitro/os.h&gt;</CODE></PRE>
  <PRE><CODE>void OS_ClearExtraHeap( OSArenaId id, OSHeapHandle heap );
  </CODE></PRE>
</DL>
<H2>Arguments</H2>
<TABLE border="1" width="100%">
  <TBODY>
    <TR>
<TD width="13%"><EM><STRONG>id</STRONG></EM></TD>
<TD width="87%">Arena ID of the arena that includes the special heap to be cleared</TD>
    </TR>
    <TR>
<TD width="13%"><EM><STRONG>heap</STRONG></EM></TD>
<TD width="87%">Heap handler of the special heap to be cleared</TD>
    </TR>
  </TBODY>
</TABLE>
<H2>Return Values</H2>
<P>None.</P>
<H2>Description</H2>
<P>Clears and initializes an existing special heap.</P>
<P>This function clears the special heap created by the <A href="OS_CreateExtraHeap.html"><CODE>OS_CreateExtraHeap</CODE></A> function. Use the <A href="OS_ClearHeap.html"><CODE>OS_ClearHeap</CODE></A> function for ordinary heaps created using the <A href="OS_CreateHeap.html"><CODE>OS_CreateHeap</CODE></A> function.</P>
<P>The arena ID should be an argument for the <A href="OS_CreateExtraHeap.html"><CODE>OS_CreateExtraHeap</CODE></A> function, and <SPAN class="argument">heap</SPAN>, the heap handler, should be the return value for the <A href="OS_CreateExtraHeap.html"><CODE>OS_CreateExtraHeap</CODE></A> function. Nothing happens if a value is specified that is different from the parameter for the special heap held internally on the system.</P>
<P>All memory blocks secured in <SPAN class="argument">heap</SPAN> are destroyed. However, that is for the 16-KB region at the top of the main memory, and when there is an enclave by the <A href="OS_AddToHeap.html"><CODE>OS_AddToHeap</CODE></A> function, that does not get targeted for initialization. Moreover, caution is advised because upon initialization, that region is removed from part of the heap.</P>
<P><FONT color="#ff0000">This function cannot be called for NITRO ROM and TWL limited ROM. </FONT>(It exists only for hybrid ROM builds, so a compile error is generated. )  Also, <FONT color="#ff0000">This function does nothing even if called while a hybrid ROM is running on TWL hardware in TWL mode.</FONT></P>
<H2>See Also</H2>
<P><A href="OS_InitAlloc.html"><CODE>OS_InitAlloc</CODE></A><BR> <A href="OS_CreateExtraHeap.html"><CODE>OS_CreateExtraHeap</CODE></A><BR> <A href="OS_AddExtraAreaToHeap.html"><CODE>OS_AddExtraAreaToHeap</CODE></A></P>
<H2>Revision History</H2>
<P>2009/04/03 Initial version.</P>
<hr><p>CONFIDENTIAL</p></body>
</HTML>