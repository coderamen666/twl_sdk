<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>TWL-SDK Change Log</TITLE>
</HEAD>
<BODY style="padding-bottom: 1600px;">
<HR>
<H1>TWL-SDK Revision History</H1>
<HR>
<DL>
<DT>
<A href="#sdk_5_5_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK 5.5 Release Version</A> (2010/07/12)</DT>
<DD><A href="#note82-01">Note 82-01:(FS) Fixed a bug where wireless communications were disconnected while loading files via WFS</A></DD>
<DD><A href="#note82-02">Note 82-02:(GX) Revised the Sub_Double3D Sample Demo</A></DD>
<DD><A href="#note82-03">Note 82-03:(OS) Made the <CODE>OS_IsRestrictDSDownloadBoot</CODE> function non-public</A></DD>
<DD><A href="#note82-04">Note 82-04:(PM) Added notes to the <CODE>PM_SetBackLight*</CODE> function reference pages</A></DD>
<DD><A href="#KnownIssues_5_5_%E6%AD%A3%E5%BC%8F%E7%89%88">Known Issues in TWL-SDK 5.5 Release Version</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_5_RC">TWL-SDK 5.5 RC</A> (2010/06/10)</DT>
<DD><A href="#note81-01">Note 81-01:(CAMERA) Fixed sleep support for demos</A></DD>
<DD><A href="#note81-02">Note 81-02:(CARD) ARM7 card access mutex</A></DD>
<DD><A href="#note81-03">Note 81-03:(CARD) Changed the <CODE>CARD_ReadRomAsync</CODE> function reference</A></DD>
<DD><A href="#note81-04">Note 81-04:(CARD) Fixed a backup access bug that occurred when using the host I/O</A></DD>
<DD><A href="#note81-05">Note 81-05:(DSP) Revised the DSP demo</A></DD>
<DD><A href="#note81-06">Note 81-06:(DSP) Fixed a bug in the <CODE>DSP_PlayShutterSound</CODE> function</A></DD>
<DD><A href="#note81-07">Note 81-07:(DSP) Fixed a bug in the <CODE>DSP_Scaling[Fx]</CODE> function</A></DD>
<DD><A href="#note81-08">Note 81-08:(DevEnv) Fixed the size-overflow check in the TCM region</A></DD>
<DD><A href="#note81-09">Note 81-09:(DevEnv) Changed makelcf</A></DD>
<DD><A href="#note81-10">Note 81-10:(DevEnv) Changed makelcf.TWL</A></DD>
<DD><A href="#note81-11">Note 81-11:(DevEnv) Cleared the reserved region in main memory</A></DD>
<DD><A href="#note81-12">Note 81-12:(DevEnv) Updated the Nintendo logo data that is used as an antipiracy measure</A></DD>
<DD><A href="#note81-13">Note 81-13:(FS) Revised the <CODE>FS_SeekFile</CODE> function</A></DD>
<DD><A href="#note81-14">Note 81-14:(FS) Revised the <CODE>FS_WriteFile</CODE> function reference</A></DD>
<DD><A href="#note81-15">Note 81-15:(FS) Fixed a compatibility issue with SD Cards</A></DD>
<DD><A href="#note81-16">Note 81-16:(FS) Revised the <CODE>FX</CODE> functions</A></DD>
<DD><A href="#note81-17">Note 81-17:(FX) Revised the <CODE>MTX_PerspectiveW</CODE> function</A></DD>
<DD><A href="#note81-18">Note 81-18:(GX) Revised the <CODE>GX_SetDefaultDMA</CODE> and <CODE>GX_SetDefaultNDMA</CODE> functions</A></DD>
<DD><A href="#note81-19">Note 81-19:(MATH) Revised the <CODE>MATH_QSortStackSize</CODE> function</A></DD>
<DD><A href="#note81-20">Note 81-20:(MIC) Revised the check process for the buffer specified by auto-sampling</A></DD>
<DD><A href="#note81-21">Note 81-21:(OS) Changed the <CODE>OS_ResetSystem</CODE> function process</A></DD>
<DD><A href="#note81-22">Note 81-22:(OS) Added an ASSERT to determine whether <CODE>OS_SleepThread</CODE> is in IRQ mode</A></DD>
<DD><A href="#note81-23">Note 81-23:(OS) Changed the <CODE>OS_WaitIrq[Ex]</CODE> function</A></DD>
<DD><A href="#note81-24">Note 81-24:(OS) Added a description of the interrupt used with PXI</A></DD>
<DD><A href="#note81-25">Note 81-25:(TOOL) Added the NandFiler feature</A></DD>
<DD><A href="#note81-26">Note 81-26:(TOOL) Revised makerom[.TWL]</A></DD>
<DD><A href="#note81-27">Note 81-27:(TOOL) Fixed a bug where the system would hang when power to the parent device was disconnected while downloading mb_child_TWL.srl</A></DD>
<DD><A href="#note81-28">Note 81-28:(WXC) Suppressed the output of some unnecessary warnings</A></DD>
<DD><A href="#note81-29">Note 81-29:(Others) Added support for the new name of the Australian rating organization</A></DD>
<DD><A href="#KnownIssues_5_5_RC">Known issues in TWL-SDK version 5.5 RC</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_4_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK 5.4 Release Version</A> (2009/12/18)</DT>
<DD><A href="#note80-01">Note 80-01: (DSP) Fixed a bug in the <CODE>DSP_Scaling[Fx]</CODE> functions</A></DD>
<DD><A href="#note80-02">Note 80-02: (DevEnv) Replaced the Nintendo logo data as an antipiracy measure</A></DD>
<DD><A href="#note80-03">Note 80-03: (FS) Revised the Function Reference</A></DD>
<DD><A href="#note80-04">Note 80-04: (WFS) Changed the processing when the WFS is disconnected</A></DD>
<DD><A href="#note80-05">Note 80-05: (WXC) Added a note about North American titles to the description in the Chance Encounter Communications Library</A></DD>
<DD><A href="#note80-06">Note 80-06: (WXC) Revised error recovery processing</A></DD>
<DD><A href="#KnownIssues_5_4_%E6%AD%A3%E5%BC%8F%E7%89%88">Known Issues in TWL-SDK 5.4 Release Version</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_4_RC">TWL-SDK 5.4 RC</A> (2009/12/04)</DT>
<DD><A href="#note79-01">Note 79-01: (DSP) Fixed a bug in the <CODE>DSP_Scaling[Fx]</CODE> functions</A></DD>
<DD><A href="#note79-02">Note 79-02: (DevEnv) Revised the TWL-SDK Migration Guide</A></DD>
<DD><A href="#note79-03">Note 79-03: (FS) Clarified archives whose size can be automatically expanded by the <CODE>FS_WriteFile</CODE> function.</A></DD>
<DD><A href="#note79-04">Note 79-04: (GX) Revised the <CODE>GX_SetCapture</CODE> function reference</A></DD>
<DD><A href="#note79-05">Note 79-05: (MI) Avoided address checks when revising legacy DMA circuit</A></DD>
<DD><A href="#note79-06">Note 79-06: (OS) Changed the ISBN screen for Chinese-market applications</A></DD>
<DD><A href="#note79-07">Note 79-07: (TOOL) Changed the <CODE>NandFiler</CODE> tool</A></DD>
<DD><A href="#KnownIssues_5_4_RC">Known issues in TWL-SDK version 5.4 RC</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_4_PR">TWL-SDK 5.4 PR</A> (2009/11/20)</DT>
<DD><A href="#note78-01">Note 78-01: (CAMERA) Added a description to the Function Reference about the conditions required for pausing captures</A></DD>
<DD><A href="#note78-02">Note 78-02: (CHT) Deleted the <CODE>catch-2</CODE> sample demo</A></DD>
<DD><A href="#note78-03">Note 78-03: (DSP) Fixed a bug in the shutter sound playback feature</A></DD>
<DD><A href="#note78-04">Note 78-04: (DSP) Changed the microphone sampling process</A></DD>
<DD><A href="#note78-05">Note 78-05: (DevEnv) Revised the manual for NAND application development</A></DD>
<DD><A href="#note78-06">Note 78-06: (DevEnv) Revised the TWL-SDK Migration Guide</A></DD>
<DD><A href="#note78-07">Note 78-07: (DevEnv) Changed <CODE>crt0</CODE></A></DD>
<DD><A href="#note78-08">Note 78-08: (DevEnv) Changed the behavior when running a demo under <CODE>demo.TWL</CODE> in NITRO mode</A></DD>
<DD><A href="#note78-09">Note 78-09: (DevEnv) Changed <CODE>makelcf[.TWL]</CODE></A></DD>
<DD><A href="#note78-10">Note 78-10: (DevEnv) Changed the THUMB build method for <CODE>mongoose.TWL</CODE> and <CODE>ichneumon.TWL</CODE></A></DD>
<DD><A href="#note78-11">Note 78-11: (DevEnv) Shortened the filename for the precompiled header</A></DD>
<DD><A href="#note78-12">Note 78-12: (DevEnv) Added Nintendo logo data as an antipiracy measure</A></DD>
<DD><A href="#note78-13">Note 78-13: (DevEnv) Revised the description for applications with extended language support</A></DD>
<DD><A href="#note78-14">Note 78-14: (FS) Fixed a bug in the <CODE>FS_CancelFile</CODE> function</A></DD>
<DD><A href="#note78-15">Note 78-15: (FS) Fixed a bug specific to the directory ID in the <CODE>FS_ReadDir</CODE> function</A></DD>
<DD><A href="#note78-16">Note 78-16: (FX) Changed the <CODE>VEC_Normalize</CODE> function into a weak symbol</A></DD>
<DD><A href="#note78-17">Note 78-17: (GX) Revised the <CODE>G3X_SetDisp1DotDepth</CODE> function reference</A></DD>
<DD><A href="#note78-18">Note 78-18: (OS) Fixed an ARM7 debug output bug on IS-TWL-DEBUGGER</A></DD>
<DD><A href="#note78-19">Note 78-19: (OS) Changed the <CODE>OS_InitChina</CODE> function</A></DD>
<DD><A href="#note78-20">Note 78-20: (OS) Added exception handler address recovery processing in the <CODE>OS_ResetSystem</CODE> function</A></DD>
<DD><A href="#note78-21">Note 78-21: (OS) Initialization of the new WRAM settings in the <CODE>OS_ResetSystem</CODE> function</A></DD>
<DD><A href="#note78-22">Note 78-22: (OS) Deprecated the <CODE>OS_ShowAttentionChina</CODE> function</A></DD>
<DD><A href="#note78-23">Note 78-23: (OS) Added a description to the Function Reference Manual about handling argument data in TWL mode</A></DD>
<DD><A href="#note78-24">Note 78-24: (OS) Revised the warning display for running TWL-exclusive ROM on NITRO</A></DD>
<DD><A href="#note78-25">Note 78-25: (OS) Revised functions that get the operating environment</A></DD>
<DD><A href="#note78-26">Note 78-26: (OS) Explained the string length limitation for functions that display strings</A></DD>
<DD><A href="#note78-27">Note 78-27: (PM) Fixed a bug in the termination process during MIC auto-sampling</A></DD>
<DD><A href="#note78-28">Note 78-28: (PM) Fixed a bug when entering the termination process part way through PM functions</A></DD>
<DD><A href="#note78-29">Note 78-29: (SND) Fixed a bug in the <CODE>SNDEX_SetVolume</CODE> function</A></DD>
<DD><A href="#note78-30">Note 78-30: (SSP) Changed the SSP library</A></DD>
<DD><A href="#note78-31">Note 78-31: (SSP) Added a Note to the Function Reference about decoding failures for some JPEG files</A></DD>
<DD><A href="#note78-32">Note 78-32: (TCL) Added the <CODE>TCL_ChangePictureFavoriteType</CODE> function</A></DD>
<DD><A href="#note78-33">Note 78-33: (TCL) Fixed a bug in the <CODE>TCL_DeletePicture</CODE> function</A></DD>
<DD><A href="#note78-34">Note 78-34: (TOOL) Added a warning message to the <CODE>TwlNmenu</CODE> function</A></DD>
<DD><A href="#note78-35">Note 78-35: (TOOL) Changed to automatically generate a list file that passes the <CODE>-I</CODE> option to <CODE>compstatic</CODE>.</A></DD>
<DD><A href="#note78-36">Note 78-36: (TOOL) Changed <CODE>makerom</CODE></A></DD>
<DD><A href="#note78-37">Note 78-37: (TOOL) Changed <CODE>makerom.TWL</CODE></A></DD>
<DD><A href="#note78-38">Note 78-38: (TOOL) Revised the <CODE>maketad</CODE> reference</A></DD>
<DD><A href="#note78-39">Note 78-39: (TOOL) Fixed a bug in <CODE>tad2rom</CODE></A></DD>
<DD><A href="#note78-40">Note 78-40: (WM) Made changes to wireless termination processing in the WH library</A></DD>
<DD><A href="#note78-41">Note 78-41: (WM) Added supplementary information about the TWL wireless indicator LED to the Description in the Wireless Communications Library</A></DD>
<DD><A href="#note78-42">Note 78-42: (WM) Revised the Function Reference</A></DD>
<DD><A href="#KnownIssues_5_4_PR">Known Issues in NITRO-SDK Version 5.4 PR</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_3_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK 5.3 Release Version</A> (2009/08/07)</DT>
<DD><A href="#note77-01">Note 77-01: (TOOL) Fixed a bug preventing referencing TAD files when in Card mode on the TwlNmenu</A></DD>
<DD><A href="#note77-02">Note 77-02: (WXC) Added documents and tools supporting chance-encounter relay stations</A></DD>
<DD><A href="#KnownIssues_5_3_%E6%AD%A3%E5%BC%8F%E7%89%88">Known Issues in SDK 5.3 Release Version</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_3_RC">TWL-SDK 5.3 RC</A> (2009/07/21)</DT>
<DD><A href="#note76-01">Note 76-01: (CARD) Revised sample demos</A></DD>
<DD><A href="#note76-02">Note 76-02: (DSP) Revised the <CODE>DSP_IsSoundPlaying</CODE> and <CODE>DSP_IsShutterSoundPlaying</CODE> functions</A></DD>
<DD><A href="#note76-03">Note 76-03: (DSP) Fixed a bug in the microphone sampling buffer size</A></DD>
<DD><A href="#note76-04">Note 76-04: (DevEnv) Added Korean language (Hangul) extended fonts to the TWL bitmap fonts</A></DD>
<DD><A href="#note76-05">Note 76-05: (DevEnv) Revised the <I>TWL-SDK Migration Guide</I></A></DD>
<DD><A href="#note76-06">Note 76-06: (FS) Clarified that copying of the <CODE>FSFile</CODE> structure is prohibited</A></DD>
<DD><A href="#note76-07">Note 76-07: (FS) Fixed a bug in the <CODE>FS_CancelFile</CODE> function</A></DD>
<DD><A href="#note76-08">Note 76-08: (FS) Fixed a bug related to the <CODE>FS_ReadDir</CODE> function file ID</A></DD>
<DD><A href="#note76-09">Note 76-09: (FS) Fixed a bug that occurred during system shutdown</A></DD>
<DD><A href="#note76-10">Note 76-10: (GX) Corrected function references of BG plane affine conversion functions</A></DD>
<DD><A href="#note76-11">Note 76-11: (MIC) Corrected a bug caused by frequently and repeatedly starting and stopping auto-sampling</A></DD>
<DD><A href="#note76-12">Note: 76-12: (NA) Revised asynchronous processing of NAND application ROM archives</A></DD>
<DD><A href="#note76-13">Note 76-13: (OS) Corrected the interrupt permission setting in effect after a DMA transfer interrupt</A></DD>
<DD><A href="#note76-14">Note 76-14: (OS) Added Chinese language and Korean language (Hangul) images for TWL-exclusive ROM warning screens</A></DD>
<DD><A href="#note76-15">Note 76-15: (PM) Revised <CODE>PM_SetLCDPower</CODE> function reference</A></DD>
<DD><A href="#note76-16">Note 76-16: (SND) Changed behavior for repeatedly calling the <CODE>SNDEX_SetIgnoreHWVolume</CODE> function</A></DD>
<DD><A href="#note76-17">Note 76-17: (SSP) Revised function reference</A></DD>
<DD><A href="#note76-18">Note 76-18: (TWL Wireless) Added TWL wireless shutdown process in automatic shutdown when there is a drop in voltage</A></DD>
<DD><A href="#KnownIssues_5_3_RC">Known issues in TWL-SDK version 5.3 RC</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_3_PR">TWL-SDK 5.3 PR</A> (2009/07/01)</DT>
<DD><A href="#note75-01">Note 75-01: (CAMERA) Fixed a bug where it was not possible to immediately stop AE with the <CODE>CAMERA_I2CAutoExposure</CODE> function</A></DD>
<DD><A href="#note75-02">Note 75-02: (DevEnv) Removed processing to suppress startup of Chinese applications on the ARM7 component</A></DD>
<DD><A href="#note75-03">Note 75-03: (DevEnv) Changed the version of CodeWarrior used for the TWL-SDK package build</A></DD>
<DD><A href="#note75-04">Note 75-04: (DevEnv) Added Chinese and Korean language fonts to the TWL bitmap fonts</A></DD>
<DD><A href="#note75-05">Note 75-05: (GX) Revised the <CODE>GX_FX32_FX10</CODE> constant macro</A></DD>
<DD><A href="#note75-06">Note 75-06: (GX) Revised the <CODE>GX_GetDefaultNDMA</CODE> function</A></DD>
<DD><A href="#note75-07">Note 75-07: (GX) Added the <CODE>GX_InitNDMAEx</CODE> function</A></DD>
<DD><A href="#note75-08">Note 75-08: (GX) Revised the <CODE>GX_SetDefaultNDMA</CODE> function</A></DD>
<DD><A href="#note75-09">Note 75-09: (OS) ARM7 debug output on IS-TWL-DEBUGGER</A></DD>
<DD><A href="#note75-10">Note 75-10: (OS) Added support for a software reset in TWL mode</A></DD>
<DD><A href="#note75-11">Note 75-11: (OS) Revised the <CODE>forKorea-1</CODE> demo</A></DD>
<DD><A href="#note75-12">Note 75-12: (OS) Removed the startup restriction on applications for China</A></DD>
<DD><A href="#note75-13">Note 75-13: (PM) Fixed a bug where the system would sleep when using the tick system</A></DD>
<DD><A href="#note75-14">Note 75-14: (SND) Fixed a sound alarm bug</A></DD>
<DD><A href="#note75-15">Note 75-15: (SSP) Fixed a bug in the <CODE>SSP_StartJpegDecoderFast</CODE> function</A></DD>
<DD><A href="#note75-16">Note 75-16: (SSP) Added a high-speed version JPEG encoder function</A></DD>
<DD><A href="#note75-17">Note 75-17: (TCL) Revised the PhotoChecker tool</A></DD>
<DD><A href="#note75-18">Note 75-18: (TCL) Changed the <CODE>TCL_EncodeAndWritePicture[Ex]</CODE> function</A></DD>
<DD><A href="#note75-19">Note 75-19: (TOOL) Changed method of embedding TWL ROM argument data</A></DD>
<DD><A href="#note75-20">Note 75-20: (TOOL) Fixed a bug in the TwlNmenu progress bar display</A></DD>
<DD><A href="#note75-21">Note 75-21: (TOOL) Fixed a compstatic bug and changed the specifications</A></DD>
<DD><A href="#note75-22">Note 75-22: (TOOL) Revised the check for displayable characters in Chinese and Korean language titles in makebanner and makebanner.TWL</A></DD>
<DD><A href="#note75-23">Note 75-23: (TOOL) Corrected error in the behavior of makerom's -M option</A></DD>
<DD><A href="#note75-24">Note 75-24: (TOOL) Changed <CODE>makerom.TWL</CODE></A></DD>
<DD><A href="#note75-25">Note 75-25: (TP) Fixed the bug where stylus-up was not recognized correctly</A></DD>
<DD><A href="#note75-26">Note 75-26: (WM) Corrected when a negative value RSSI arrived in wireless TWL communication</A></DD>
<DD><A href="#note75-27">Note 75-27: (WVR) Added support for the HYBRID ROM of the WVR library</A></DD>
<DD><A href="#KnownIssues_5_3_PR">Known Issues in SDK Version 5.3 PR</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_2_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK 5.2 Release Version</A> (2009/06/10)</DT>
<DD><A href="#note74-01">Note 74-01: (DevEnv) Corrected Changelog Note 73-01</A></DD>
<DD><A href="#note74-02">Note 74-02: (DevEnv) Updated copyright notices</A></DD>
<DD><A href="#note74-03">Note 74-03: (DevEnv) Revised the manual for NAND application development</A></DD>
<DD><A href="#note74-04">Note 74-04: (DevEnv) Changed the A-Z index list of function references</A></DD>
<DD><A href="#note74-05">Note 74-05: (FS) Added information on the TWL-exclusive region</A></DD>
<DD><A href="#note74-06">Note 74-06: (TCL) Fixed the <CODE>TCL_EncodeAndWritePicture</CODE> function</A></DD>
<DD><A href="#note74-07">Note 74-07: (TOOL) Changed <CODE>TwlNmenu</CODE></A></DD>
<DD><A href="#note74-08">Note 74-08: (TOOL) Fixed the check for displayable characters in <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE></A></DD>
<DD><A href="#note74-09">Note 74-09: (WXC) Fixed a library dead-strip problem</A></DD>
<DD><A href="#KnownIssues_5_2_%E6%AD%A3%E5%BC%8F%E7%89%88">Known issues in TWL-SDK version 5.2 official release</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_2_RC">TWL-SDK 5.2 RC</A> (2009/05/29)</DT>
<DD><A href="#note73-01">Note 73-01: (CAMERA) Fixed the <CODE>CAMERA_SwitchOffLED</CODE> and <CODE>CAMERA_SetLED</CODE> functions</A></DD>
<DD><A href="#note73-02">Note 73-02: (CARD) Fixed a bug in detecting a card removal during ROM access</A></DD>
<DD><A href="#note73-03">Note 73-03: (DSP) Fixed a bug in the microphone sampling feature</A></DD>
<DD><A href="#note73-04">Note 73-04: (DevEnv) Corrected Changelog Note 72-07</A></DD>
<DD><A href="#note73-05">Note 73-05: (DevEnv) Revised the <I>TWL-SDK Migration Guide</I></A></DD>
<DD><A href="#note73-06">Note 73-06: (DevEnv) Removed <CODE>SDK_NITRO</CODE> from public header files</A></DD>
<DD><A href="#note73-07">Note 73-07: (DevEnv) Revised an explanation for applications with extended language support</A></DD>
<DD><A href="#note73-08">Note 73-08: (FS) Reduced the processing load on components while accessing NAND memory and SD Cards</A></DD>
<DD><A href="#note73-09">Note 73-09: (FS) Fixed an issue that prevented NITRO ROM overlays from being debugged in IS-TWL-DEBUGGER</A></DD>
<DD><A href="#note73-10">Note 73-10: (FS) Added a description related to determining the state of the SD Card slot</A></DD>
<DD><A href="#note73-11">Note 73-11: (FS) Revised error values related to save data</A></DD>
<DD><A href="#note73-12">Note 73-12: (FS) Fixed a bug related to conflicting use of multiple archives</A></DD>
<DD><A href="#note73-13">Note 73-13: (GX) Revised the DEMO library</A></DD>
<DD><A href="#note73-14">Note 73-14: (MIC) Explained auto-sampling function behavior and CODEC mode</A></DD>
<DD><A href="#note73-15">Note 73-15: (OS) Changed specifications for the screen displayed by the <CODE>OS_InitChina</CODE> function</A></DD>
<DD><A href="#note73-16">Note 73-16: (OS) Added the <CODE>OS_IsBootFromSystemMenu</CODE> function</A></DD>
<DD><A href="#note73-17">Note 73-17: (OS) Added a function to set the blocking mode for debug output</A></DD>
<DD><A href="#note73-18">Note 73-18: (PM) Changed how the <CODE>PM_SetLCDPower</CODE> function waits for a V-Blank</A></DD>
<DD><A href="#note73-19">Note 73-19: (SND) Added a note about setting the IIR filter</A></DD>
<DD><A href="#note73-20">Note 73-20: (SSP) Added functions that create BMP files</A></DD>
<DD><A href="#note73-21">Note 73-21: (SSP) Revised the work buffer size for JPEG encoding functions</A></DD>
<DD><A href="#note73-22">Note 73-22: (SSP) Fixed the JPEG decoding process</A></DD>
<DD><A href="#note73-23">Note 73-23: (SSP) Added a reduced-memory version of the JPEG-encoding function</A></DD>
<DD><A href="#note73-24">Note 73-24: (TCL) Reduced the memory used by JPEG encoding functions</A></DD>
<DD><A href="#note73-25">Note 73-25: (TCL) Fixed PhotoChecker</A></DD>
<DD><A href="#note73-26">Note 73-26: (TCL) Fixed the <CODE>TCL_EncodeAndWritePicture</CODE> function</A></DD>
<DD><A href="#note73-27">Note 73-27: (TOOL) Changed <CODE>NandFiler</CODE></A></DD>
<DD><A href="#note73-28">Note 73-28: (TOOL) Fixed a bug in TwlNmenu that occurred when importing from an SD Card</A></DD>
<DD><A href="#note73-29">Note 73-29: (TOOL) Added support for Chinese and Korean to <CODE>addbanner</CODE></A></DD>
<DD><A href="#note73-30">Note 73-30: (TOOL) Added the <CODE>-l</CODE> option to <CODE>compstatic</CODE></A></DD>
<DD><A href="#note73-31">Note 73-31: (TOOL) Added support for Chinese and Korean to <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE></A></DD>
<DD><A href="#note73-32">Note 73-32: (WBT) Fixed the return value from the <CODE>WBT_RegisterBlock</CODE> function</A></DD>
<DD><A href="#note73-33">Note 73-33: (WBT) Fixed a bug in the <CODE>wbt-1</CODE> sample demo</A></DD>
<DD><A href="#note73-34">Note 73-34: (WFS) Increased the stack size for internal threads</A></DD>
<DD><A href="#note73-35">Note 73-35: (WM) Revised the <CODE>dataShare-Model</CODE> and <CODE>wep-1</CODE> sample demos</A></DD>
<DD><A href="#note73-36">Note 73-36: (WM) Revised sample demos</A></DD>
<DD><A href="#note73-37">Note 73-37: (WM) Fixed a bug that prevented a callback from being invoked when the <CODE>WM_Reset</CODE> function was run at particular times</A></DD>
<DD><A href="#note73-38">Note 73-38: (WXC) Added the Chance-Encounter Communications library</A></DD>
<DD><A href="#KnownIssues_5_2_RC">Known issues in TWL-SDK version 5.2 RC</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_2_PR">TWL-SDK 5.2 PR</A> (2009/04/16)</DT>
<DD><A href="#note72-01">Note 72-01: (AES) Fixed a bug that occurred during simultaneous use of AES library and wireless features</A></DD>
<DD><A href="#note72-02">Note 72-02: (CAMERA) Added a note on the timing at which settings are applied by the <CODE>CAMERA_I2C*</CODE> functions</A></DD>
<DD><A href="#note72-03">Note 72-03: (CAMERA) Added a precautionary note to the function reference for the <CODE>CAMERA_SwitchOffLED</CODE> function</A></DD>
<DD><A href="#note72-04">Note 72-04: (CAMERA) Added frame rate values</A></DD>
<DD><A href="#note72-05">Note 72-05: (DSP) Fixed bugs in the <CODE>DSP_PlaySound</CODE> function</A></DD>
<DD><A href="#note72-06">Note 72-06: (DSP) Fixed a bug in the <CODE>DSP_Scaling*</CODE> functions</A></DD>
<DD><A href="#note72-07">Note 72-07: (DevEnv) Revised the <I>TWL-SDK Migration Guide</I></A></DD>
<DD><A href="#note72-08">Note 72-08: (EL) Added the <CODE>EL_Link*Ex</CODE> functions</A></DD>
<DD><A href="#note72-09">Note 72-09: (FS) Updated <CODE>AboutFileSystem.pdf</CODE></A></DD>
<DD><A href="#note72-10">Note 72-10: (FS) Fixed functions that involve writes to NAND memory</A></DD>
<DD><A href="#note72-11">Note 72-11: (FS) Revised the <CODE>async</CODE> sample demos</A></DD>
<DD><A href="#note72-12">Note 72-12: (FS) Fixed a bug that occurred during a system shutdown</A></DD>
<DD><A href="#note72-13">Note 72-13: (FS) Added an explanation of the size consumed by Nintendo DSi enhanced ROMs</A></DD>
<DD><A href="#note72-14">Note 72-14:(FS) Revisions specific to cache operation when accessing files</A></DD>
<DD><A href="#note72-15">Note 72-15: (FS) Corrected unnecessary device accesses in the flush process</A></DD>
<DD><A href="#note72-16">Note 72-16: (FS) Fixed a bug related to issuing commands in multiple threads</A></DD>
<DD><A href="#note72-17">Note 72-17: (GX) Added explanation to the <CODE>Sub_Double3D</CODE> sample demo</A></DD>
<DD><A href="#note72-18">Note 72-18: (MB) Re-modified the method for building the child programs for the <CODE>multiboot-model</CODE> and <CODE>multiboot-wfs</CODE> sample demos</A></DD>
<DD><A href="#note72-19">Note 72-19: (MB) Fixed a bug related to distribution with delayed loading</A></DD>
<DD><A href="#note72-20">Note 72-20: (NA) Added support for the Chinese and Korean shared font libraries</A></DD>
<DD><A href="#note72-21">Note 72-21: (OS) Added heap functions related to unused regions of hybrid ROMs in NITRO mode</A></DD>
<DD><A href="#note72-22">Note 72-22: (OS) Fixed undefined instructions in the IRQ handler</A></DD>
<DD><A href="#note72-23">Note 72-23: (OS) Added support for 17-digit ISBN numbers</A></DD>
<DD><A href="#note72-24">Note 72-24: (OS) Added information to the function reference for the <CODE>OS_GetCurrentThread</CODE> function</A></DD>
<DD><A href="#note72-25">Note 72-25: (OS) Added the <CODE>OS_IsOnMainMemory</CODE> and <CODE>OS_IsOnWram</CODE> functions</A></DD>
<DD><A href="#note72-26">Note 72-26: (OS) Added a warning screen for TWL-exclusive ROMs</A></DD>
<DD><A href="#note72-27">Note 72-27: (PM) Fixed a mutual exclusion bug in the PM library</A></DD>
<DD><A href="#note72-28">Note 72-28: (PM) Changed the priority rights for main memory during shutdown processing</A></DD>
<DD><A href="#note72-29">Note 72-29: (PRC) Changed the prototype pattern database</A></DD>
<DD><A href="#note72-30">Note 72-30: (RTC) Added a function reference for the <CODE>RTC_GetDayOfWeek</CODE> function</A></DD>
<DD><A href="#note72-31">Note 72-31: (SND) Fixed a bug related to loading WAVE data in the <CODE>DEMOLib</CODE> and <CODE>stream</CODE> sample demos</A></DD>
<DD><A href="#note72-32">Note 72-32: (SND) Fixed a bug in the SNDEX shutdown callback</A></DD>
<DD><A href="#note72-33">Note 72-33: (SSP) Fixed a bug in the <CODE>SSP_StartJpegEncoder*</CODE> functions</A></DD>
<DD><A href="#note72-34">Note 72-34: (SSP) Fixed the buffer size used for creating thumbnails</A></DD>
<DD><A href="#note72-35">Note 72-35: (TCL) Added the TCL library</A></DD>
<DD><A href="#note72-36">Note 72-36: (TOOL) Changed <CODE>makerom</CODE></A></DD>
<DD><A href="#note72-37">Note 72-37: (TOOL) Changed <CODE>makerom.TWL</CODE></A></DD>
<DD><A href="#note72-38">Note 72-38: (TOOL) Fixed a bug that resulted in an illegal TAD file contained in an SRL file created by <CODE>maketad</CODE></A></DD>
<DD><A href="#note72-39">Note 72-39: (TOOL) Added TWL card support to <CODE>maketad</CODE> and <CODE>tad2rom</CODE></A></DD>
<DD><A href="#note72-40">Note 72-40: (TOOL) Fixed usage information for <CODE>ntrcomp</CODE></A></DD>
<DD><A href="#note72-41">Note 72-41: (TOOL) Added explanations related to specifying banners for applications for the Chinese market</A></DD>
<DD><A href="#note72-42">Note 72-42: (WM) Improved decision-making in the <CODE>WM_IsValidGameInfo</CODE> and <CODE>WM_IsValidGameBeacon</CODE> functions</A></DD>
<DD><A href="#note72-43">Note 72-43: (WM) Added restrictions on the buffer specified when initializing the wireless library</A></DD>
<DD><A href="#note72-44">Note 72-44: (Miscellaneous) Handled a renamed Australian rating organization</A></DD>
<DD><A href="#KnownIssues_5_2_PR">Known issues in TWL-SDK version 5.2 PR</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_1_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK 5.1 Release Version</A> (2009/02/27)</DT>
<DD><A href="#note71-01">Note 71-01:(DSP) Updated the audio and graphics components</A></DD>
<DD><A href="#note71-02">Note 71-02:(DevEnv) Fixed a problem in the arena region of expanded main memory </A></DD>
<DD><A href="#note71-03">Note 71-03:(GX) Clarified the group of functions that ignore settings when the LCD is in the OFF state</A></DD>
<DD><A href="#note71-04">Note 71-04:(MATH) Revised the TWL-SDK Migration Guide</A></DD>
<DD><A href="#note71-05">Note 71-05:(MB) Fixed the HYBRID Card application clone boot </A></DD>
<DD><A href="#note71-06">Note 71-06:(MB) Fixed the multiboot-Model and fake_child sample demos</A></DD>
<DD><A href="#note71-07">Note 71-07:(OS) Added a process to wait for the divider to end when loading context</A></DD>
<DD><A href="#note71-08">Note 71-08:(PM) Fixed interrupt-specific problem with PM_ForceToPowerOff</A></DD>
<DD><A href="#note71-09">Note 71-09:(SSP) Corrected the JPEG decoding process</A></DD>
<DD><A href="#note71-10">Note 71-10:(SSP) Fixed problem with SSP_StartJpegEncoderWithEncodeData</A></DD>
<DD><A href="#note71-11">Note 71-11: (TOOL) Fixed tad2rom</A></DD>
<DD><A href="#note71-12">Note 71-12:(WM) Corrected sample demos</A></DD>
<DD><A href="#KnownIssues_5_1_%E6%AD%A3%E5%BC%8F%E7%89%88">Known issues in TWL-SDK version 5.1 official release</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_1_RC">TWL-SDK 5.1 RC</A> (2009/02/10)</DT>
<DD><A href="#note70-01">Note 70-01:(CTRDG)  Made CTRDG_Init a weak function</A></DD>
<DD><A href="#note70-02">Note 70-02:(DevEnv) Revised the TWL-SDK Transition Guide</A></DD>
<DD><A href="#note70-03">Note 70-03:(FS) Split up the FAT driver initialization functions</A></DD>
<DD><A href="#note70-04">Note 70-04:(FS) Fixed a bug in the FS_SetSeekCache function</A></DD>
<DD><A href="#note70-05">Note 70-05:(FS) Fixed a bug specific to system shutdown</A></DD>
<DD><A href="#note70-06">Note 70-06:(FS) Fixed a bug specific to working with long path names</A></DD>
<DD><A href="#note70-07">Note 70-07:(GX) Revised the GX_SetDefaultNDMA function</A></DD>
<DD><A href="#note70-08">Note 70-08:(MB) Reduced the amount of memory consumed when using MB parent</A></DD>
<DD><A href="#note70-09">Note 70-09:(PM) Added a note to the PM_SetLCDPower Function Reference</A></DD>
<DD><A href="#note70-10">Note 70-10:(SND) Added API for changing sound volume</A></DD>
<DD><A href="#note70-11">Note 70-11:(STD)  Revised the STD_SearchChar* functions</A></DD>
<DD><A href="#note70-12">Note 70-12:(TOOL) Changed NandFiler</A></DD>
<DD><A href="#note70-13">Note 70-13:(TOOL) Added a method for displaying the size of NAND applications in TwlNmenu</A></DD>
<DD><A href="#note70-14">Note 70-14: (TOOL) Revised WMTestTool</A></DD>
<DD><A href="#note70-15">Note 70-15:(TOOL) Changed makerom.TWL</A></DD>
<DD><A href="#note70-16">Note 70-16:(TOOL) Deleted mb_child_simple.srl</A></DD>
<DD><A href="#note70-17">Note 70-17:(TOOL) Added mb_child for separate operating environments</A></DD>
<DD><A href="#note70-18">Note 70-18:(WFS) Fixed a bug in child end process</A></DD>
<DD><A href="#note70-19">Note 70-19:(WM) Added the rssi member to the WMPortRecvCallback structure</A></DD>
<DD><A href="#note70-20">Note 70-20:(MISC) Revised the sample demos</A></DD>
<DD><A href="#KnownIssues_5_1_RC">Known issues in TWL-SDK version 5.1 RC</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_1_PR2">TWL-SDK 5.1 PR2</A> (2009/01/15)</DT>
<DD><A href="#note69-01">Note 69-01:(CAMERA) Revised demo</A></DD>
<DD><A href="#note69-02">Note 69-02:(CARD)  Strengthened card access determination</A></DD>
<DD><A href="#note69-03">Note 69-03:(DSP) Changed the DSP_PlayShutterSound function</A></DD>
<DD><A href="#note69-04">Note 69-04:(DevEnv) Updated the TWL-SDK Transition Guide</A></DD>
<DD><A href="#note69-05">Note 69-05:(EL) Added the EL_CalcEnoughBufferSizeforLink* functions</A></DD>
<DD><A href="#note69-06">Note 69-06:(EL) Added the EL_GetResultCode function</A></DD>
<DD><A href="#note69-07">Note 69-07:(EL) Revised the EL_Unlink function</A></DD>
<DD><A href="#note69-08">Note 69-08:(FS) Added the FS_ForceToEnableLatencyEmulation function</A></DD>
<DD><A href="#note69-09">Note 69-09:(GX) Corrected the Sub_Double3D sample demo</A></DD>
<DD><A href="#note69-10">Note 69-10:(MB) Added text about the pseudo-Download Play feature</A></DD>
<DD><A href="#note69-11">Note 69-11:(NA) Updated the NAND Application Development Manual</A></DD>
<DD><A href="#note69-12">Note 69-12:(OS) Expanded OSMutex</A></DD>
<DD><A href="#note69-13">Note 69-13:(PM) Made revisions specific to turning off the LCD</A></DD>
<DD><A href="#note69-14">Note 69-14:(SND) Added the SNDEX_GetCurrentVolume[Async] functions</A></DD>
<DD><A href="#note69-15">Note 69-15:(SND) Restricted repeated execution of SNDEX_SetVolume[Async] functions</A></DD>
<DD><A href="#note69-16">Note 69-16:(SND) Fixed method of exclusive control when continuously playing shutter sound</A></DD>
<DD><A href="#note69-17">Note 69-17:(SSP) Added the  SSP_ExtractJpegDecoderExif function</A></DD>
<DD><A href="#note69-18">Note 69-18:(SSP) Fixed a bug in the SSP_StartJpegDecoder function</A></DD>
<DD><A href="#note69-19">Note 69-19:(SSP) Fixed a bug in the SSP_StartJpegDecoder function</A></DD>
<DD><A href="#note69-20">Note 69-20:(SSP) Integrated the demos</A></DD>
<DD><A href="#note69-21">Note 69-21:(TOOL) Added features to NandFiler for importing and exporting Save Data</A></DD>
<DD><A href="#note69-22">Note 69-22:(TOOL) Changed makerom.TWL</A></DD>
<DD><A href="#note69-23">Note 69-23:(TOOL) Added the tad2rom tool</A></DD>
<DD><A href="#note69-24">Note 69-24:(WM) Fixed a problem with the execution of the WM_SetMPDataToPort function callback</A></DD>
<DD><A href="#KnownIssues_5_1_PR2">Known issues in TWL-SDK version 5.1 PR2</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_1_PR">TWL-SDK 5.1 PR</A> (2008/12/10)</DT>
<DD><A href="#note68-01">Note 68-01:(CAMERA) Fixed infinite loop bug in CAMERA_Init function</A></DD>
<DD><A href="#note68-02">Note 68-02:(CARD) Changed the default settings of the cache disable operations</A></DD>
<DD><A href="#note68-03">Note 68-03:(CARD) Added functions to determine operating mode</A></DD>
<DD><A href="#note68-04">Note 68-04:(CRYPTO) Changed the padding method for RSA encryption</A></DD>
<DD><A href="#note68-05">Note 68-05:(CRYPTO) Changed the library's section placement</A></DD>
<DD><A href="#note68-06">Note 68-06:(DSP) Fixed a bug in the DSP_PlaySound function</A></DD>
<DD><A href="#note68-07">Note 68-07:(DSP) Revised the timing of shutter sound playback</A></DD>
<DD><A href="#note68-08">Note 68-08:(DSP) Fixed a problem with stereo sound playback</A></DD>
<DD><A href="#note68-09">Note 68-09:(DSP) Restricted playable shutter sound data</A></DD>
<DD><A href="#note68-10">Note 68-10:(DevEnv) Added documentation for ARM7 components</A></DD>
<DD><A href="#note68-11">Note 68-11:(DevEnv) Added ARM7 component</A></DD>
<DD><A href="#note68-12">Note 68-12:(DevEnv) Corrected the BuildFinalRom demo</A></DD>
<DD><A href="#note68-13">Note 68-13:(DevEnv) Added build switch to disable IS-NITRO-DEBUGGER debug features</A></DD>
<DD><A href="#note68-14">Note 68-14:(DevEnv) Made revisions relating to NITRO build Static segment</A></DD>
<DD><A href="#note68-15">Note 68-15:(DevEnv) Added guide for transition from NITRO-SDK</A></DD>
<DD><A href="#note68-16">Note 68-16:(ENV) Corrected API name of ENV_SetResourceSetArray function</A></DD>
<DD><A href="#note68-17">Note 68-17:(FS) Added the FS_ATTRIBUTE_IS_OFFLINE flag</A></DD>
<DD><A href="#note68-18">Note 68-18:(FS)  Fixed a bug in the FS_GetSeekCacheSize function</A></DD>
<DD><A href="#note68-19">Note 68-19:(FS)  Fixed bugs in the FS_SetSeekCache and FS_SeekFile functions</A></DD>
<DD><A href="#note68-20">Note 68-20:(FS) Revised the overlay-staticinit demo</A></DD>
<DD><A href="#note68-21">Note 68-21:(FS) Added functions to determine archive status</A></DD>
<DD><A href="#note68-22">Note 68-22:(FS) Made revisions specific to cache operation when accessing files</A></DD>
<DD><A href="#note68-23">Note 68-23:(GX) Revised the Sub_Double3D sample demo</A></DD>
<DD><A href="#note68-24">Note 68-24:(MB) Added formal support for HYBRID program clone boot feature</A></DD>
<DD><A href="#note68-25">Note 68-25:(NA) Revised the NA_LoadSharedFontTable function</A></DD>
<DD><A href="#note68-26">Note 68-26:(OS) Made OS_GetSerialNo a private function</A></DD>
<DD><A href="#note68-27">Note 68-27:(OS) Changed the OS_ResetSystem function process</A></DD>
<DD><A href="#note68-28">Note 68-28:(OS) Revised references to arena and protection region</A></DD>
<DD><A href="#note68-29">Note 68-29:(OS) Revised functions that get Parental Control status</A></DD>
<DD><A href="#note68-30">Note 68-30:(PM) Added the pm-2 demo</A></DD>
<DD><A href="#note68-31">Note 68-31:(PM) Added exclusive control for hardware reset and application jumps</A></DD>
<DD><A href="#note68-32">Note 68-32:(PM) Fixed a bug with hardware reset</A></DD>
<DD><A href="#note68-33">Note 68-33:(SND) Prohibited changing DSPMixRate during shutter sound playback</A></DD>
<DD><A href="#note68-34">Note 68-34:(SND) Prohibited execution of SNDEX functions during shutter sound playback</A></DD>
<DD><A href="#note68-35">Note 68-35:(SND) Fixed a problem related to the execution of multiple SNDEX functions</A></DD>
<DD><A href="#note68-36">Note 68-36:(SND) Corrected return value typo in asynchronous function references</A></DD>
<DD><A href="#note68-37">Note 68-37:(SSP) Revised behavior in HYBRID build NITRO mode</A></DD>
<DD><A href="#note68-38">Note 68-38:(SSP) Privatized the JPEG encode/decode signature feature</A></DD>
<DD><A href="#note68-39">Note 68-39:(SSP) Added the SSP_ConvertJpegEncodeData and SSP_StartJpegEncoderWithEncodeData functions</A></DD>
<DD><A href="#note68-40">Note 68-40:(TOOL) Fixed bugs in NandFiler</A></DD>
<DD><A href="#note68-41">Note 68-41:(TOOL) Added a TWL version of mb_child.srl</A></DD>
<DD><A href="#note68-42">Note 68-42:(TOOL) Added a TWL screen banner viewer to addbanner</A></DD>
<DD><A href="#note68-43">Note 68-43: (TOOL) Revisions to buryarg.TWL</A></DD>
<DD><A href="#note68-44">Note 68-44:(TOOL) Expanded cmptad functionality</A></DD>
<DD><A href="#note68-45">Note 68-45:(TOOL) Enhanced error-checking functionality of compstatic tool</A></DD>
<DD><A href="#note68-46">Note 68-46:(TOOL) Revised makebanner and makebanner.TWL</A></DD>
<DD><A href="#note68-47">Note 68-47: (TOOL) Changed <CODE>makerom.TWL.exe</CODE></A></DD>
<DD><A href="#note68-48">Note 68-48:(TOOL) Changed makerom.exe</A></DD>
<DD><A href="#note68-49">Note 68-49:(TOOL) Added functionality to showversion to display build mode</A></DD>
<DD><A href="#note68-50">Note 68-50:(TOOL) Added background graphic for banner previewing</A></DD>
<DD><A href="#note68-51">Note 68-51:(WM) Fixed a bug in MP communication during component overload</A></DD>
<DD><A href="#note68-52">Note 68-52:(WM) Changed behavior for Wireless OFF mode</A></DD>
<DD><A href="#note68-53">Note 68-53:(WVR) Fixed a bug in Wireless library shutdown in switchover demo</A></DD>
<DD><A href="#note68-54">Note 68-54: (MISC) Changed part of the banner format</A></DD>
<DD><A href="#KnownIssues_5_1_PR">Known issues in TWL-SDK version 5.1 PR</A></DD>
</DL>
<DL>
<DT>
<A href="#sdk_5_00">TWL-SDK 5.0 Release Version</A> (2008/10/23)
<DD><A href="#note67-01">Note 67-01: (CAMERA) Corrected error handling for <CODE>simpleShoot-1</CODE>, <CODE>simpleShoot-2</CODE></A>
<DD><A href="#note67-02">Note 67-02: (CAMERA) Revised the <CODE>simpleShoot-2</CODE> demo</A>
<DD><A href="#note67-03">Note 67-03: (CARD) Support for parent backup device</A>
<DD><A href="#note67-04">Note 67-04: (DSP) Revised synchronous version of the DSP graphics component function</A>
<DD><A href="#note67-05">Note 67-05: (DSP) Corrected inconsistency in the results of the <CODE>DSP_Scaling*</CODE> and <CODE>DSP_CalcScalingFactor*</CODE> functions</A>
<DD><A href="#note67-06">Note 67-06: (DSP) Revised termination process for each DSP component</A>
<DD><A href="#note67-07">Note 67-07:(DevEnv) Updated documents specific to the build switch</A>
<DD><A href="#note67-08">Note 67-08: (FS) Improved open determination for TWL-exclusive files</A>
<DD><A href="#note67-09">Note 67-09: (MB) Added a switch for the build mode on multiboot-wfs distributed child devices</A>
<DD><A href="#note67-10">Note 67-10: (MI) Added the <CODE>MI_SendNDmaGXCommand*</CODE> functions</A>
<DD><A href="#note67-11">Note 67-11:(OS) Added the <CODE>OS_IsCodecTwlMode</CODE> function</A>
<DD><A href="#note67-12">Note 67-12: (OS) Added the demo for the <CODE>OS_JumpTo*</CODE> functions</A>
<DD><A href="#note67-13">Note 67-13: (OS) Added a function to get the status of parental controls</A>
<DD><A href="#note67-14">Note 67-14: (OS) Movement of the function reference's Operating Environment section</A>
<DD><A href="#note67-15">Note 67-15: (PM) Added exclusive control for hardware resets and application jumps</A>
<DD><A href="#note67-16">Note 67-16: (PM) Revised Power Button process</A>
<DD><A href="#note67-17">Note 67-17: (SCFG) Adjusted SCFG functions</A>
<DD><A href="#note67-18">Note 67-18: (SND) Abolished headphone mute when setting the IIR filter (targeting microphone input)</A>
<DD><A href="#note67-19">Note 67-19: (SND) Fixed a <CODE>SNDEX_SetVolumeSwitchCallback</CODE> function bug</A>
<DD><A href="#note67-20">Note 67-20: (SND) Added functionality to the <CODE>extraFunc</CODE> demo</A>
<DD><A href="#note67-21">Note 67-21: (SSP) NITRO mode support for the JPEG library</A>
<DD><A href="#note67-22">Note 67-22: (SSP) Added error processing for the <CODE>SSP_StartJpegEncoder</CODE> function</A>
<DD><A href="#note67-23">Note 67-23: (STD) Handled a bug where the <CODE>STD_CompareNString</CODE> function would not return correct values</A>
<DD><A href="#note67-24">Note 67-24: (STD) Revised the <CODE>STD_ConvertAsciiToInt</CODE> and <CODE>STD_ConvertAsciiToLong</CODE> functions</A>
<DD><A href="#note67-25">Note 67-25: (STD) Revised the <CODE>STD_TSNPrintf</CODE>, <CODE>STD_TSPrintf</CODE>, <CODE>STD_TVSNPrintf</CODE>, and <CODE>STD_TVSPrintf</CODE> functions</A>
<DD><A href="#note67-26">Note 67-26: (STD) Revised the <CODE>STD_TSScanf</CODE> and <CODE>STD_TVSScanf</CODE> functions</A>
<DD><A href="#note67-27">Note 67-27: (TOOL) Added backup and restore features for saved data in <CODE>NandFiler</CODE></A>
<DD><A href="#note67-28">Note 67-28: (TOOL) Added the ability to import from DS cards to <CODE>TwINmenu</CODE></A>
<DD><A href="#note67-29">Note 67-29: (TOOL) Added the <CODE>cmptad</CODE> tool</A>
<DD><A href="#note67-30">Note 67-30: (TOOL) Added <CODE>makebanner.exe</CODE> and <CODE>makebanner.TWL.exe</CODE> warnings</A>
<DD><A href="#note67-31">Note 67-31: (TOOL) Added <CODE>makelst</CODE> and <CODE>stripdebug</CODE> references</A>
<DD><A href="#note67-32">Note 67-32: (TOOL) Changed <CODE>makerom.TWL.exe</CODE></A>
<DD><A href="#note67-33">Note 67-33: (TOOL) Added a feature to <CODE>maketad</CODE> to create an SRL file for writing to a DS card</A>
<DD><A href="#note67-34">Note 67-34: (TWL Wireless) Fixed a bug where the system would hang when a reset is applied during TWL wireless communication</A>
<DD><A href="#KnownIssues_5_00">Known issues in TWL-SDK version 5.0 official release</A>
</DL>
<HR>
<H2 style="line-height: 0"><A name="sdk_5_5_%E6%AD%A3%E5%BC%8F%E7%89%88">■ TWL-SDK Version 5.5 Official Release</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2010/07/12)</P></DIV>
<HR>
<H3><A name="note82-01">Note 82-01:(FS) Fixed a bug where wireless communications were disconnected while loading files via WFS</A></H3>
<P><description>Fixed a bug where a data access exception occurred if wireless communications were disconnected while loading a file that uses the <CODE>FS_ReadFile</CODE> function via WFS.</description></P>
<HR>
<H3><A name="note82-02">Note 82-02:(GX) Revised the Sub_Double3D Sample Demo</A></H3>
<P><description>Parts of the Sub_Double3D sample demo were not updated to match changes in the <CODE>OS_SpinWait*</CODE> functions. These have been fixed.</description></P>
<HR>
<H3><A name="note82-03">Note 82-03:(OS) Made the <CODE>OS_IsRestrictDSDownloadBoot</CODE> function non-public</A></H3>
<P><description>The <CODE>OS_IsRestrictDSDownloadBoot</CODE> function, which is not needed by applications, had been made public. This is now a non-public function.</description></P>
<HR>
<H3><A name="note82-04">Note 82-04:(PM) Added notes to the <CODE>PM_SetBackLight*</CODE> function reference pages</A></H3>
<P><description>In some PMIC accessories, the system will shut down if the backlight is turned on and off at high speed. We now know that a time interval of 16 msec or more is necessary to switch the backlight on and off. We added a note about this requirement to the function reference.</description></P>
<HR>
<H3><A name="KnownIssues_5_5_%E6%AD%A3%E5%BC%8F%E7%89%88">Known Issues in TWL-SDK 5.5 Release Version</A></H3>
<knownissues><description>
        <ul>
<li>None.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_5_RC">■ TWL-SDK Version 5.5 RC</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2010/06/10)</P></DIV>
<HR>
<H3><A name="note81-01">Note 81-01:(CAMERA) Fixed sleep support for demos</A></H3>
<P><description>In the simpleShoot-1 and simpleShoot-2 demos, the pre-sleep camera termination process was incorrect. This has been corrected.</description></P>
<HR>
<H3><A name="note81-02">Note 81-02:(CARD) ARM7 card access mutex</A></H3>
<P><description>When the ROM header was read on the ARM7 to check for the removal of a card, the card removal check and the card access request from the ARM9 contended for access and entered an infinite loop. <br> For that reason, this bug was fixed by exclusively controlling ARM7 card access.</description></P>
<HR>
<H3><A name="note81-03">Note 81-03:(CARD) Changed the <CODE>CARD_ReadRomAsync</CODE> function reference</A></H3>
<P><description>Added a description to the <CODE>CARD_ReadRomAsync</CODE> function reference about different DMA and CPU transfers based on operating modes and ROM format.</description></P>
<HR>
<H3><A name="note81-04">Note 81-04:(CARD) Fixed a backup access bug that occurred when using the host I/O</A></H3>
<P><description>When using the host I/O with the IS-TWL-DEBUGGER, a thread deadlock occurs on the ARM7, and subsequent backup access stops.<br> This bug has been fixed.</description></P>
<HR>
<H3><A name="note81-05">Note 81-05:(DSP) Revised the DSP demo</A></H3>
<P><description>In the DSP demo initialization process, the process to deallocate WRAM from ARM7 was not performed. This bug has been fixed.</description></P>
<HR>
<H3><A name="note81-06">Note 81-06:(DSP) Fixed a bug in the <CODE>DSP_PlayShutterSound</CODE> function</A></H3>
<P><description>Fixed a bug where the 47.61 kHz shutter sound could not be played back when using the <CODE>DSP_PlayShutterSound</CODE> function.</description></P>
<HR>
<H3><A name="note81-07">Note 81-07:(DSP) Fixed a bug in the <CODE>DSP_Scaling[Fx]</CODE> function</A></H3>
<P><description>Fixed a bug where calling the <CODE>DSP_Scaling[Fx]</CODE> function would lead to an infinite loop within the function.</description></P>
<HR>
<H3><A name="note81-08">Note 81-08:(DevEnv) Fixed the size-overflow check in the TCM region</A></H3>
<P><description>Fixed the LCF template file because the size-overflow check was not working correctly when an overlay was located in the TCM region.</description></P>
<HR>
<H3><A name="note81-09">Note 81-09:(DevEnv) Changed makelcf</A></H3>
<P><description>Made the following changes to <CODE>makelcf</CODE>.
        <ul>
<li>Changed to be able to use uppercase characters, numbers, and underscores in the specification of section names.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note81-10">Note 81-10:(DevEnv) Changed makelcf.TWL</A></H3>
<P><description>Made the following changes to <CODE>makelcf.TWL</CODE>.
        <ul>
<li>Fixed a bug in the overlay section where the force parameter was not recognized correctly even when it was specified.</li>
<li>Changed to be able to use uppercase characters, numbers, and underscores in the specification of section names.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note81-11">Note 81-11:(DevEnv) Cleared the reserved region in main memory</A></H3>
<P><description>When starting the program, an unused reserved region at the top of main memory is now cleared.<br> This process is performed only on HYBRID ROM and LIMITED ROM.</description></P>
<HR>
<H3><A name="note81-12">Note 81-12:(DevEnv) Updated the Nintendo logo data that is used as an antipiracy measure</A></H3>
<P><description>Updated the Nintendo logo data that is used as an antipiracy measure.<br> It is now possible to use the vertical logo data under all conditions.</description></P>
<HR>
<H3><A name="note81-13">Note 81-13:(FS) Revised the <CODE>FS_SeekFile</CODE> function</A></H3>
<P><description>The <CODE>FS_SeekFile</CODE> function internally issued commands to another thread and waited for the thread to complete, regardless of the archive type. However, this was revised to access the archive directly, if the state allows direct access.</description></P>
<HR>
<H3><A name="note81-14">Note 81-14:(FS) Revised the <CODE>FS_WriteFile</CODE> function reference</A></H3>
<P><description>Revised the content in the Description section of the <CODE>FS_WriteFile</CODE> function for archives whose size can be increased automatically.</description></P>
<HR>
<H3><A name="note81-15">Note 81-15:(FS) Fixed a compatibility issue with SD Cards</A></H3>
<P><description>Fixed a compatibility issue that existed for certain SD Cards.</description></P>
<HR>
<H3><A name="note81-16">Note 81-16:(FS) Revised the <CODE>FX</CODE> functions</A></H3>
<P><description>The following functions in the FX library could return incorrect values due to overflows and sign extension arithmetic. They have been fixed.
        <ul>
          <li>VEC_Fx16DotProduct</li>
          <li>VEC_CrossProduct</li>
          <li>VEC_Mag</li>
          <li>VEC_Distance</li>
          <li>VEC_Fx16Distance</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note81-17">Note 81-17:(FX) Revised the <CODE>MTX_PerspectiveW</CODE> function</A></H3>
<P><description>Fixed a bug where the <CODE>MTX_PerspectiveW</CODE> function sometimes returns an invalid value because the value sometimes overflows. <br> Added a demo to the FX sample demo test that tests the <CODE>MTX_PerspectiveW</CODE> function.</description></P>
<HR>
<H3><A name="note81-18">Note 81-18:(GX) Revised the <CODE>GX_SetDefaultDMA</CODE> and <CODE>GX_SetDefaultNDMA</CODE> functions</A></H3>
<P><description>If the <CODE>GX_SetDefaultDMA</CODE> or the <CODE>GX_SetDefaultNDMA</CODE> function was called after calling the <CODE>GX_SetDefaultNDMA</CODE> function once, an ASSERT occurred without the internal DMA complete waiting process being performed normally. This bug has been fixed.</description></P>
<HR>
<H3><A name="note81-19">Note 81-19:(MATH) Revised the <CODE>MATH_QSortStackSize</CODE> function</A></H3>
<P><description>To improve efficiency, we consolidated code that performed the same calculation twice in the <CODE>MATH_QSortStackSize</CODE> function.<br> There is no change to the calculation results from before the revision.</description></P>
<HR>
<H3><A name="note81-20">Note 81-20:(MIC) Revised the check process for the buffer specified by auto-sampling</A></H3>
<P><description>Fixed a mistake in a part of the process that checks whether the address is correct for the buffer specified as the storage destination for sampling results during auto-sampling.</description></P>
<HR>
<H3><A name="note81-21">Note 81-21:(OS) Changed the <CODE>OS_ResetSystem</CODE> function process</A></H3>
<P><description>In the <CODE>OS_ResetSystem</CODE> function, all interrupt flags were cleared when a reset occurred. However, this function was changed so that only the PXI interrupt (OS_IE_FIFO_RECV) is not cleared, because the ARM7’s wait process for PXI did not always finish before a reset.</description></P>
<HR>
<H3><A name="note81-22">Note 81-22:(OS) Added an ASSERT to determine whether <CODE>OS_SleepThread</CODE> is in IRQ mode</A></H3>
<P><description>Added an ASSERT to the <CODE>OS_SleepThread</CODE> function to check whether it was called in IRQ mode.<br> In debug builds, the assert displays a warning and halts if <CODE>OS_SleepThread</CODE> is called in IRQ mode.</description></P>
<HR>
<H3><A name="note81-23">Note 81-23:(OS) Changed the <CODE>OS_WaitIrq[Ex]</CODE> function</A></H3>
<P><description>Changed the timing of the return to an interrupt-enabled state in the <CODE>OS_WaitIrq</CODE> and <CODE>OS_WaitIrqEx</CODE> functions. <br> Before the fix, in some cases interrupts were not detected immediately. </description></P>
<HR>
<H3><A name="note81-24">Note 81-24:(OS) Added a description of the interrupt used with PXI</A></H3>
<P><description>Added an explanation to OS Interrupts (overview) in the Function Reference about PXI library interrupts.</description></P>
<HR>
<H3><A name="note81-25">Note 81-25:(TOOL) Added the NandFiler feature</A></H3>
<P><description>Added a feature to the NandFiler tool to fill the photo memory region with photo data to set the remaining available memory to 0.</description></P>
<HR>
<H3><A name="note81-26">Note 81-26:(TOOL) Revised makerom[.TWL]</A></H3>
<P><description>When not using an overlay, and the size of the ARM static module is 16 KB or less, the ARM7 static module ROM offset sometimes becomes an invalid value. This bug has been fixed.</description></P>
<HR>
<H3><A name="note81-27">Note 81-27:(TOOL) Fixed a bug where the system would hang when power to the parent device was disconnected while downloading mb_child_TWL.srl</A></H3>
<P><description>In DS download play, the child device would stop if the parent device power was cut while the child device was downloading data.<br> This occurred when the parent device is TWL and the system was using HYBRID ROM or LIMITED ROM.<br> This does not occur in NITRO-SDK or TWL NITRO ROM.<br> The revised commercial-version DS download play is included in SystemUpdater version 1.4. This has already been released. </description></P>
<HR>
<H3><A name="note81-28">Note 81-28:(WXC) Suppressed the output of some unnecessary warnings</A></H3>
<P><description>Changed to suppress output of some WARNING debug output that was generated in WXC debug builds.</description></P>
<HR>
<H3><A name="note81-29">Note 81-29:(Others) Added support for the new name of the Australian rating organization</A></H3>
<P><description>Made the following revisions following a change to the name of the Australian rating organization.
        <ul>
<li>Changed the properties used to specify Australia in the <CODE>Rating</CODE> section of <CODE>makerom.TWL</CODE>. <br>Accordingly, revised the <CODE>makerom.TWL</CODE> page in the <I>Function Reference Manual</I> as well.</li>
<li>Renamed <CODE>enum</CODE> members related to Parental Controls in the TWL system information</li>
<li>Revised RSF file comments for each demo</li>
        </ul>
      </description></P>
<HR>
<H3><A name="KnownIssues_5_5_RC">Known issues in TWL-SDK version 5.5 RC</A></H3>
<knownissues><description>
        <ul>
<li>None.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_4_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK Version 5.4 Official Release</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/12/18)</P></DIV>
<HR>
<H3><A name="note80-01">Note 80-01: (DSP) Fixed a bug in the <CODE>DSP_Scaling[Fx]</CODE> functions</A></H3>
<P><description>Revised the description in the changelog because the revision added with <a href="changelog.html#note79-01">Note 79-01</a> was insufficient.</description></P>
<HR>
<H3><A name="note80-02">Note 80-02: (DevEnv) Replaced the Nintendo logo data as an antipiracy measure</A></H3>
<P><description>The BMP file of the Nintendo logo data that was provided as an antipiracy measure (added in <a href="changelog.html#note78-12">Note 78-12</a>) was updated to match the Function Reference.</description></P>
<HR>
<H3><A name="note80-03">Note 80-03:(FS) Revised the FS_WriteFile function reference</A></H3>
<P><description>The following revisions were made to the FS Function Reference Manual.
        <ul>
<li>Revised the content in the Description section of the <CODE>FS_WriteFile</CODE> function for archives whose size can be automatically expanded.</li>
<li>Added a description of the standard archive definition to the Archives section in the File System (FS) Overview section.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note80-04">Note 80-04: (WFS) Changed the processing when the WFS is disconnected</A></H3>
<P><description>Previously, when disconnecting the WFS, the ROM archive was reset in the <CODE>WFS_EndClient</CODE> function, but there was a bug that stopped the program from being run from an interrupt handler.<br> For that reason, the process now starts a different thread.</description></P>
<HR>
<H3><A name="note80-05">Note 80-05: (WXC) Added a note about North American titles to the description in the Chance Encounter Communications Library</A></H3>
<P><description>Added a note to <CODE>$TwlSDK/docs/TechnicalNotes/AboutWXC.pdf</CODE> about North American titles.<br> In line with that change, added the <CODE>$TwlSDK/bin/ARM9-TS/Rom/DSDownloadStation.srl</CODE> test program for North America that provides features equivalent to Chance Encounter Relay Stations.</description></P>
<HR>
<H3><A name="note80-06">Note 80-06: (WXC) Revised error recovery processing</A></H3>
<P><description>Fixed a bug where the internal state of the WXC library becomes abnormal, and WXC becomes inoperable if the WXC library is repeatedly started and stopped.</description></P>
<HR>
<H3><A name="KnownIssues_5_4_%E6%AD%A3%E5%BC%8F%E7%89%88">Known Issues in TWL-SDK 5.4 Release Version</A></H3>
<knownissues><description>
        <ul>
<li>None.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_4_RC">TWL-SDK Version 5.4 RC</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/12/04)</P></DIV>
<HR>
<H3><A name="note79-01">Note 79-01: (DSP) Fixed a bug in the <CODE>DSP_Scaling[Fx]</CODE> functions</A></H3>
<P><description>When using the <CODE>DSP_Scaling[Fx]</CODE> functions, processing sometimes did not complete. This bug was fixed.</description></P>
<HR>
<H3><A name="note79-02">Note 79-02: (DevEnv) Revised the TWL-SDK Migration Guide</A></H3>
<P><description>Made the following revisions to <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE>.
        <ul>
<li>Added a description about changes in the <CODE>OS_SleepThreadDirect</CODE> function specifications.</li>
        </ul>
In line with this change, explained in the <CODE>OS_SleepThreadDirect</CODE> Function Reference that nothing happens when the thread is not in an executable state.</P>
<HR>
<H3><A name="note79-03">Note 79-03: (FS) Clarified archives whose size can be automatically expanded by the <CODE>FS_WriteFile</CODE> function.</A></H3>
<P><description>Added a description to the <CODE>FS_WriteFile</CODE> function about archives whose size can be expanded automatically.</description></P>
<HR>
<H3><A name="note79-04">Note 79-04: (GX) Revised the <CODE>GX_SetCapture</CODE> function reference</A></H3>
<P><description>The description about the targeted VRAM for the capture source in the <CODE>GX_SetCapture</CODE> function reference (Note 2) was incorrect. The description has been corrected.</description></P>
<HR>
<H3><A name="note79-05">Note 79-05: (MI) Avoided address checks when revising legacy DMA circuit</A></H3>
<P><description>With legacy DMA, to avoid hardware bugs, a check was implemented to see whether an address that could have a bug had been set prior to transferring. If there was such a setting, the transfer was stopped by the <CODE>OS_Panic</CODE> function.<br> With TWL, you could to switch to fix this circuit, but now an address check is not implemented.<br><br> Also, added a description of this to the function reference for legacy DMA.</description></P>
<HR>
<H3><A name="note79-06">Note 79-06: (OS) Changed the ISBN screen for Chinese-market applications</A></H3>
<P><description>When the <CODE>OS_InitChina</CODE> function is called and the ISBN screen is displayed, the image displayed on the lower screen has been modified.</description></P>
<HR>
<H3><A name="note79-07">Note 79-07: (TOOL) Changed the <CODE>NandFiler</CODE> tool</A></H3>
<P><description>Changed the following in the <CODE>NandFiler</CODE> tool and revised the Function Reference.
        <ul>
<li>There was a feature to reproduce how save data and sub-banners may be improperly saved during a download from the Nintendo DSi Shop that is interrupted by turning off the power. However, application developers no longer need to support this.<br>For that reason, this feature has been removed.<br>The Function Reference was also revised to correspond with this change.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="KnownIssues_5_4_RC">Known issues in TWL-SDK version 5.4 RC</A></H3>
<knownissues><description>
        <ul>
<li>None.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_4_PR">TWL-SDK Version 5.4 PR</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/11/20)</P></DIV>
<HR>
<H3><A name="note78-01">Note 78-01: (CAMERA) Added a description to the Function Reference about the conditions required for pausing captures</A></H3>
<P><description>Added a description in the Reference that captured images may shift when the following functions are called during captures.
        <ul>
          <li>CAMERA_I2CActivate*</li>
          <li>CAMERA_I2CSize*</li>
          <li>CAMERA_I2CFrameRate*</li>
          <li>CAMERA_I2CEffect*</li>
          <li>CAMERA_I2CFlip*</li>
          <li>CAMERA_I2CPhotoMode*</li>
          <li>CAMERA_I2CExposure*</li>
          <li>CAMERA_I2CAutoExposure</li>
          <li>CAMERA_I2CAutoWhiteBalance</li>
          <li>CAMERA_I2CContextSwitch*</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note78-02">Note 78-02: (CHT) Deleted the <CODE>catch-2</CODE> sample demo</A></H3>
<P><description>The WC library already is unused. The <CODE>catch-2</CODE> demo that used the WC library has become unnecessary and therefore has been removed.</description></P>
<HR>
<H3><A name="note78-03">Note 78-03: (DSP) Fixed a bug in the shutter sound playback feature</A></H3>
<P><description>Fixed a bug that, on rare occasions, would occur while the <CODE>DSP_PlayShutterSound</CODE> function was playing the shutter sound. If another DSP component was used in parallel, one of the two processes was prevented from completing.</description></P>
<HR>
<H3><A name="note78-04">Note 78-04: (DSP) Changed the microphone sampling process</A></H3>
<P><description>Fixed a bug where, on rare occasions, waveform data contained random long-lasting distortion when getting microphone input from the DSP using the <CODE>DSP_StartSampling</CODE> function.</description></P>
<HR>
<H3><A name="note78-05">Note 78-05: (DevEnv) Revised the manual for NAND application development</A></H3>
<P><description>Made the following revisions to <CODE>$TwlSDK/docs/TechnicalNotes/NandAppManual.pdf</CODE>.
        <ul>
<li>Added a description that save data and sub-banners are created when importing TAD files.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note78-06">Note 78-06: (DevEnv) Revised the TWL-SDK Migration Guide</A></H3>
<P><description>There was a typo in the description for section 4.8, Changes to ARM7 Component ichneumon, in <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE>.</description></P>
<HR>
<H3><A name="note78-07">Note 78-07: (DevEnv) Changed <CODE>crt0</CODE></A></H3>
<P><description>In line with the change in <a href="changelog.html#note72-26">Note 72-26</a>, <CODE>crt0.FLX.TWL.o</CODE> has been separated into <CODE>crt0.HYB.TWL.o</CODE> and <CODE>crt0.LTD.TWL.o</CODE>.<br><br> This change was actually implemented in the 5.2 PR version, but it was left out of the <CODE>changelog</CODE> file.</description></P>
<HR>
<H3><A name="note78-08">Note 78-08: (DevEnv) Changed the behavior when running a demo under <CODE>demo.TWL</CODE> in NITRO mode</A></H3>
<P><description>Other than <CODE>cpuSpeed-1</CODE> in the <CODE>OS</CODE> directory, the demos under <CODE>demos.TWL</CODE> did not run properly in NITRO mode. For that reason, this was changed so that when running these HYBRID ROM demos in NITRO mode, they are stopped using Panic.</description></P>
<HR>
<H3><A name="note78-09">Note 78-09: (DevEnv) Changed <CODE>makelcf[.TWL]</CODE></A></H3>
<P><description>Changed <CODE>makelcf[.TWL]</CODE> to specify from the LSF file the linker command file keyword, <CODE>FORCE_OBJECT</CODE>, that was added in CodeWarrior for NINTENDO DSi v1.2 patch 1.<br> In line with that revision, also changed the template LCF file.</description></P>
<HR>
<H3><A name="note78-10">Note 78-10: (DevEnv) Changed the THUMB build method for <CODE>mongoose.TWL</CODE> and <CODE>ichneumon.TWL</CODE></A></H3>
<P><description>In HYBRID mode, to avoid a problem where applications built using THUMB do not run, <CODE>mongoose.TWL</CODE> and <CODE>ichneumon.TWL</CODE> builds were forcibly run by ARM even if <CODE>*_CODEGEN=THUMB</CODE> was specified. However, the problem has been resolved so this change has been retracted. This was changed so that now if THUMB is specified, the build uses THUMB.</description></P>
<HR>
<H3><A name="note78-11">Note 78-11: (DevEnv) Shortened the filename for the precompiled header</A></H3>
<P><description>If the precompiled header filename path exceeds 256 characters, depending on the environment, a build error occurs. Therefore, this was changed to shorten the filename.</description></P>
<HR>
<H3><A name="note78-12">Note 78-12: (DevEnv) Added Nintendo logo data as an antipiracy measure</A></H3>
<P><description>Added Nintendo logo data under <CODE>$TwlSDK/data/nintendo_logo</CODE> as an antipiracy measure.<br> See <B>Related Information</B> → <B>Description of Resource Data</B> → <B>Nintendo Logo to Protect Against Illegal Products</B> in the Function Reference for details.<br><br> In line with that, added the DisplayLogo demo under $TwlSDK/build/demos/tips.</description></P>
<HR>
<H3><A name="note78-13">Note 78-13: (DevEnv) Revised the description for applications with extended language support</A></H3>
<P><description>A description was left in <CODE>$TwlSDK/docs/TechnicalNotes/AboutExtendedLanguage.pdf</CODE> about startup restrictions for Chinese-market applications. This was revised.</description></P>
<HR>
<H3><A name="note78-14">Note 78-14: (FS) Fixed a bug in the <CODE>FS_CancelFile</CODE> function</A></H3>
<P><description>Fixed a bug that stopped all processing in the archive. This occured when a different FS command was issued before processing that called the <CODE>FS_CancelFile</CODE> function was complete.</description></P>
<HR>
<H3><A name="note78-15">Note 78-15: (FS) Fixed a bug specific to the directory ID in the <CODE>FS_ReadDir</CODE> function</A></H3>
<P><description>Simliar to <a href="changelog.html#note76-08">Note 76-08</a>, fixed a bug for directory IDs.</description></P>
<HR>
<H3><A name="note78-16">Note 78-16: (FX) Changed the <CODE>VEC_Normalize</CODE> function into a weak symbol</A></H3>
<P><description>Defined the <CODE>VEC_Normalize</CODE> and <CODE>VEC_Fx16Normalize</CODE> functions as weak symbols with <CODE>SDK_WEAK_SYMBOL</CODE> because for extremely small vectors, these functions give results with large calculation errors.<br> If a more precise user-defined formula is required, you can override these functions by implementing independent ones of the same name.</description></P>
<HR>
<H3><A name="note78-17">Note 78-17: (GX) Revised the <CODE>G3X_SetDisp1DotDepth</CODE> function reference</A></H3>
<P><description>Corrected a mistake in the description specific to <CODE>GX_POLYGON_ATTR_MISC_DISP_1DOT</CODE> in the <CODE>G3X_SetDisp1DotDepth</CODE> function reference. </description></P>
<HR>
<H3><A name="note78-18">Note 78-18: (OS) Fixed an ARM7 debug output bug on IS-TWL-DEBUGGER</A></H3>
<P><description>There was a defect in <a href="changelog.html#note75-09">Note 75-09</a>; the print server did not work using the <CODE>OS_InitPrintServer</CODE> function.<br>With this revision, you can use the ARM9 print server to output ARM7 strings by calling the <CODE>OS_InitPrintServer</CODE> function.</description></P>
<HR>
<H3><A name="note78-19">Note 78-19: (OS) Changed the <CODE>OS_InitChina</CODE> function</A></H3>
<P><description>Made changes to the function so that now, if <CODE>OS_CHINA_ISBN_NO_DISP</CODE> is set for the second argument (the parameter for ISBN number display) in the <CODE>OS_InitChina</CODE> function, the Health and Safety screen and the iQue logo are no longer displayed.</description></P>
<HR>
<H3><A name="note78-20">Note 78-20: (OS) Added exception handler address recovery processing in the <CODE>OS_ResetSystem</CODE> function</A></H3>
<P><description>There was a bug where the <CODE>OS_ResetSystem</CODE> function did not run properly when using user-defined exception handlers on the debugger. This occurred because the jump address to the exception handler changed by initializing the exception was not returned by the <CODE>OS_ResetSystem</CODE> function.<br> The has been fixed to run normally.</description></P>
<HR>
<H3><A name="note78-21">Note 78-21: (OS) Initialization of the new WRAM settings in the <CODE>OS_ResetSystem</CODE> function</A></H3>
<P><description>In TWL mode, it now initializes to start up the new WRAM settings when you call the <CODE>OS_ResetSystem</CODE> function.</description></P>
<HR>
<H3><A name="note78-22">Note 78-22: (OS) Deprecated the <CODE>OS_ShowAttentionChina</CODE> function</A></H3>
<P><description>Deprecated the <CODE>forChina-fs</CODE> sample demo and the page for the <CODE>OS_ShowAttentionChina</CODE> function from the Function Reference Manual because revised guidelines for Chinese-language applications have in general prohibited the replacement of processing that displays the startup screen.</description></P>
<HR>
<H3><A name="note78-23">Note 78-23: (OS) Added a description to the Function Reference Manual about handling argument data in TWL mode</A></H3>
<P><description>Argument data obtained with the <CODE>OS_GetArgc</CODE> and <CODE>OS_GetArgv</CODE> functions is invalid in FINALROM mode; these functions return 0 or NULL, respectively. However, in TWL-SDK 5.2, argument data is valid in FINALROM builds in TWL mode, and it is possible to get the same values in these builds as in DEBUG or RELEASE mode builds.<br> Added information to the function references for the <CODE>OS_GetArgc</CODE> and <CODE>OS_GetArgv</CODE> functions and <B>Debug (Arguments): Overview</B>.</description></P>
<HR>
<H3><A name="note78-24">Note 78-24: (OS) Revised the warning display for running TWL-exclusive ROM on NITRO</A></H3>
<P><description>Previously, when a TWL-exclusive ROM was run on NITRO, the <CODE>OS_Init</CODE> function would detect it and display a warning.<br> However, in C++, the <CODE>NitroStartUp</CODE> function sometimes calls the <CODE>OS_Init</CODE> function. When running TWL-exclusive ROM on NITRO, the <CODE>NitroStartUp</CODE> function was skipped, preventing the warning from being displayed.<br> Now, this detection is made in <CODE>_start</CODE> rather than in the <CODE>OS_Init</CODE> function so that the warning is displayed regardless of when the <CODE>OS_Init</CODE> function is called.</description></P>
<HR>
<H3><A name="note78-25">Note 78-25: (OS) Revised functions that get the operating environment</A></H3>
<P><description>Nintendo reviewed the <CODE>OS_GetConsoleType</CODE> and <CODE>OS_GetRunningConsoleType</CODE> functions that get the operating environment.<br><br> Specifically, we corrected a difference in the value that is actually available for the environment when running a NITRO-mode application on TWL and the one that is described in the Function Reference Manual.<br> Also added a note to the Reference about the operating environment when using IS-TWL-DEBUGGER and IS-NITRO-DEBUGGER without connecting to debugging software.</description></P>
<HR>
<H3><A name="note78-26">Note 78-26: (OS) Explained the string length limitation for functions that display strings</A></H3>
<P><description>Explained the string length that can be output for functions that display strings, such as the <CODE>OS_Printf</CODE> function. (The same explanation was added to the Function Reference for each affected function.)</description></P>
<HR>
<H3><A name="note78-27">Note 78-27: (PM) Fixed a bug in the termination process during MIC auto-sampling</A></H3>
<P><description>Fixed a bug where the system would not quit when the user pressed the Power Button to perform a hardware reset or to power-off. This occurred when the buffer was in a FULL state after running auto-sampling for the MIC.</description></P>
<HR>
<H3><A name="note78-28">Note 78-28: (PM) Fixed a bug when entering the termination process part way through PM functions</A></H3>
<P><description>When TRUE is passed to the <CODE>PM_SetAutoExit</CODE> function, and the system is powered-off by pressing the Power Button or similar operation before calling a PM function and the result returns, the termination notification from ARM9 to ARM7 locks. This bug has been fixed.</description></P>
<HR>
<H3><A name="note78-29">Note 78-29: (SND) Fixed a bug in the <CODE>SNDEX_SetVolume</CODE> function</A></H3>
<P><description>If the <CODE>SNDEX_SetVolume</CODE> function is called multiple times within 10 frames, there is the possibility that the camera or microprocessor can malfunction. This has been fixed.</description></P>
<HR>
<H3><A name="note78-30">Note 78-30: (SSP) Changed the SSP library</A></H3>
<P><description>In line with changes in <a href="changelog.html#note73-20">Note 73-20</a>, changed the SSP library that was separated into the <CODE>libssp_jpegDecoder.a</CODE> and <CODE>libssp_jpegEncoder.a</CODE> to consolidate them into one <CODE>.a</CODE> file, including the BMP conversion function.<br><br>This change was actually implemented in the 5.2 RC, but it was left out of the <CODE>changelog</CODE> file.</description></P>
<HR>
<H3><A name="note78-31">Note 78-31: (SSP) Added a Note to the Function Reference about decoding failures for some JPEG files</A></H3>
<P><description>Added information to the Function Reference Manual about JPEG files that the <CODE>SSP_StartJpegDecoder</CODE> and <CODE>SSP_StartJpegDecoderFast</CODE> functions may not be able to decode.</description></P>
<HR>
<H3><A name="note78-32">Note 78-32: (TCL) Added the <CODE>TCL_ChangePictureFavoriteType</CODE> function</A></H3>
<P><description>Added the <CODE>TCL_ChangePictureFavoriteType</CODE> function that changes the Favorites photo data saved in the photo region.</description></P>
<HR>
<H3><A name="note78-33">Note 78-33: (TCL) Fixed a bug in the <CODE>TCL_DeletePicture</CODE> function</A></H3>
<P><description>Fixed a bug where some management file information becomes abnormal when a photo assigned to Favorites is deleted by the <CODE>TCL_DeletePicture</CODE> function.</description></P>
<HR>
<H3><A name="note78-34">Note 78-34: (TOOL) Added a warning message to the <CODE>TwlNmenu</CODE> function</A></H3>
<P><description>A warning message is now displayed if save data is initialized when importing.</description></P>
<HR>
<H3><A name="note78-35">Note 78-35: (TOOL) Changed to automatically generate a list file that passes the <CODE>-I</CODE> option to <CODE>compstatic</CODE>.</A></H3>
<P><description>The list file to be passed to the <CODE>compstatic</CODE> <CODE>-I</CODE> option is now automatically generated based on the Compress option information that has been added to the LSF file.<br> In line with this, even if <CODE>-I</CODE> is specified by <CODE>compstatic</CODE>, the option is ignored if no overlay module exists.</description></P>
<HR>
<H3><A name="note78-36">Note 78-36: (TOOL) Changed <CODE>makerom</CODE></A></H3>
<P><description>Made the following changes to <CODE>makerom</CODE>.
        <ul>
<li>Added the <CODE>-m</CODE> option. This option allows you to replace ROM data stored in an existing SRL file.</li>
<li>Added <CODE>4G</CODE> to the specifiable values for the RSF file's RomSize property.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note78-37">Note 78-37: (TOOL) Changed <CODE>makerom.TWL</CODE></A></H3>
<P><description>Made the following changes to <CODE>makerom.TWL</CODE>.
        <ul>
<li>Added the <CODE>-m</CODE> option. This option allows you to replace ROM data stored in an existing SRL file.</li>
<li>Changed the behavior of HYBRID and LIMITED ROMs so that an attempt to place an ARM9 static module before the first 16-KB system-reserved region results in an error.</li>
<li>ADPCM sine waves sometimes became distorted when sound was played back while the ARM7 component was running a high-load process such as AES.<br>We changed the initial value of the ROM header generated by <CODE>makerom.TWL</CODE> to avoid this problem using sound circuit settings.</li>
<li><CODE>makerom.TWL</CODE> crashed when the RSF file that omits the Overlay Table from the ARM9 and ARM7 sections. This bug has been fixed.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note78-38">Note 78-38: (TOOL) Revised the <CODE>maketad</CODE> reference</A></H3>
<P><description>Added a description to the <CODE>maketad</CODE> Reference Manual about the cause of the error in <CODE>maketad</CODE>.</description></P>
<HR>
<H3><A name="note78-39">Note 78-39: (TOOL) Fixed a bug in <CODE>tad2rom</CODE></A></H3>
<P><description>Fixed a bug where <CODE>TwlNmenu</CODE> did not correctly recognize output files if a backslash was used instead of a slash as the delimiter text character for paths specified by <CODE>tad2rom</CODE>.</description></P>
<HR>
<H3><A name="note78-40">Note 78-40: (WM) Made changes to wireless termination processing in the WH library</A></H3>
<P><description>Added wireless termination to the following demos.
        <ul>
          <li>(WBT)wbt-1</li>
          <li>(WM)dataShare-1</li>
          <li>(WM)dataShare-Model</li>
          <li>(WM)mp_simple-1</li>
          <li>(WM)wep-1</li>
          <li>(WVR)simple</li>
          <li>(WVR)switchover</li>
          <li>(WVR)with_mb</li>
        </ul>
Revised wireless termination in the following demos.
        <ul>
          <li>(WM)wireless-all</li>
          <li>(MB)cloneboot</li>
        </ul>
Added a comment about wireless termination in the following demos.
        <ul>
          <li>(CHT)catch-1</li>
          <li>(MB)cloneboot</li>
          <li>(MB)multiboot-Model/child</li>
          <li>(WM)wmPadRead-child</li>
          <li>(WVR)with_mb/child</li>
          <li>(WXC)wxc-dataShare</li>
        </ul>
Added a comment about wireless termination in the WH library source code.<br><br>In line with wireless termination additions, changed the feature switching button for the (WVR) switchover demo.</description></P>
<HR>
<H3><A name="note78-41">Note 78-41: (WM) Added supplementary information about the TWL wireless indicator LED to the Description in the Wireless Communications Library</A></H3>
<P><description>Supplemental information about the wireless indicator LED added for TWL was left out of <CODE>$TwlSDK/docs/TechnicalNotes/AboutWirelessManager.pdf</CODE>. Supplemental information about the blinking specifications have been added to the documentation.</description></P>
<HR>
<H3><A name="note78-42">Note 78-42: (WM) Revised the Function Reference</A></H3>
<P><description>There were explanations that did not correctly describe internal behavior in the Function Reference for the WM library. They have been revised.</description></P>
<HR>
<H3><A name="KnownIssues_5_4_PR">Known Issues in NITRO-SDK Version 5.4 PR</A></H3>
<knownissues><description>
        <ul>
<li>None.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_3_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK Version 5.3 Official Release</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/07/31)</P></DIV>
<HR>
<H3><A name="note77-01">Note 77-01: (TOOL) Fixed a bug preventing referencing TAD files when in Card mode on the TwlNmenu</A></H3>
<P><description>With the bug fix in <a href="changelog.html#note73-28">Note 73-28</a>, TAD files could not be referenced in Card mode on the TwlNmenu. This bug has been fixed.</description></P>
<HR>
<H3><A name="note77-02">Note 77-02: (WXC) Added documents and tools supporting chance-encounter relay stations</A></H3>
<P><description>Added description of chance-encounter relay stations to <CODE>$TwlSDK/docs/TechnicalNotes/AboutWXC.pdf</CODE> and added <CODE>RelayStation.srl</CODE> as a chance-encounter communication relay station program.</description></P>
<HR>
<H3><A name="KnownIssues_5_3_%E6%AD%A3%E5%BC%8F%E7%89%88">Known Issues in SDK 5.3 Release Version</A></H3>
<knownissues><description>
        <ul>
<li>We have confirmed symptoms of waveform data containing random long-lasting distortion in some rare cases when getting microphone input from the DSP using the <CODE>DSP_StartSampling</CODE> function.<br> Because this symptom appears immediately after starting the DSP, you can confirm it by checking just the first several dozen pieces of sample data immediately after startup. If the sample data shows dramatic fluctuation of plus or minus 16,384 or more, restart the DSP component. This is a temporary workaround, but it will allow you to avoid the problem.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_3_RC">TWL-SDK Version 5.3 RC</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/07/21)</P></DIV>
<HR>
<H3><A name="note76-01">Note 76-01: (CARD) Revised sample demos</A></H3>
<P><description>The method for getting the card's ROM address on <CODE>card-mrom</CODE> and <CODE>card-1trom</CODE> sample demos was inappropriate for samples. The method was revised to correctly get that from the file menu.</description></P>
<HR>
<H3><A name="note76-02">Note 76-02: (DSP) Revised the <CODE>DSP_IsSoundPlaying</CODE> and <CODE>DSP_IsShutterSoundPlaying</CODE> functions</A></H3>
<P><description>There were some inaccuracies in the process to determine that playback had ended in the function above that checked whether sound playback from the DSP had been completed. They were corrected.</description></P>
<HR>
<H3><A name="note76-03">Note 76-03: (DSP) Fixed a bug in the microphone sampling buffer size</A></H3>
<P><description>If the sampling buffer size was set to over 64 KB by the <CODE>DSP_StartSampling</CODE> function, an endless loop was generated in processes in the subsequently called <CODE>DSP_SyncSamplingBuffer</CODE>. This problem has been corrected.</description></P>
<HR>
<H3><A name="note76-04">Note 76-04: (DevEnv) Added Korean language (Hangul) extended fonts to the TWL bitmap fonts</A></H3>
<P><description>Korean language (Hangul) bitmap fonts in TWL bitmap fonts were added to <CODE>$TwlSDK/data/font/tbf_kr_ex_*.NFTR</CODE>.<br> See <B>Reference Information</B> &rarr; <B>Description of Resource Data</B> &rarr; <B>TWL Bitmap Fonts</B> in the <I>Function Reference Manual</I> for details.</description></P>
<HR>
<H3><A name="note76-05">Note 76-05: (DevEnv) Revised the <I>TWL-SDK Migration Guide</I></A></H3>
<P><description>Made the following revisions to <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE>.
        <ul>
<li>Revised the increase in memory usage amount that is utilized by the library.<br>From TWL-SDK 5.3, the memory usage amount was reduced compared to before TWL-SDK 5.2 because CodeWarrior for Nintendo DSi is used.</li>
<li>Added shift from TWL-SDK 5.3 to CodeWarrior for Nintendo DSi.</li>
<li>Added the following because descriptions of changes before TWL-SDK 5.0 were missed.
          <ul>
<li>Revised the <CODE>STD_CompareLString</CODE> function.</li>
<li>Changed inline functions in the TWL-SDK to static inline functions.</li>
<li>Added <CODE>FS_RESULT_NO_ENTRY</CODE> to FS errors.</li>
<li>Limited the size of files that can be handled on FS to 2 GB.</li>
<li>Changed the specifications of the <CODE>FS_SeekFile</CODE> function.</li>
<li>Changed the <CODE>PAD_Read</CODE> function to support prohibited input on the +Control Pad.</li>
<li>Added process to prevent unintentional use of functions that set the date and time of RTC.</li>
<li>Fixed a bug about the <CODE>OS_TPrintfEx</CODE> function output format <CODE>%b</CODE>.</li>
          </ul>
</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note76-06">Note 76-06: (FS) Clarified that copying of the <CODE>FSFile</CODE> structure is prohibited</A></H3>
<P><description>The <CODE>FSFile</CODE> structure with files open is controlled by the system resources, so a description was added to the <I>Function Reference Manual</I> that it cannot be copied to a different <CODE>FSFile</CODE> structure as is.</description></P>
<HR>
<H3><A name="note76-07">Note 76-07: (FS) Fixed a bug in the <CODE>FS_CancelFile</CODE> function</A></H3>
<P><description>If commands that were requested to cancel by the <CODE>FS_CancelFile</CODE> function were waiting for completion with the <CODE>FS_WaitAsync</CODE> function before actually being cancelled, they could not be recovered from the function. This problem has been corrected.</description></P>
<HR>
<H3><A name="note76-08">Note 76-08: (FS) Fixed a bug related to the <CODE>FS_ReadDir</CODE> function file ID</A></H3>
<P><description>Unknown data is included in part of the file ID information obtained by the <CODE>FS_ReadDir</CODE> function, and cannot be used by the <CODE>FS_OpenFileFast</CODE> function. This problem has been corrected.<br> This problem appears only in TWL-SDK 5.0 and later.</description></P>
<HR>
<H3><A name="note76-09">Note 76-09: (FS) Fixed a bug that occurred during system shutdown</A></H3>
<P><description>With regard to the shutdown processes applied while accessing NAND, the bug in <a href="changelog.html#note72-12">Note 72-12</a> that was fixed still reoccurred in some rare occasions. This bug has been corrected.</description></P>
<HR>
<H3><A name="note76-10">Note 76-10: (GX) Corrected function references of BG plane affine conversion functions</A></H3>
<P><description>Corrected the description of affine conversion in the <I>Function Reference Manual</I> for the following functions, and added examples.
        <ul>
          <li>G2_SetBG2Affine.html</li>
          <li>G2_SetBG3Affine.html</li>
          <li>G2S_SetBG2Affine.html</li>
          <li>G2S_SetBG3Affine.html</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note76-11">Note 76-11: (MIC) Corrected a bug caused by frequently and repeatedly starting and stopping auto-sampling</A></H3>
<P><description>If auto-sampling was repeatedly started and stopped, microphone state transitions may not have gone smoothly, depending on the timing. This was corrected.</description></P>
<HR>
<H3><A name="note76-12">Note: 76-12: (NA) Revised asynchronous processing of NAND application ROM archives</A></H3>
<P><description>If ROM archive files were specified by the <CODE>FS_ReadFileAsync</CODE> function to be read asynchronously in a NAND application environment, they were always actually processed synchronously. This problem has been corrected.</description></P>
<HR>
<H3><A name="note76-13">Note 76-13: (OS) Corrected the interrupt permission setting in effect after a DMA transfer interrupt</A></H3>
<P><description>Conventionally, after a DMA transfer interrupt handler was called, the settings were returned to allow interrupts at the point that transfer setting was made, but if the setting was made in the handler to make it possible to make a new transfer setting in the handler, that was revised to have priority.</description></P>
<HR>
<H3><A name="note76-14">Note 76-14: (OS) Added Chinese language and Korean language (Hangul) images for TWL-exclusive ROM warning screens</A></H3>
<P><description>Changed to display a warning screen when running Chinese language or Korean language (Hangul) version TWL-exclusive ROMs in NITRO mode.</description></P>
<HR>
<H3><A name="note76-15">Note 76-15: (PM) Revised <CODE>PM_SetLCDPower</CODE> function reference</A></H3>
<P><description>There was a mistake in the reference for the <CODE>PM_SetLCDPower</CODE> function. This was corrected.</description></P>
<HR>
<H3><A name="note76-16">Note 76-16: (SND) Changed behavior for repeatedly calling the <CODE>SNDEX_SetIgnoreHWVolume</CODE> function</A></H3>
<P><description>If the <CODE>SNDEX_SetIgnoreHWVolume</CODE> function was called repeatedly, the volume value reset when executing the <CODE>SNDEX_ResetIgnoreHWVolume</CODE> function was overwritten, but this was corrected so that it is not changed after the <CODE>SNDEX_SetIgnoreHWVolume</CODE> function is called.</description></P>
<HR>
<H3><A name="note76-17">Note 76-17: (SSP) Revised function reference</A></H3>
<P><description>There were explanations that did not correctly describe internal operations in the function reference for the SSP library. They were corrected.</description></P>
<HR>
<H3><A name="note76-18">Note 76-18: (TWL Wireless) Added TWL wireless shutdown process in automatic shutdown when there is a drop in voltage</A></H3>
<P><description>TWL wireless communications were changed to quit with the post-processing callback when quitting if TWL wireless communications were being conducted when an auto-shutdown occurred because of a low battery.</description></P>
<HR>
<H3><A name="KnownIssues_5_3_RC">Known issues in TWL-SDK version 5.3 RC</A></H3>
<knownissues><description>
        <ul>
<li>We have confirmed symptoms of waveform data continuing to be randomly distorted in some rare cases when getting microphone input from the DSP using the <CODE>DSP_StartSampling</CODE> function.<br>Because this symptom appears immediately after starting the DSP, when it does occurs, you can temporarily avoid the problem by restarting the DSP component if you check only the first several dozen pieces of initial sample data immediately after starting it up, and it has dramatically amplified to around 16384.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_3_PR">TWL-SDK Version 5.3 PR</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/07/01)</P></DIV>
<HR>
<H3><A name="note75-01">Note 75-01: (CAMERA) Fixed a bug where it was not possible to immediately stop AE with the <CODE>CAMERA_I2CAutoExposure</CODE> function</A></H3>
<P><description>If it was not possible to stop auto-exposure with the <CODE>CAMERA_I2CAutoExposure</CODE> function (including that process itself), the settings of the <CODE>CAMERA_I2CAutoExposure</CODE> and <CODE>CAMERA_I2CAutoWhiteBalance</CODE> functions were not immediately applied. This problem has been corrected.</description></P>
<HR>
<H3><A name="note75-02">Note 75-02: (DevEnv) Removed processing to suppress startup of Chinese applications on the ARM7 component</A></H3>
<P><description>Deleted a process related to startup suppression when starting a Chinese application on systems other than those going to China.</description></P>
<HR>
<H3><A name="note75-03">Note 75-03: (DevEnv) Changed the version of CodeWarrior used for the TWL-SDK package build</A></H3>
<P><description>Changed the CodeWarrior version used in building the TWL-SDK package to CodeWarrior for DSi v1.1 patch1. </description></P>
<HR>
<H3><A name="note75-04">Note 75-04: (DevEnv) Added Chinese and Korean language fonts to the TWL bitmap fonts</A></H3>
<P><description>Chinese and Korean language (Hangul) bitmap fonts in TWL bitmap fonts were added to $TwlSDK/data/font.<br> See [Reference Information] - [Description of Resource Data] - [TWL Bitmap Fonts] in the Reference Manual for details.</description></P>
<HR>
<H3><A name="note75-05">Note 75-05: (GX) Revised the <CODE>GX_FX32_FX10</CODE> constant macro</A></H3>
<P><description>The constant macros of GX_FX32_FX10_MAX and GX_FX32_FX10_MIN included unnecessary semicolons on their definitions. The semicolons were removed.</description></P>
<HR>
<H3><A name="note75-06">Note 75-06: (GX) Revised the <CODE>GX_GetDefaultNDMA</CODE> function</A></H3>
<P><description>There was a bug where GX_DMA_NOT_USE was not returned when the <CODE>GX_GetDefaultNDMA</CODE> function was called when GX_DMA_NOT_USE was set. This bug was fixed. </description></P>
<HR>
<H3><A name="note75-07">Note 75-07: (GX) Added the <CODE>GX_InitNDMAEx</CODE> function</A></H3>
<P><description>Added the <CODE>GX_InitNDMAEx</CODE> function to enable the NDMA number to be specified in the <CODE>GX_InitEx</CODE> function.</description></P>
<HR>
<H3><A name="note75-08">Note 75-08: (GX) Revised the <CODE>GX_SetDefaultNDMA</CODE> function</A></H3>
<P><description>There was a bug that GX_DMA_NOT_USE could not be set correctly with the <CODE>GX_SetDefaultNDMA</CODE> function. This bug was fixed. </description></P>
<HR>
<H3><A name="note75-09">Note 75-09: (OS) ARM7 debug output on IS-TWL-DEBUGGER</A></H3>
<P><description>Changed to temporarily store debug output from the ARM7 processor in a buffer so the IS-TWL-DEBUGGER can use the PrintServer feature run by ARM9 for the actual output. <br> (Conventionally, this could only be used by the IS-NITRO-DEBUGGER.)<br>See the <CODE>OS_InitPrintServer</CODE> function reference for details.</description></P>
<HR>
<H3><A name="note75-10">Note 75-10: (OS) Added support for a software reset in TWL mode</A></H3>
<P><description>Changed internal processes to enable use of a software reset by the <CODE>OS_ResetSystem</CODE> function for card applications running in TWL mode.</description></P>
<HR>
<H3><A name="note75-11">Note 75-11: (OS) Revised forKorea-1 demo</A></H3>
<P><description>Conventionally, the forKorea-1 demo of the OS was set to be built only for NITRO mode, but this was revised to be built also for TWL mode.</description></P>
<HR>
<H3><A name="note75-12">Note 75-12: (OS) Removed the startup restriction on applications for China</A></H3>
<P><description>Chinese applications could not be started unless the language setting was Chinese, but this restriction has been eliminated. </description></P>
<HR>
<H3><A name="note75-13">Note 75-13: (PM) Fixed a bug where the system would sleep when using the tick system</A></H3>
<P><description>If the tick system of the OS was being used, a TIMER0 interrupt being used by the tick system was generated when entering sleep. That caused a discrepancy in the timing to pause the ARM9 and the ARM7. This problem occurred when recovering.<br> This problem has been fixed.</description></P>
<HR>
<H3><A name="note75-14">Note 75-14: (SND) Fixed a sound alarm bug</A></H3>
<P><description>There was a bug that sometimes delayed alarm notification with the sound alarm a maximum of 125 ms longer than the set alarm while auto-sampling with the microphone, when executing an application that used components built in TWL mode on NITRO or in CODEC-DS mode on TWL. <br> This bug has been corrected.</description></P>
<HR>
<H3><A name="note75-15">Note 75-15: (SSP) Fixed a bug in the <CODE>SSP_StartJpegDecoderFast</CODE> function</A></H3>
<P><description>Added the <CODE>SSP_StartJpegDecoderFast</CODE> function, which decodes JPEGs faster than the <CODE>SSP_StartJpegDecoder</CODE> function.</description></P>
<HR>
<H3><A name="note75-16">Note 75-16: (SSP) Added a high-speed version JPEG encoder function</A></H3>
<P><description>Added the <CODE>SSP_StartJpegEncoderFast</CODE> function, which encodes JPEGs faster than the <CODE>SSP_StartJpegEncoder</CODE> and <CODE>SSP_StartJpegEncoderLite</CODE> functions.<br><br> Also added the <CODE>SSP_GetJpegEncoderFastBufferSize</CODE> function, which finds the size of the buffer for work used by the <CODE>SSP_StartJpegEncoderFast</CODE> function.</description></P>
<HR>
<H3><A name="note75-17">Note 75-17: (TCL) Revised the PhotoChecker tool</A></H3>
<P><description>Frame images created by the DSi camera were incorrectly recognized as illegal data in the PhotoChecker tool. This has been corrected.</description></P>
<HR>
<H3><A name="note75-18">Note 75-18: (TCL) Changed the <CODE>TCL_EncodeAndWritePicture[Ex]</CODE> function</A></H3>
<P><description>Changed the encoding function that is used internally by the <CODE>TCL_EncodeAndWritePicture[Ex]</CODE> function from the <CODE>SSP_StartJpegEncoderLite</CODE> function to the <CODE>SSP_StartJpegEncoderFast</CODE> function.</description></P>
<HR>
<H3><A name="note75-19">Note 75-19: (TOOL) Changed method of embedding TWL ROM argument data</A></H3>
<P><description>Changed the method for embedding argument data in the TWL ROM to the same as for the NITRO ROM.<br> This change solves the problem of not being able to access argument data when running a HYBRID ROM in NITRO mode.</description></P>
<HR>
<H3><A name="note75-20">Note 75-20: (TOOL) Fixed a bug in the TwlNmenu progress bar display</A></H3>
<P><description>There was a problem that the progress bar would be reset partway when a tad with an SRL that exceeded 21 MBytes was imported. <br> Note that this bug is unrelated to actually importing, so importing using previous TwlNmenu versions can be performed without problems.</description></P>
<HR>
<H3><A name="note75-21">Note 75-21: (TOOL) Fixed a compstatic bug and changed the specifications</A></H3>
<P><description>There was a bug where the system would be forced to end by loading a compression exclusion list file that did not include a line feed code.<br> Changed the specifications of the overlay module name described in the compression exclusion list not to distinguish between upper and lower case characters. <br> Changed the specifications so that an error is generated when there is an overlay module name that does not exist in the compression exclusion list. </description></P>
<HR>
<H3><A name="note75-22">Note 75-22: (TOOL) Revised the check for displayable characters in Chinese and Korean language titles in makebanner and makebanner.TWL</A></H3>
<P><description>Corrected character checks for <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE> along with the changes below for the characters that can be set for Chinese and Korean language banners. <br><br>Prohibited only in Korean language<br>Character code: 0x3005: [&#12293;]<br><br>Prohibited in both Chinese and Korean languages<br>Character code: 0x309B: [&#12443;]<br>Character code: 0x309C: [&#12444;]<br>Character code: 0x309D: [&#12445;]<br>Character code: 0x309E: [&#12446;]<br></description></P>
<HR>
<H3><A name="note75-23">Note 75-23: (TOOL) Corrected error in the behavior of makerom's -M option</A></H3>
<P><description>The bug fixed in relation to <a href="changelog-nitro.html#note47-04">Note 47-04</a> for NITRO-SDK 4.1 RC was occurring again. This bug has been fixed.</description></P>
<HR>
<H3><A name="note75-24">Note 75-24: (TOOL) Changed <CODE>makerom.TWL</CODE></A></H3>
<P><description>Made the following changes to <CODE>makerom.TWL</CODE>.
        <ul>
<li>Added a determination process that checks whether the CardRegion property and ForChina/ForKorea property have both been set when creating Chinese and Korean language version ROM.<br>To set the CardRegion property to China/Korea, set the ForChina/ForKorea property to TRUE.</li>
<li>Added processing that sets the rating information for all rating organizations to FREE (all ages) when the CardRegion property is set to China. </li>
<li><description>The bug fixed in relation to <a href="changelog-nitro.html#note47-04">Note 47-04</a> for NITRO-SDK 4.1 RC was occurring again. This bug has been fixed.</description></li>
        </ul>
      </description></P>
<HR>
<H3><A name="note75-25">Note 75-25: (TP) Fixed the bug where stylus-up was not recognized correctly</A></H3>
<P><description>When the touch panel was used in CODEC-TWL mode, sometimes stylus-up was not recognized correctly due to individual console-specific variances. As a result, invalid coordinate data would be acquired when the stylus-up occurred.<br> The CODEC parameters were adjusted to fix this problem.</description></P>
<HR>
<H3><A name="note75-26">Note 75-26: (WM) Corrected when a negative value RSSI arrived in wireless TWL communication</A></H3>
<P><description>In TWL wireless communications, if a negative value RSSI was received, it was evaluated as a positive value and the strength of the link appeared strong. This bug has been fixed. </description></P>
<HR>
<H3><A name="note75-27">Note 75-27: (WVR) Added support for the HYBRID ROM of the WVR library</A></H3>
<P><description>Revised to allow use of the WVR library even with HYBRID ROM.<br> Added the ichneumon.TWL component for HYBRID ROM along with this change.</description></P>
<HR>
<H3><A name="KnownIssues_5_3_PR">Known Issues in SDK Version 5.3 PR</A></H3>
<P> None.</P>
<HR>
<H2 style="line-height: 0"><A name="sdk_5_2_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK Version 5.2 Official Release</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/06/10)</P></DIV>
<HR>
<H3><A name="note74-01">Note 74-01: (DevEnv) Corrected Changelog Note 73-01</A></H3>
<P><description>Fixed the explanation in the changelog for <a href="changelog.html#note73-01">Note 73-01</a> because it was insufficient.</description></P>
<HR>
<H3><A name="note74-02">Note 74-02: (DevEnv) Updated copyright notices</A></H3>
<P><description>Updated copyright notices throughout the source code for the sample demos and library.</description></P>
<HR>
<H3><A name="note74-03">Note 74-03: (DevEnv) Revised the manual for NAND application development</A></H3>
<P><description>Made the following revisions to <CODE>$TwlSDK/docs/TechnicalNotes/NandAppManual.pdf</CODE>.
        <ul>
<li>Noted that an application's size increases by 16 KB when it uses a sub-banner.</li>
<li>Added information on the TCL (photo database) library.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note74-04">Note 74-04: (DevEnv) Changed the A-Z index list of function references</A></H3>
<P><description>When multiple functions are described on a single page in the Function Reference Manual, they used to be grouped using *, [], and other wildcard characters on the A-Z index listing. Now, most function names are listed without wildcards.</description></P>
<HR>
<H3><A name="note74-05">Note 74-05: (FS) Added information on the TWL-exclusive region</A></H3>
<P><description>Added an explanation to the FS library overview about the TWL-exclusive region prepared for Nintendo DSi enhanced Cards, and file placement in this region.</description></P>
<HR>
<H3><A name="note74-06">Note 74-06: (TCL) Fixed the <CODE>TCL_EncodeAndWritePicture</CODE> function</A></H3>
<P><description>Fixed a bug in the <CODE>TCL_EncodeAndWritePicture</CODE> function that caused it to generate invalid JPEG files during retries after encoding failed.</description></P>
<HR>
<H3><A name="note74-07">Note 74-07: (TOOL) Changed <CODE>TwlNmenu</CODE></A></H3>
<P><description>Made the following changes to the <CODE>TwlNmenu</CODE> tool.
        <ul>
<li>Added a feature to display the sub-banner size in NAND mode.</li>
<li>Added a formula to the <CODE>TwlNmenu</CODE> function reference, showing how to calculate the size of a NAND application.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note74-08">Note 74-08: (TOOL) Fixed the check for displayable characters in <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE></A></H3>
<P><description>The <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE> tools had a feature to check whether the configured game title has characters that can be displayed on Nintendo DS and Nintendo DSi systems, but this check for allowable characters did not follow the <I>DS IPL Banner Guidelines</I>. Now it does.</description></P>
<HR>
<H3><A name="note74-09">Note 74-09: (WXC) Fixed a library dead-strip problem</A></H3>
<P><description>Fixed a problem that caused some internal modules to always be linked even when the WXC library was not used at all.</description></P>
<HR>
<H3><A name="KnownIssues_5_2_%E6%AD%A3%E5%BC%8F%E7%89%88">Known issues in TWL-SDK version 5.2 official release</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in HYBRID mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_2_RC">TWL-SDK Version 5.2 RC</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/05/29)</P></DIV>
<HR>
<H3><A name="note73-01">Note 73-01: (CAMERA) Fixed the <CODE>CAMERA_SwitchOffLED</CODE> and <CODE>CAMERA_SetLED</CODE> functions</A></H3>
<P><description>Fixed a bug that prevented the camera indicator LED from blinking when its blink settings were called too rapidly in succession.<br><br> Because this correction also changes the behavior of the CAMERA_SwitchOffLED and CAMERA_SetLED functions, an explanation has been added to the reference for each.</description></P>
<HR>
<H3><A name="note73-02">Note 73-02: (CARD) Fixed a bug in detecting a card removal during ROM access</A></H3>
<P><description>Fixed a bug that occurred if a card was removed while a card application running in TWL mode read data from ROM, causing the program to be forcibly stopped by an abnormal ROM hash before being notified by the card removal callback.</description></P>
<HR>
<H3><A name="note73-03">Note 73-03: (DSP) Fixed a bug in the microphone sampling feature</A></H3>
<P><description>Fixed a bug that caused data to be written past the end of the sampling buffer specified with the <CODE>DSP_StartSampling</CODE> function if it was not an integer multiple of 4096 samples (8192 bytes).</description></P>
<HR>
<H3><A name="note73-04">Note 73-04: (DevEnv) Corrected Changelog Note 72-07</A></H3>
<P><description>Fixed the third changelog item for <a href="changelog.html#note72-07">Note 72-07</a>.</description></P>
<HR>
<H3><A name="note73-05">Note 73-05: (DevEnv) Revised the <I>TWL-SDK Migration Guide</I></A></H3>
<P><description>Made the following revisions to <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE>.
        <ul>
<li>Changed it to use TWL-SDK 5.2 for comparison.</li>
<li>Added a description of the <CODE>OS_CreateExtraHeap</CODE> and <CODE>OS_AddExtraAreaToHeap</CODE> functions as a way to use the starting memory region with a HYBRID ROM in NITRO mode.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note73-06">Note 73-06: (DevEnv) Removed <CODE>SDK_NITRO</CODE> from public header files</A></H3>
<P><description>When using TWL-SDK in the IDE for CodeWarrior for DS, a proper NITRO build was not possible because <CODE>SDK_NITRO</CODE> was not defined.<br> To resolve this, references to <CODE>SDK_NITRO</CODE> were changed to <CODE>SDK_TWL</CODE>.<br><br> This change does not affect program behavior itself.</description></P>
<HR>
<H3><A name="note73-07">Note 73-07: (DevEnv) Revised an explanation for applications with extended language support</A></H3>
<P><description>Revised an explanation in <CODE>$TwlSDK/docs/TechnicalNotes/AboutExtendedLanguage.pdf</CODE> concerning the specification of game titles with banners for China.<br> Previously, Chinese could be used to specify titles in all languages in the banner specification file. Non-Chinese languages must now be specified in English.<br> You must also specify version 3 for banner specification files when creating TWL applications for China.</description></P>
<HR>
<H3><A name="note73-08">Note 73-08: (FS) Reduced the processing load on components while accessing NAND memory and SD Cards</A></H3>
<P><description>Improved memory placement to allow as much of a reduction in the processing load as possible when reading from or writing to NAND memory or an SD Card. The load would sometimes cause delays in sound and processing for devices on other components.</description></P>
<HR>
<H3><A name="note73-09">Note 73-09: (FS) Fixed an issue that prevented NITRO ROM overlays from being debugged in IS-TWL-DEBUGGER</A></H3>
<P><description>Fixed a bug that prevented the break feature from being used in overlays when a NITRO ROM that included overlays built with the TWL-SDK was run on IS-TWL-DEBUGGER.<br><br> This change was added in the 5.2 PR version but was left out of the changelog.</description></P>
<HR>
<H3><A name="note73-10">Note 73-10: (FS) Added a description related to determining the state of the SD Card slot</A></H3>
<P><description>Added a description to the FS Library Overview concerning the steps for determining the state of the SD Card slot; this includes checking write protection and monitoring SD Card insertion and removal events.</description></P>
<HR>
<H3><A name="note73-11">Note 73-11: (FS) Revised error values related to save data</A></H3>
<P><description>Revised the <CODE>FS_GetArchiveResource</CODE> function to return <CODE>FS_RESULT_BAD_FORMAT</CODE> instead of <CODE>FS_RESULT_ERROR</CODE> when it was called for save data with corrupted FAT management information.<br><br> Also revised the function to return <CODE>FS_RESULT_NO_ENTRY</CODE> for partial save data that would occur on rare occasions with NAND applications that failed while importing data.</description></P>
<HR>
<H3><A name="note73-12">Note 73-12: (FS) Fixed a bug related to conflicting use of multiple archives</A></H3>
<P><description>Fixed a bug that would sometimes cause abnormal program termination when a command was simultaneously issued to a ROM archive and a user-provided archive using the <CODE>FS_LoadArchive</CODE> function.</description></P>
<HR>
<H3><A name="note73-13">Note 73-13: (GX) Revised the DEMO library</A></H3>
<P><description>Revised <CODE>$TwlSDK/build/demos/gx/UnitTours/DEMOLib</CODE> to support the new syntax for the <CODE>ISTDFIOWrite</CODE> (debugger) function, which changed since version 1.06 of IS-TWL-DEBUGGER.</description></P>
<HR>
<H3><A name="note73-14">Note 73-14: (MIC) Explained auto-sampling function behavior and CODEC mode</A></H3>
<P><description>Revised explanations in the Function Reference Manual related to the run-time environment for <CODE>MIC_StartAutoSampling</CODE> and other auto-sampling functions.<br><br> These functions only had the NTR icon but can also be used in a TWL ROM (HYBRID or LIMITED), so the TWL icon was added.<br> Also noted that for a TWL ROM, these will only run when the CODEC is in CODEC-DS mode.</description></P>
<HR>
<H3><A name="note73-15">Note 73-15: (OS) Changed specifications for the screen displayed by the <CODE>OS_InitChina</CODE> function</A></H3>
<P><description>Changed the images and display time for the screen shown when an application for the Chinese market starts up.<br> Accordingly, arguments were added to the <CODE>OS_InitChina</CODE> function.</description></P>
<HR>
<H3><A name="note73-16">Note 73-16: (OS) Added the <CODE>OS_IsBootFromSystemMenu</CODE> function</A></H3>
<P><description>Added the <CODE>OS_IsBootFromSystemMenu</CODE> function to check whether the System Menu was used to start the application that is currently running.</description></P>
<HR>
<H3><A name="note73-17">Note 73-17: (OS) Added a function to set the blocking mode for debug output</A></H3>
<P><description>Added the <CODE>OS_SetPrintBlockingMode</CODE> function, which sets the blocking mode for IS-TWL-DEBUGGER and IS-NITRO-DEBUGGER debug output.<br> Also added the <CODE>OS_GetPrintBlockingMode</CODE> function to get the current settings.</description></P>
<HR>
<H3><A name="note73-18">Note 73-18: (PM) Changed how the <CODE>PM_SetLCDPower</CODE> function waits for a V-Blank</A></H3>
<P><description>Changed the <CODE>PM_SetLCDPower</CODE> function to wait for a change in the V-Blank count rather than a V-Blank interrupt.<br> The reason for this is that interrupts sometimes cannot be detected when multiple threads use interrupts to wait for a V-Blank interrupt.</description></P>
<HR>
<H3><A name="note73-19">Note 73-19: (SND) Added a note about setting the IIR filter</A></H3>
<P><description>Added a note to the Function Reference Manual about the effects of setting an IIR filter that results in unstable output.</description></P>
<HR>
<H3><A name="note73-20">Note 73-20: (SSP) Added functions that create BMP files</A></H3>
<P><description>Added the <CODE>SSP_CreateBmpFile</CODE> function to create a Windows BMP file from RGB555 or YUV422 image data, and the <CODE>SSP_GetBmpFileSize</CODE> function to get the size in advance.</description></P>
<HR>
<H3><A name="note73-21">Note 73-21: (SSP) Revised the work buffer size for JPEG encoding functions</A></H3>
<P><description>Moved some regions allocated by a function to a work buffer in order to reduce stack consumption during JPEG encoding.<br> This revision caused the work buffer size to increase, so the return value from the <CODE>SSP_GetJpegEncoderBufferSize</CODE> function has been increased, as well.</description></P>
<HR>
<H3><A name="note73-22">Note 73-22: (SSP) Fixed the JPEG decoding process</A></H3>
<P><description>Fixed a vulnerability that was evident in the JPEG decoding process.</description></P>
<HR>
<H3><A name="note73-23">Note 73-23: (SSP) Added a reduced-memory version of the JPEG-encoding function</A></H3>
<P><description>Added two functions: <CODE>SSP_StartJpegEncoderLite</CODE>, which has a much smaller work buffer than the previous JPEG-encoding function (<CODE>SSP_StartJpegEncoder</CODE>); and <CODE>SSP_GetJpegEncoderLiteBufferSize</CODE>, which gets the work buffer size.<br> Note that the encoding results may not necessarily be the same as the results from the previous encoding function.<br><br> This function does not require image data to be converted in advance, so there are no reduced-memory versions of the <CODE>SSP_ConvertJpegEncodeData</CODE> and <CODE>SSP_StartJpegEncoderWithEncodeData</CODE> functions.</description></P>
<HR>
<H3><A name="note73-24">Note 73-24: (TCL) Reduced the memory used by JPEG encoding functions</A></H3>
<P><description>Changed the <CODE>TCL_EncodeAndWritePicture(Ex)</CODE> functions to internally call <CODE>SSP_StartJpegEncoderLite</CODE>, the reduced-memory version of the encoding function.<br> Accordingly, decreased the return value from the <CODE>TCL_GetJpegEncoderBufferSize</CODE> function.</description></P>
<HR>
<H3><A name="note73-25">Note 73-25: (TCL) Fixed PhotoChecker</A></H3>
<P><description>Fixed an incomplete part of the process for detecting illegal files with the PhotoChecker tool.</description></P>
<HR>
<H3><A name="note73-26">Note 73-26: (TCL) Fixed the <CODE>TCL_EncodeAndWritePicture</CODE> function</A></H3>
<P><description>Fixed the <CODE>TCL_EncodeAndWritePicture</CODE> function to properly reduce the quality and retry when encoding fails.<br><br> Also fixed the error processing during calls to this function without <CODE>PhotoAccessReadWrite</CODE> specified.</description></P>
<HR>
<H3><A name="note73-27">Note 73-27: (TOOL) Changed <CODE>NandFiler</CODE></A></H3>
<P><description>Made the following changes to the <CODE>NandFiler</CODE> tool.
        <ul>
<li>Added a feature to reproduce how save data and sub-banners may be improperly saved during a download from the Nintendo DSi Shop that is interrupted by turning off the power. However, we are still studying how an application should handle errors when save data or sub-banners are deleted.</li>
<li>Added a format feature that allows you to recover data once it has been deleted</li>
<li>Fixed a bug in <CODE>NandFiler</CODE> that caused it to hang when displaying a list of files from an SD Card if there was a directory written using a character code that could not be converted into Shift-JIS.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note73-28">Note 73-28: (TOOL) Fixed a bug in TwlNmenu that occurred when importing from an SD Card</A></H3>
<P><description>A bug in TwlNmenu caused it to hang when displaying a list of files from an SD Card if there was a directory written using a character code that could not be converted into Shift-JIS.<br> This problem has been fixed.</description></P>
<HR>
<H3><A name="note73-29">Note 73-29: (TOOL) Added support for Chinese and Korean to <CODE>addbanner</CODE></A></H3>
<P><description>Revised the <CODE>addbanner</CODE> tool so that it can also display game titles in Chinese and Korean languages.</description></P>
<HR>
<H3><A name="note73-30">Note 73-30: (TOOL) Added the <CODE>-l</CODE> option to <CODE>compstatic</CODE></A></H3>
<P><description>Added an option to the <CODE>compstatic</CODE> and <CODE>compstatic.TWL</CODE> tools allowing you to specify a compression exclusion list for overlay modules.</description></P>
<HR>
<H3><A name="note73-31">Note 73-31: (TOOL) Added support for Chinese and Korean to <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE></A></H3>
<P><description>Revised <CODE>makebanner</CODE> and <CODE>makebanner.TWL</CODE> to check character width and the existence of character codes in game titles in Chinese and Korean languages.<br><br> Additionally, with <CODE>makebanner.TWL</CODE>, it was previously required to set <CODE>CN</CODE> (for Chinese) and <CODE>HN</CODE> (for Korean) in the BSF file for a TWL title. However, taking the portability from NITRO into account, it has been revised to automatically set these fields blank when they are left unspecified.</description></P>
<HR>
<H3><A name="note73-32">Note 73-32: (WBT) Fixed the return value from the <CODE>WBT_RegisterBlock</CODE> function</A></H3>
<P><description>The corresponding function in TWL-SDK 5.1 PR and earlier always returned TRUE; this behavior differed from the description in the Function Reference Manual.<br> This function was revised to check and return FALSE, as described in the Function Reference Manual.<br> The function was also revised to output a warning to the debugger when returning FALSE.</description></P>
<HR>
<H3><A name="note73-33">Note 73-33: (WBT) Fixed a bug in the <CODE>wbt-1</CODE> sample demo</A></H3>
<P><description>Fixed improper data transmissions from the parent device to the child device when reconnecting.</description></P>
<HR>
<H3><A name="note73-34">Note 73-34: (WFS) Increased the stack size for internal threads</A></H3>
<P><description>Increased the stack size prepared by the WFS library for internal threads from 1 KB to 4 KB.</description></P>
<HR>
<H3><A name="note73-35">Note 73-35: (WM) Revised the <CODE>dataShare-Model</CODE> and <CODE>wep-1</CODE> sample demos</A></H3>
<P><description>Revised both samples so that they can return to the first parent/child selection screen after selecting a parent.</description></P>
<HR>
<H3><A name="note73-36">Note 73-36: (WM) Revised sample demos</A></H3>
<P><description>Changed the type of the <CODE>tgid</CODE> argument from <CODE>u16</CODE> to <CODE>u32</CODE> so <CODE>tgid</CODE> can be set to <CODE>MB_TGID_AUTO</CODE> in the <CODE>MBP_Init</CODE> function prepared with the <CODE>$TwlSDK/build/demos/wireless_shared/mbp</CODE> samples.</description></P>
<HR>
<H3><A name="note73-37">Note 73-37: (WM) Fixed a bug that prevented a callback from being invoked when the <CODE>WM_Reset</CODE> function was run at particular times</A></H3>
<P><description>Fixed a bug that prevented the registered callback from being invoked when the <CODE>WM_Reset</CODE> function was run at particular times during communication in a noisy environment.</description></P>
<HR>
<H3><A name="note73-38">Note 73-38: (WXC) Added the Chance-Encounter Communications library</A></H3>
<P><description>Added the WXC library for chance-encounter communications.</description></P>
<HR>
<H3><A name="KnownIssues_5_2_RC">Known issues in TWL-SDK version 5.2 RC</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in HYBRID mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
<li>FINALROM application jumps do not work properly on TS boards.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_2_PR">TWL-SDK Version 5.2 PR</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/04/16)</P></DIV>
<HR>
<H3><A name="note72-01">Note 72-01: (AES) Fixed a bug that occurred during simultaneous use of AES library and wireless features</A></H3>
<P><description>Fixed a bug that caused the AES library to halt when it was used simultaneously with wireless features.</description></P>
<HR>
<H3><A name="note72-02">Note 72-02: (CAMERA) Added a note on the timing at which settings are applied by the <CODE>CAMERA_I2C*</CODE> functions</A></H3>
<P><description>Added a note in the <I>Function Reference Manual</I> to the effect that there may be approximately a one-frame delay between when camera settings are changed using a <CODE>CAMERA_I2C*</CODE> function and when the values are actually applied.</description></P>
<HR>
<H3><A name="note72-03">Note 72-03: (CAMERA) Added a precautionary note to the function reference for the <CODE>CAMERA_SwitchOffLED</CODE> function</A></H3>
<P><description>It has been established that on rare occasions the LED would not turn off when the <CODE>CAMERA_SwitchOffLED</CODE> function was used. A procedure that is certain to turn off the LED was therefore added to the <I>Function Reference Manual</I> for the <CODE>CAMERA_SwitchOffLED</CODE> and <CODE>CAMERA_SetLED</CODE> functions.<br><br> This bug will be fixed in the next release, TWL-SDK 5.2 RC, so a description of the post-fix specifications was also added.</description></P>
<HR>
<H3><A name="note72-04">Note 72-04: (CAMERA) Added frame rate values</A></H3>
<P><description>Added the following values to the frame rates that can be set by the <CODE>CAMERA_I2CFrameRate</CODE> function.
        <ul>
          <li>CAMERA_FRAME_RATE_15_TO_10</li>
          <li>CAMERA_FRAME_RATE_20_TO_10</li>
          <li>CAMERA_FRAME_RATE_30_TO_10</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note72-05">Note 72-05: (DSP) Fixed bugs in the <CODE>DSP_PlaySound</CODE> function</A></H3>
<P><description>Fixed two bugs in the <CODE>DSP_PlaySound</CODE> function that halted program execution. The first would occur when the function was called consecutively, and the second would occur if the function was called at the moment playback ended.</description></P>
<HR>
<H3><A name="note72-06">Note 72-06: (DSP) Fixed a bug in the <CODE>DSP_Scaling*</CODE> functions</A></H3>
<P><description>Fixed a bug that prevented processing from ending or caused one or two lines to be left off the end of the output image if the input image size and scale ratios satisfied particular conditions when <CODE>DSP_GRAPHICS_SCALING_MODE_BICUBIC</CODE> was specified for the scaling mode and scale ratios were specified that would shrink the image along the vertical axis.</description></P>
<HR>
<H3><A name="note72-07">Note 72-07: (DevEnv) Revised the <I>TWL-SDK Migration Guide</I></A></H3>
<P><description>Made the following revisions to <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE>.
        <ul>
<li>Changed the compared TWL-SDK to the official release of TWL-SDK 5.1.</li>
<li>Added a note that card applications must set the card region in RSF files.</li>
<li>Noted that <CODE>RomSize</CODE> is ignored and <CODE>RomFootPadding</CODE> must be set to <CODE>FALSE</CODE> in the RSF file for a NAND application.</li>
<li>Fixed typos and standardized terminology in descriptions.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note72-08">Note 72-08: (EL) Added the <CODE>EL_Link*Ex</CODE> functions</A></H3>
<P><description>Added the <CODE>EL_Link*Ex</CODE> functions, which allow the buffer size to be specified, because a buffer overflow error occurs if the correct buffer size is not specified with the <CODE>EL_Link*</CODE> functions.<br> If you are currently using the <CODE>EL_Link*</CODE> functions, we recommend that you switch to using the <CODE>EL_Link*Ex</CODE> functions.</description></P>
<HR>
<H3><A name="note72-09">Note 72-09: (FS) Updated <CODE>AboutFileSystem.pdf</CODE></A></H3>
<P><description>Added an overview of the NITRO ROM format to <CODE>$TwlSDK/docs/TechnicalNotes/AboutFileSystem.pdf</CODE>.</description></P>
<HR>
<H3><A name="note72-10">Note 72-10: (FS) Fixed functions that involve writes to NAND memory</A></H3>
<P><description>Fixed a bug that would on rare occasions prevent the FS library from returning if an SD Card was inserted or removed during a write to NAND memory.</description></P>
<HR>
<H3><A name="note72-11">Note 72-11: (FS) Revised the <CODE>async</CODE> sample demos</A></H3>
<P><description>When the sample demos in <CODE>$TwlSDK/build/demos/fs/async</CODE> were run in TWL mode, the entire ROM file image would fit into the CARD library's internal cache buffer. Consequently, the samples behaved incorrectly: They did not switch threads nor wait for FS functions to finish.<br><br> To adjust sample demo behavior, the size of each ROM file has been made large enough to prevent processing from ending during an FS function call.</description></P>
<HR>
<H3><A name="note72-12">Note 72-12: (FS) Fixed a bug that occurred during a system shutdown</A></H3>
<P><description>When a Power Button press interrupted a NAND access, on rare occasions a bug caused the AES library to remain in an intermediate state without shutting down and prevented the FS library's shutdown sequence from ending.<br> This problem was fixed.<br><br> Note that if the Power Button is pressed while the <CODE>NA_FormatTitleArchive</CODE> function is handling a save data file of 2 MB or more, it is also possible for that function to be interrupted. This bug is unfortunately applicable to that function.</description></P>
<HR>
<H3><A name="note72-13">Note 72-13: (FS) Added an explanation of the size consumed by Nintendo DSi enhanced ROMs</A></H3>
<P><description>Explained in the FS library's Overview page that a Nintendo DSi enhanced ROM (built as hybrid or limited) stores a hash table for security purposes and thus consumes enough additional space in ROM for that table.</description></P>
<HR>
<H3><A name="note72-14">Note 72-14:(FS) Revisions specific to cache operation when accessing files</A></H3>
<P><description>Fixed a bug related to <a href="changelog.html#note68-22">Note 68-22</a>. This bug caused the cache to be corrupted just in the area near the end of the transfer buffer in cases where (for example) the transfer size was not 32-byte aligned while accessing a file, but the cache lines continued to be 32-byte aligned.</description></P>
<HR>
<H3><A name="note72-15">Note 72-15: (FS) Corrected unnecessary device accesses in the flush process</A></H3>
<P><description>For applications that had never accessed an SD Card or NAND memory, the process of flushing the FAT file system involved an long read access that was fundamentally unnecessary.<br><br> The result was that, depending on the SD Card inserted, the sleep and reset processes could take a long time when the SD Card had never been accessed.<br> This problem was fixed.</description></P>
<HR>
<H3><A name="note72-16">Note 72-16: (FS) Fixed a bug related to issuing commands in multiple threads</A></H3>
<P><description>Fixed a bug that caused two threads to enter a processing deadlock on rare occasions when a high-priority thread called an FS library function while a low-priority thread was also calling an FS library function.</description></P>
<HR>
<H3><A name="note72-17">Note 72-17: (GX) Added explanation to the <CODE>Sub_Double3D</CODE> sample demo</A></H3>
<P><description>Added comments to the source code for the <CODE>Sub_Double3D</CODE> sample demo, explaining phenomena related to the flicker described in section 7.5.2 of the Programming Guidelines and how the demo deals with it.</description></P>
<HR>
<H3><A name="note72-18">Note 72-18: (MB) Re-modified the method for building the child programs for the <CODE>multiboot-model</CODE> and <CODE>multiboot-wfs</CODE> sample demos</A></H3>
<P><description>The fixes for <a href="changelog.html#note67-09">Note 67-09</a> and <a href="changelog.html#note71-06">Note 71-06</a> were insufficient, so the makefile was revised again for both the <CODE>multiboot-model</CODE> and the <CODE>multiboot-wfs</CODE> sample demos.</description></P>
<HR>
<H3><A name="note72-19">Note 72-19: (MB) Fixed a bug related to distribution with delayed loading</A></H3>
<P><description>Fixed a bug that resulted in a redundant file access past the end of a ROM, violating the hash check in the CARD library and causing program execution to fail. This bug occurred when DS Download Play was run with delayed loading, a small buffer was specified to the <CODE>MB_ReadSegment</CODE> function, and the file to distribute was placed near the end of the ROM.</description></P>
<HR>
<H3><A name="note72-20">Note 72-20: (NA) Added support for the Chinese and Korean shared font libraries</A></H3>
<P><description>Added support for reading shared Chinese and Korean system internal fonts (these are separate from the ones in Japanese, North American, European, and Australian systems).</description></P>
<HR>
<H3><A name="note72-21">Note 72-21: (OS) Added heap functions related to unused regions of hybrid ROMs in NITRO mode</A></H3>
<P><description>Until now, the first 16 KB of main memory were not used when a hybrid ROM was run in NITRO mode. This has been changed for this operation mode only (hybrid ROMs running in NITRO mode) so that the unused region can be used as a new heap or added to an existing heap as a free memory block.<br><br> The <CODE>OS_CreateExtraHeap</CODE> function uses the region as a new heap.<br> The <CODE>OS_AddExtraAreaToHeap</CODE> function adds the region to an existing heap as a memory block.<br><br> The <CODE>OS_ClearExtraHeap</CODE> function has also been added to initialize heaps created with the <CODE>OS_CreateExtraHeap</CODE> function.</description></P>
<HR>
<H3><A name="note72-22">Note 72-22: (OS) Fixed undefined instructions in the IRQ handler</A></H3>
<P><description>The IRQ handler contained inline assembly code that, interpreted strictly under the ARM instruction set, resulted in undefined instructions.<br> This was fixed to be composed of code that defined the relevant items.<br><br> Even though undefined instructions were written, they were interpreted by the CodeWarrior compiler and TWL CPU as expected by the library design and did not result in any behavioral problems before being revised.</description></P>
<HR>
<H3><A name="note72-23">Note 72-23: (OS) Added support for 17-digit ISBN numbers</A></H3>
<P><description>Following the extension of ISBN numbers from 13- to 17-digits, added support for 17-digit ISBN numbers in the <CODE>OS_InitChina</CODE> function.</description></P>
<HR>
<H3><A name="note72-24">Note 72-24: (OS) Added information to the function reference for the <CODE>OS_GetCurrentThread</CODE> function</A></H3>
<P><description>Added a note to the <I>Function Reference Manual</I> recommending against calling the <CODE>OS_GetCurrentThread</CODE> function from an interrupt handler.</description></P>
<HR>
<H3><A name="note72-25">Note 72-25: (OS) Added the <CODE>OS_IsOnMainMemory</CODE> and <CODE>OS_IsOnWram</CODE> functions</A></H3>
<P><description>Added functions to check the address referenced by a pointer and determine where it is located in memory.</description></P>
<HR>
<H3><A name="note72-26">Note 72-26: (OS) Added a warning screen for TWL-exclusive ROMs</A></H3>
<P><description>Changed behavior so that now a warning screen appears when a TWL-exclusive ROM is run in NITRO mode.<br> (However, Chinese and Korean images have not yet been prepared.)</description></P>
<HR>
<H3><A name="note72-27">Note 72-27: (PM) Fixed a mutual exclusion bug in the PM library</A></H3>
<P><description>Fixed a bug in the PM library that caused deadlocks when PM functions were called at particular times, even though multithread tasks were made to be mutually exclusive.</description></P>
<HR>
<H3><A name="note72-28">Note 72-28: (PM) Changed the priority rights for main memory during shutdown processing</A></H3>
<P><description>Gave the ARM7 priority rights to main memory. This ensures that after the <CODE>GX_DispOff</CODE> function is run during shutdown processing for a system shutdown or hardware reset, the V-Blank count is updated before the count is read and execution waits for two frames.</description></P>
<HR>
<H3><A name="note72-29">Note 72-29: (PRC) Changed the prototype pattern database</A></H3>
<P><description>Removed hiragana and added several new types of symbols to the prototype pattern database used by the PRC sample demos.<br> In line with this change, also revised <CODE>$TwlSDK/docs/TechnicalNotes/AboutPatternRecognition.pdf</CODE>.</description></P>
<HR>
<H3><A name="note72-30">Note 72-30: (RTC) Added a function reference for the <CODE>RTC_GetDayOfWeek</CODE> function</A></H3>
<P><description>Added a page in the <I>Function Reference Manual</I> for the <CODE>RTC_GetDayOfWeek</CODE> function, which is used to get the day of the week for a specified date.</description></P>
<HR>
<H3><A name="note72-31">Note 72-31: (SND) Fixed a bug related to loading WAVE data in the <CODE>DEMOLib</CODE> and <CODE>stream</CODE> sample demos</A></H3>
<P><description>Fixed a bug in the <CODE>DEMOLib</CODE> and <CODE>stream</CODE> sample demos. The WAVE data format input to the <CODE>ReadWaveFormat</CODE> function was illegal and caused the demos to halt with a data access exception.</description></P>
<HR>
<H3><A name="note72-32">Note 72-32: (SND) Fixed a bug in the SNDEX shutdown callback</A></H3>
<P><description>When the <CODE>SNDEX_SetIgnoreHWVolume</CODE> function was run and the hardware subsequently reset, the post-processing callbacks invoked at shutdown included processing to automatically reset the volume (identical to running the <CODE>SNDEX_ResetIgnoreHWVolume</CODE> function). However, the process for changing the volume had a bug that would prevent reset processing from finishing.<br> This problem has been fixed.</description></P>
<HR>
<H3><A name="note72-33">Note 72-33: (SSP) Fixed a bug in the <CODE>SSP_StartJpegEncoder*</CODE> functions</A></H3>
<P><description>Fixed a bug that prevented proper encoding with thumbnails using the <CODE>SSP_StartJpegEncoder</CODE> and <CODE>SSP_StartJpegEncoderWithEncodeData</CODE> functions when the quality was set to a value of 70 or less.</description></P>
<HR>
<H3><A name="note72-34">Note 72-34: (SSP) Fixed the buffer size used for creating thumbnails</A></H3>
<P><description>An excessively large internal buffer had been allocated for creating thumbnails in the <CODE>SSP_StartJpegEncoder</CODE> function, so it was revised to be allocated with the appropriate size.<br> This change reduces the working size obtained with the <CODE>SSP_GetJpegEncoderBufferSize</CODE> function.</description></P>
<HR>
<H3><A name="note72-35">Note 72-35: (TCL) Added the TCL library</A></H3>
<P><description>Added the TCL library for accessing the <CODE>photo</CODE> region. This region stores photo data taken from the Nintendo DSi Menu or Nintendo DSi Cameras.<br> Accordingly, added the PhotoChecker tool to ensure that no files unrelated to the TCL library have been written to the <CODE>photo</CODE> region. <br><br> The following changes have been made to the TCL library since version 2009/03/19, which supported the official release of TWL-SDK 5.1.
        <ul>
<li>Added the <CODE>TCL_GetPictureInfoFromPath</CODE> function to get <CODE>TCLPictureInfo</CODE> data from a photo path.</li>
<li>Added the <CODE>TCL_GetLastWrittenPictureInfo</CODE> function to get photo information for the most recent image to be written.</li>
<li>Changed the <CODE>TCL_DeletePicture</CODE> function to handle directories in the same way as the Nintendo DSi Cameras do when deleting photos.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note72-36">Note 72-36: (TOOL) Changed <CODE>makerom</CODE></A></H3>
<P><description>Made the following changes to <CODE>makerom</CODE>.
        <ul>
<li>Revised explanations in the <I>Function Reference Manual</I>, which previously stated that when the <CODE>Align</CODE> and <CODE>AlignAll</CODE> properties competed with each other, the largest setting value would have priority even though in actuality <CODE>Align</CODE> always took precedence.</li>
<li>Fixed a bug that occurred  when the <CODE>BannerFile</CODE> property was not specified. This bug caused the <CODE>Align</CODE> and <CODE>AlignAll</CODE> property settings to <I>not</I> be applied to the first file recorded in ROM.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note72-37">Note 72-37: (TOOL) Changed <CODE>makerom.TWL</CODE></A></H3>
<P><description>Made the following changes to <CODE>makerom.TWL</CODE>.
        <ul>
<li>Revised explanations in the <I>Function Reference Manual</I>, which previously stated that when the <CODE>Align</CODE> and <CODE>AlignAll</CODE> properties competed with each other, the largest setting value would have priority even though in actuality <CODE>Align</CODE> always took precedence.</li>
<li>Fixed a bug that occurred  when the <CODE>BannerFile</CODE> property was not specified. This bug caused the <CODE>Align</CODE> and <CODE>AlignAll</CODE> property settings to <I>not</I> be applied to the first file recorded in ROM.</li>
<li>Removed a restriction that caused the <CODE>Align</CODE> and <CODE>AlignAll</CODE> properties to be internally corrected to a minimum value of only 1024 bytes for Nintendo DSi enhanced programs.</li>
<li>Revised the default value used when the <CODE>DigestParam</CODE> property is omitted. The default value used to be &quot;2048 256&quot;, but it is now &quot;1024 32&quot; and matches the standard RSF file.</li>
<li>Added processing to automatically set the <CODE>JpegSign</CODE> property to <CODE>TRUE</CODE> when the <CODE>PhotoAccess</CODE> property includes write access specifications. If you have configured the <CODE>JpegSign</CODE> property to accommodate the TCL library, from now on remove the <CODE>JpegSign</CODE> specification and configure only <CODE>PhotoAccess</CODE> to an appropriate value.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note72-38">Note 72-38: (TOOL) Fixed a bug that resulted in an illegal TAD file contained in an SRL file created by <CODE>maketad</CODE></A></H3>
<P><description>A bug formerly prevented <CODE>TwlNmenu</CODE> from finding some output files created by <CODE>maketad</CODE>. This bug affected output files created in <CODE>maketad</CODE> using the <CODE>-n</CODE> option (specifically, SRL files containing TAD files), whose filenames included directories and were specified to <CODE>maketad</CODE> using the <CODE>-o</CODE> option.<br> This problem has been fixed.</description></P>
<HR>
<H3><A name="note72-39">Note 72-39: (TOOL) Added TWL card support to <CODE>maketad</CODE> and <CODE>tad2rom</CODE></A></H3>
<P><description>When <CODE>maketad</CODE> or <CODE>tad2rom</CODE> created an SRL file containing a TAD file and the file was burned to a TWL card, it could sometimes not be imported to <CODE>TwlNmenu</CODE>.<br> This problem has been fixed.</description></P>
<HR>
<H3><A name="note72-40">Note 72-40: (TOOL) Fixed usage information for <CODE>ntrcomp</CODE></A></H3>
<P><description>Fixed the usage for <CODE>ntrcomp</CODE>, which showed the <CODE>-d</CODE> and <CODE>-h</CODE> options taking incorrect values.</description></P>
<HR>
<H3><A name="note72-41">Note 72-41: (TOOL) Added explanations related to specifying banners for applications for the Chinese market</A></H3>
<P><description>Added explanations of specifying banners for applications for the Chinese market to the following files, because the files contained less information than the guidelines.
        <ul>
<li><CODE>makebanner</CODE> page in the <I>Function Reference Manual</I></li>
<li><CODE>makebanner.TWL</CODE> page in the <I>Function Reference Manual</I></li>
<li>Section 3.2.3 in <CODE>$TwlSDK/docs/TechnicalNotes/AboutExtendedLanguage.pdf</CODE></li>
        </ul>
      </description></P>
<HR>
<H3><A name="note72-42">Note 72-42: (WM) Improved decision-making in the <CODE>WM_IsValidGameInfo</CODE> and <CODE>WM_IsValidGameBeacon</CODE> functions</A></H3>
<P><description>Improved both the <CODE>WM_IsValidGameInfo</CODE> and <CODE>WM_IsValidGameBeacon</CODE> functions' ability to return <CODE>FALSE</CODE> for falsified beacon information. These functions had been confirmed to sometimes be unable to detect a falsified, illegal beacon during a scan.</description></P>
<HR>
<H3><A name="note72-43">Note 72-43: (WM) Added restrictions on the buffer specified when initializing the wireless library</A></H3>
<P><description>When the buffer (<CODE>wmSysBuf</CODE>) specified to the <CODE>WM_Init</CODE> and <CODE>WM_Initialize</CODE> functions was allocated from the VRAM or extended main memory in IS-TWL-DEBUGGER (hardware), it was discovered that the library would not function correctly. As a result, initialization has been changed to fail when the buffer is allocated from the aforementioned locations.</description></P>
<HR>
<H3><A name="note72-44">Note 72-44: (Miscellaneous) Handled a renamed Australian rating organization</A></H3>
<P><description>Made the following revisions following a change to the name of the Australian rating organization.
        <ul>
<li>Changed the properties used to specify Australia in the <CODE>Rating</CODE> section of <CODE>makerom.TWL</CODE>. <br>Accordingly, revised the <CODE>makerom.TWL</CODE> page in the <I>Function Reference Manual</I> as well.</li>
<li>Renamed <CODE>enum</CODE> members related to Parental Controls in the TWL system information</li>
<li>Revised RSF file comments for each demo</li>
        </ul>
      </description></P>
<HR>
<H3><A name="KnownIssues_5_2_PR">Known issues in TWL-SDK version 5.2 PR</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in HYBRID mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
<li>FINALROM application jumps do not work properly on TS boards.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_1_%E6%AD%A3%E5%BC%8F%E7%89%88">TWL-SDK Version 5.1 Official Release</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/02/27)</P></DIV>
<HR>
<H3><A name="note71-01">Note 71-01:(DSP) Updated the audio and graphics components</A></H3>
<P><description>The DSP's internal data transfer process was updated, so the components have also been updated.</description></P>
<HR>
<H3><A name="note71-02">Note 71-02:(DevEnv) Fixed a problem in the arena region of expanded main memory </A></H3>
<P><description>In TWL mode, even if the auto-load module was placed in expanded main memory, this would not be taken into consideration and the expanded main memory arena would be allocated from the start of expanded main memory. This problem was corrected by revising the <CODE>lcf template</CODE> file.</description></P>
<HR>
<H3><A name="note71-03">Note 71-03:(GX) Clarified the group of functions that ignore settings when the LCD is in the OFF state</A></H3>
<P><description>When the LCD display is in the OFF state the GX circuitry clock is paused, so settings configured during that time are ignored in a number of functions. <br>This fact has been added to the reference information for the following functions.
        <ul>
          <li>GX_SetMasterBrightness.html</li>
          <li>GXS_SetMasterBrightness.html</li>
          <li>GX_SetCapture.html</li>
          <li>GX_ResetCapture.html</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note71-04">Note 71-04:(MATH) Revised the TWL-SDK Migration Guide</A></H3>
<P><description>Added the section <I>2.11 MATH MD5 Function Not Recommended</I> to the document $TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf.</description></P>
<HR>
<H3><A name="note71-05">Note 71-05:(MB) Fixed the HYBRID Card application clone boot </A></H3>
<P><description>When a HYBRID-build card application operating in the hardware environment conducted a clone boot, the process would forcibly stop on a CARD library validity check. This problem, which was caused by unnecessary ROM access, has been fixed.</description></P>
<HR>
<H3><A name="note71-06">Note 71-06:(MB) Fixed the multiboot-Model and fake_child sample demos</A></H3>
<P><description>During initialization of the <CODE>multiboot-Model</CODE> and <CODE>fake_child</CODE> demos, if the call to the <CODE>GX_VBlankIntr</CODE> function was late and the child became <CODE>mb_child_***.srl</CODE>, sometimes the screen after the boot would not display. This problem has been fixed.<br><br> Also, the build modes in <CODE>multiboot-Model</CODE> were restricted to NITRO mode for no reason, so this restriction was eliminated.</description></P>
<HR>
<H3><A name="note71-07">Note 71-07:(OS) Added a process to wait for the divider to end when loading context</A></H3>
<P><description>When <CODE>OS_LoadContext</CODE> was called while operating in TWL mode, sometimes the process would exit from the function without waiting for the end of the divider's calculation after the context was loaded.  To correct this, the process now waits for the calculation to end when operating in TWL mode.</description></P>
<HR>
<H3><A name="note71-08">Note 71-08:(PM) Fixed interrupt-specific problem with PM_ForceToPowerOff</A></H3>
<P><description>When the <CODE>PM_ForceToPowerOff</CODE> function was called to turn the power off at a time when interrupts were prohibited and the LCD was in the OFF state, the program would halt. <br> This problem has been fixed.</description></P>
<HR>
<H3><A name="note71-09">Note 71-09:(SSP) Corrected the JPEG decoding process</A></H3>
<P><description>For some images, the JPEG decoding process would not yield the intended decoding result. This has been corrected.</description></P>
<HR>
<H3><A name="note71-10">Note 71-10:(SSP) Fixed problem with SSP_StartJpegEncoderWithEncodeData</A></H3>
<P><description>When JPEG encoding was performed using the <CODE>SSP_StartJpegEncoderWithEncodeData</CODE> function, the thumbnails could not be created correctly. This has been fixed.</description></P>
<HR>
<H3><A name="note71-11">Note 71-11: (TOOL) Fixed tad2rom</A></H3>
<P><description>The program would crash if the argument did not contain the forward slash (  /  ). This problem has been fixed.</description></P>
<HR>
<H3><A name="note71-12">Note 71-12:(WM) Corrected sample demos</A></H3>
<P>In the following sample demos, the port number used for wireless communications differed from the corresponding demos contained in Revolution SDK Extension. This prevented normal communications between Wii and DS systems, and has been fixed.
        <ul>
          <li>mp_simple1</li>
          <li>datashare-1</li>
        </ul>
      </description></P>
<HR>
<H3><A name="KnownIssues_5_1_%E6%AD%A3%E5%BC%8F%E7%89%88">Known issues in TWL-SDK version 5.1 official release</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in hybrid mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
<li>FINALROM application jumps do not work properly on TS boards.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_1_RC">TWL-SDK Version 5.1 RC</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/02/10)</P></DIV>
<HR>
<H3><A name="note70-01">Note 70-01:(CTRDG)  Made CTRDG_Init a weak function</A></H3>
<P><description>The <CODE>CTRDG_Init</CODE> function could be called from the <CODE>OS_Init</CODE> function without using any CTRDG functions. A number of CTRDG functions would then be linked, taking up a large amount of memory.<br> The <CODE>CTRDG_Init</CODE> function has been converted to a weak function. For applications that do not access Game Paks, definitions can be altered to reduce the amount of memory taken up by the CTRDG  library.<br> For more information, see the <CODE>CTRDG_DummyInit</CODE> function.</description></P>
<HR>
<H3><A name="note70-02">Note 70-02:(DevEnv) Revised the TWL-SDK Transition Guide</A></H3>
<P><description>Added information to sections 3.1 and 5.1 in the <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE> documentation, mentioning that the library uses more memory when you transition from NITRO-SDK to TWL-SDK NITRO or HYBRID ROM.</description></P>
<HR>
<H3><A name="note70-03">Note 70-03:(FS) Split up the FAT driver initialization functions</A></H3>
<P><description>Because normal card-boot applications do not use NAND system memory or an SD memory card, the FAT driver initialization function has been split up so applications do not link to FAT drivers when they do not need to.<br> If  your HYBRID build card-boot application uses NAND system memory or an SD memory card, you need to call the <CODE>FS_InitFatDriver</CODE> function in addition to the <CODE>FS_Init</CODE> function.</description></P>
<HR>
<H3><A name="note70-04">Note 70-04:(FS) Fixed a bug in the FS_SetSeekCache function</A></H3>
<P><description>If the address for the start or the end of the buffer specified by the <CODE>FS_SetSeekCache</CODE> function did not align with the cache boundary, subsequent seek operations were unpredictable. This bug has been fixed.<br> Accordingly, the <CODE>FS_GetSeekCacheSize</CODE> function now returns a 64-byte value to accommodate cache boundary padding.</description></P>
<HR>
<H3><A name="note70-05">Note 70-05:(FS) Fixed a bug specific to system shutdown</A></H3>
<P><description>If the power button was pressed while a 2 MB or larger file was being written or read from NAND system memory, the shutdown sequence occasionally would not complete. That bug has been fixed.</description></P>
<HR>
<H3><A name="note70-06">Note 70-06:(FS) Fixed a bug specific to working with long path names</A></H3>
<P><description>When dealing with path names that reached the FAT upper limit of 255 characters, operations that should succeed would occasionally return <CODE>FS_RESULT_NO_ENTRY</CODE> and fail. That bug has been corrected.</description></P>
<HR>
<H3><A name="note70-07">Note 70-07:(GX) Revised the GX_SetDefaultNDMA function</A></H3>
<P><description>When a HYBRID build was operating in NITRO mode, the <CODE>GX_SetDefaultNDMA</CODE> function would be called. That has been corrected.</description></P>
<HR>
<H3><A name="note70-08">Note 70-08:(MB) Reduced the amount of memory consumed when using MB parent</A></H3>
<P><description>The buffer used for scanning when using MB child functionality (DS Download Play only) was also linked when using MB parent functionality. To reduce memory consumption, this has been revised so the buffer is not linked when it is not needed.</description></P>
<HR>
<H3><A name="note70-09">Note 70-09:(PM) Added a note to the PM_SetLCDPower Function Reference</A></H3>
<P><description>As a result of the revision described in <a href="changelog.html#note69-13">Note 69-13</a>, you no longer need to make a separate call to the GX_DispOn function when you use the the PM_SetLCDPower function to turn the LCD back on. This has been added to the function reference.</description></P>
<HR>
<H3><A name="note70-10">Note 70-10:(SND) Added API for changing sound volume</A></H3>
<P><description>Two functions, <CODE>SNDEX_SetIgnoreHWVolume</CODE> and <CODE>SNDEX_ResetIgnoreHWVolume</CODE>, have been added. They allow you to preset a value that you want to use to change the sound volume, to temporarily change to that value, and to revert back to the original volume.<br> You need to conform to the Programming Guidelines when using these two functions.<br><br> In addition, the <CODE>$TwlSDK/build/demos.TWL/snd/ignoreHWVolumeDemo</CODE> sample demo has been added. The demo uses these two functions to play sounds at the specified volume for a specified time.</description></P>
<HR>
<H3><A name="note70-11">Note 70-11:(STD)  Revised the STD_SearchChar* functions</A></H3>
<P><description>Revised the <CODE>STD_SearchChar</CODE> and <CODE>STD_SearchCharReverse</CODE> functions to enable searching for null characters.</description></P>
<HR>
<H3><A name="note70-12">Note 70-12:(TOOL) Changed NandFiler</A></H3>
<P><description>Made the following changes to <CODE>NandFiler</CODE>:
        <ul>
<li>When a file of 0 bytes in size was opened, the system would freeze. That bug has been fixed.</li>
<li>Directories and files are now sorted for display.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note70-13">Note 70-13:(TOOL) Added a method for displaying the size of NAND applications in TwlNmenu</A></H3>
<P><description>Added the display of the overall size (<CODE>TitleSize</CODE>) of an imported NAND application in units of KB.</description></P>
<HR>
<H3><A name="note70-14">Note 70-14: (TOOL) Revised WMTestTool</A></H3>
<P><description>Sometimes the system would freeze on <CODE>scanEx test</CODE> in the  <CODE>WMTestTool</CODE>. That bug has been corrected.</description></P>
<HR>
<H3><A name="note70-15">Note 70-15:(TOOL) Changed makerom.TWL</A></H3>
<P><description>Made the following changes to <CODE>makerom.TWL</CODE>.
        <ul>
<li>Changed the <CODE>wramMapping</CODE> property so <CODE>MAP_TS_HYB</CODE> and  <CODE>MAP_TS_LTD</CODE> cannot be specified. (Before they could be specified, even though they could not be used.)</li>
<li>Changed the <CODE>CardRegion</CODE> property to allow the setting of multiple regions as shown below.
            <ul>
<li>Europe and Australia: EuropeAndAustralia</li>
<li>North America and Australia: AmericaAndAustralia</li>
<li>North America, Europe and Australia: AmericaAndEuropeAndAustralia</li>
            </ul>
          </li>
<li>In the <CODE>Rating</CODE> section, added the <CODE>Unnecessary</CODE>property for times when a rating does not need to be displayed.<br>Also, an error is now output if you set values that are not defined by the rating organizations.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note70-16">Note 70-16:(TOOL) Deleted mb_child_simple.srl</A></H3>
<P><description>Deleted the <CODE>mb_child_simple.srl</CODE> independent downloader in combination with renaming the <CODE>mb_child</CODE> program. </description></P>
<HR>
<H3><A name="note70-17">Note 70-17:(TOOL) Added mb_child for separate operating environments</A></H3>
<P><description>Added <CODE>mb_child_[NITRO|TWL].srl </CODE> for IS-NITRO-EMULATOR and the NITRO environment, and for IS-TWL-DEBUGGER and the TWL environment, each with the same specification as the respective DS Download Play specifications.<br> The <CODE>mb_child</CODE> included up until the previous version is the same as the newly added <CODE>mb_child_TWL.srl</CODE>.</description></P>
<HR>
<H3><A name="note70-18">Note 70-18:(WFS) Fixed a bug in child end process</A></H3>
<P><description>When WFS for a child was ended by a call to the <CODE>WFS_EndClient</CODE> function, and a ROM archive was subsequently accessed, the process would stop on a data access exception.</description></P>
<HR>
<H3><A name="note70-19">Note 70-19:(WM) Added the rssi member to the WMPortRecvCallback structure</A></H3>
<P><description>The <CODE>rssi</CODE> member has been added to the <CODE>WMPortRecvCallback</CODE> structure to get information about receiver sensitivity for data (frames) received during MP communication.</description></P>
<HR>
<H3><A name="note70-20">Note 70-20:(MISC) Revised the sample demos</A></H3>
<P><description>Revised a number of sample demos that randomly called <CODE>OS_SetIrqMask</CODE> to control interrupts during program initialization.</description></P>
<HR>
<H3><A name="KnownIssues_5_1_RC">Known issues in TWL-SDK version 5.1 RC</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in Hybrid mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
<li>FINALROM application jumps do not work properly on TS boards.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_1_PR2">TWL-SDK Version 5.1 PR2</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2009/01/15)</P></DIV>
<HR>
<H3><A name="note69-01">Note 69-01:(CAMERA) Revised demo</A></H3>
<P><description>A portion of the CAMERA library demo did not comply with the camera specifications. That has been corrected.</description></P>
<HR>
<H3><A name="note69-02">Note 69-02:(CARD)  Strengthened card access determination</A></H3>
<P><description>Strengthened the library's internal determination process so programs that start in any mode other than Card Boot do not inadvertently access DS Cards that are in an unknown state.</description></P>
<HR>
<H3><A name="note69-03">Note 69-03:(DSP) Changed the DSP_PlayShutterSound function</A></H3>
<P><description>Until now, <CODE>FALSE</CODE> was returned when forced output of the sound failed inside the  <CODE>DSP_PlayShutterSound</CODE> function. That has been changed so the process is now retried inside the function until it is successful.<br><br> With this revision, the <CODE>DSP_PlayShutterSound</CODE> function now only returns <CODE>FALSE</CODE> when the specified shutter sound does not match the I2S operating frequency.</description></P>
<HR>
<H3><A name="note69-04">Note 69-04:(DevEnv) Updated the TWL-SDK Transition Guide</A></H3>
<P><description>Text about the <CODE>Static</CODE> module in NITRO ROM has been deleted from <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE> because it is not needed starting with TWL-SDK 5.1 PR.<br> In addition, some of the text about ROM archives in NAND applications was edited for accuracy.</description></P>
<HR>
<H3><A name="note69-05">Note 69-05:(EL) Added the EL_CalcEnoughBufferSizeforLink* functions</A></H3>
<P><description>The following functions have been added to calculate the size of buffers needed for dynamic links.
        <ul>
          <li>EL_CalcEnoughBufferSizeforLink</li>
          <li>EL_CalcEnoughBufferSizeforLinkFile</li>
          <li>EL_CalcEnoughBufferSizeforLinkImage</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note69-06">Note 69-06:(EL) Added the EL_GetResultCode function</A></H3>
<P><description>Added the <CODE>EL_GetResultCode</CODE> function, which can be used to get details about the result of the process last performed by EL.</description></P>
<HR>
<H3><A name="note69-07">Note 69-07:(EL) Revised the EL_Unlink function</A></H3>
<P><description>The <CODE>EL_Unlink</CODE> function always returned 0, regardless of success or failure. That has been corrected.</description></P>
<HR>
<H3><A name="note69-08">Note 69-08:(FS) Added the FS_ForceToEnableLatencyEmulation function</A></H3>
<P><description>Added the <CODE>FS_ForceToEnableLatencyEmulation</CODE> function to forcibly enable the feature to simulate waits because the feature is disabled for the FINALROM build.</description></P>
<HR>
<H3><A name="note69-09">Note 69-09:(GX) Corrected the Sub_Double3D sample demo</A></H3>
<P><description>The previous correction to the Sub_Double3D demo (<a href="changelog.html#note68-23">Note 68-23</a>) was updated. The same kind of correction was made to <CODE>DEMOLib</CODE>.</description></P>
<HR>
<H3><A name="note69-10">Note 69-10:(MB) Added text about the pseudo-Download Play feature</A></H3>
<P><description>Added an overview of the MB library's pseudo-Download Play functionality and an explanation of the <CODE>fake_child</CODE>sample that uses this to <CODE>$TwlSDK/docs/technicalNotes/AboutMultiBoot.pdf</CODE>.</description></P>
<HR>
<H3><A name="note69-11">Note 69-11:(NA) Updated the NAND Application Development Manual</A></H3>
<P><description>Added a precaution about simple debugging in section 6.2 of <CODE>$TwlSDK/docs/TechnicalNotes/NandAppManual.pdf</CODE>.<br> Note that a NAND application executed from an SRL file on IS-TWL-DEBUGGER will behave differently than the released version.</description></P>
<HR>
<H3><A name="note69-12">Note 69-12:(OS) Expanded OSMutex</A></H3>
<P><description>Added implementations of <CODE>read/write lock</CODE> to <CODE>mutex</CODE> in the OS library. <br>The following functions have been added.
        <ul>
          <li>OS_LockMutexR</li>
          <li>OS_LockMutexW</li>
          <li>OS_UnlockMutexR</li>
          <li>OS_UnlockMutexW</li>
          <li>OS_UnlockMutexRW</li>
          <li>OS_TryLockMutexR</li>
          <li>OS_TryLockMutexW</li>
          <li>OS_LockMutexFromRToW</li>
          <li>OS_LockMutexFromWToR</li>
          <li>OS_TryLockMutexFromRToW</li>
          <li>OS_TryLockMutexFromWToR</li>
        </ul>
This change was actually implemented in the 5.1 PR version, but it was left out of the <CODE>changelog</CODE> file.</description></P>
<HR>
<H3><A name="note69-13">Note 69-13:(PM) Made revisions specific to turning off the LCD</A></H3>
<P><description>In order to turn the LCD off with the <CODE>PM_SetLCDPower</CODE> function, a call must be made to the <CODE>GX_DispOff </CODE> function. <CODE>PM_SetLCDPower</CODE> has been revised so that it internally calls <CODE>GX_DispOff</CODE> if it is not called by the application.</description></P>
<HR>
<H3><A name="note69-14">Note 69-14:(SND) Added the SNDEX_GetCurrentVolume[Async] functions</A></H3>
<P>There are now two types of sound volume values: the sound volume of the console, and the pending sound volume (see also <A href="changelog.html#note69-15">Note 69-15</a>).<br>Therefore, the <CODE>SNDEX_GetCurrentVolume[Async]</CODE> functions have been added to get the current console volume value.<br>The <CODE>SNDEX_GetVolume[Async]</CODE> functions get the pending volume value. If there is no pending value they get the current value.<br><br>The pending volume value is applied after several frames, so if <CODE>SNDEX_SetVolume[Async]</CODE> functions are being frequently used, or if you do not want to get the exact sound volume of the console at the time the function is called, there is no need to use the<CODE>SNDEX_GetCurrentVolume[Async]</CODE> functions.</P>
<HR>
<H3><A name="note69-15">Note 69-15:(SND) Restricted repeated execution of SNDEX_SetVolume[Async] functions</A></H3>
<P><description>There is a limit to the number of times that the sound volume value can be stored in dedicated nonvolatile memory, so restrictions have been placed on the <CODE>SNDEX_SetVolume[Async]</CODE> functions. Sound volume values set by functions are held pending for roughly 10 frames before they are written. After the pending time has ended the value that is written is the value that was most recently set.</description></P>
<HR>
<H3><A name="note69-16">Note 69-16:(SND) Fixed method of exclusive control when continuously playing shutter sound</A></H3>
<P><description>When the operation for continuous playback of shutter sound was repeated, exclusive control inside the SND library did not work well and the process would stop on a <CODE>Panic</CODE>. That bug has been fixed.</description></P>
<HR>
<H3><A name="note69-17">Note 69-17:(SSP) Added the  SSP_ExtractJpegDecoderExif function</A></H3>
<P><description>Added the <CODE>SSP_ExtractJpegDecoderExif </CODE> function for extracting only EXIF information from JPEG files.</description></P>
<HR>
<H3><A name="note69-18">Note 69-18:(SSP) Fixed a bug in the SSP_StartJpegDecoder function</A></H3>
<P><description>Fixed a bug that caused the <CODE>SSP_StartJpegDecoder</CODE> function to halt internally for certain files.</description></P>
<HR>
<H3><A name="note69-19">Note 69-19:(SSP) Fixed a bug in the SSP_StartJpegDecoder function</A></H3>
<P><description>Fixed the problem of an internal stack overflow that occurred when the <CODE>SSP_StartJpegDecoder</CODE> function was used on certain files.</description></P>
<HR>
<H3><A name="note69-20">Note 69-20:(SSP) Integrated the demos</A></H3>
<P><description>Integrated the SSP demos now that there is no need for separate TWL and NITRO versions (as per the change described in <A href="changelog.html#note68-37">Note 68-37</a>).</description></P>
<HR>
<H3><A name="note69-21">Note 69-21:(TOOL) Added features to NandFiler for importing and exporting Save Data</A></H3>
<P><description>It is now possible to import and export data between SD cards and both the NAND application Save Data region and the PHOTO directory. <br>(The PHOTO directory data can only be exported.)<br>With this added functionality, you can now use Save Data that has been modified on a PC during debugging.</description></P>
<HR>
<H3><A name="note69-22">Note 69-22:(TOOL) Changed makerom.TWL</A></H3>
<P><description>The <CODE>JpegSign</CODE> property in <CODE>makerom.TWL</CODE> does not always have to be set TRUE, so it has been made private.<br> This change was added in the 5.1 PR version, but it was left out of the changelog.</description></P>
<HR>
<H3><A name="note69-23">Note 69-23:(TOOL) Added the tad2rom tool</A></H3>
<P><description>The <CODE>tad2rom</CODE> tool has been added for writing TAD-encapsulated SRL files.<br> This differs from the <CODE>-n</CODE> option of <CODE>maketad</CODE> because a TAD file can be used as input.<br> The resulting SRL file can only be used when <CODE>Card</CODE> mode is added to <CODE>TwINmenu</CODE>.</description></P>
<HR>
<H3><A name="note69-24">Note 69-24:(WM) Fixed a problem with the execution of the WM_SetMPDataToPort function callback</A></H3>
<P><description>During MP communications, if the parent was reset and communications were cut, the callback registered by the <CODE>WM_SetMPDataToPort</CODE> function would never execute. That bug has been fixed.</description></P>
<HR>
<H3><A name="KnownIssues_5_1_PR2">Known Problems with SDK 5.1 PR2</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in HYBRID mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
<li>FINALROM application jumps do not work properly on TS boards.</li>
<li>With some NITRO titles, <CODE>mb_child_simple.srl</CODE> does not run as a multiboot child on IS-TWL-DEBUGGER.</li>
        </ul>
      </description></knownissues><HR>
<H2 style="line-height: 0"><A name="sdk_5_1_PR">TWL-SDK Version 5.1 PR</A></H2>
<DIV style="text-align: right"><P style="line-height: 0">(2008/12/10)</P></DIV>
<HR>
<H3><A name="note68-01">Note 68-01:(CAMERA) Fixed infinite loop bug in CAMERA_Init function</A></H3>
<P><description>Even when the camera cannot be used, for example when <CODE>ferret.TWL</CODE> is being used as an ARM7 component, the <CODE>CAMERA_Init</CODE> function can enter an infinite loop during its internal processing. To fix this bug, the function now fails initialization and returns an error in such cases.</description></P>
<HR>
<H3><A name="note68-02">Note 68-02:(CARD) Changed the default settings of the cache disable operations</A></H3>
<P><description>In order to improve the efficiency of the ROM data loading process, the default threshold value for disabling cache has been changed to 1 KB for IC and 9 KB for DC, and the instruction cache is not disabled.<br><br> In addition, added the <CODE>CARD_SetCacheFlushFlag</CODE> function to change these settings with the program.</description></P>
<HR>
<H3><A name="note68-03">Note 68-03:(CARD) Added functions to determine operating mode</A></H3>
<P><description>The following functions have been added to determine the executable operating mode from the ROM header information.
        <ul>
<li>CARD_IsExecutableOnNTR</li>
<li>CARD_IsExecutableOnTWL</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note68-04">Note 68-04:(CRYPTO) Changed the padding method for RSA encryption</A></H3>
<P><description>Starting with PKCS#1 v1.5, padding is now used for RSA encryption and decryption.<br> Be aware that prior data encrypted by CRYPTO RSA can no longer be decrypted.</description></P>
<HR>
<H3><A name="note68-05">Note 68-05:(CRYPTO) Changed the library's section placement</A></H3>
<P><description>The location of part of the CRYPTO library has been changed to the <CODE>ltdmain</CODE> region.<br> This affects the usable space in those memory regions.</description></P>
<HR>
<H3><A name="note68-06">Note 68-06:(DSP) Fixed a bug in the DSP_PlaySound function</A></H3>
<P><description>When the <CODE>DSP_PlaySound</CODE> function played sounds, sometimes as much as 10 milliseconds was cut off and not output. That bug has been fixed.</description></P>
<HR>
<H3><A name="note68-07">Note 68-07:(DSP) Revised the timing of shutter sound playback</A></H3>
<P><description>The sound quality changed when the shutter sound was played with the headphones attached.<br><br> This problem was resolved by adding a wait before the shutter sound is played back.</description></P>
<HR>
<H3><A name="note68-08">Note 68-08:(DSP) Fixed a problem with stereo sound playback</A></H3>
<P><description>When the <CODE>DSP_PlaySound</CODE> or <CODE>DSP_PlayShutterSound</CODE> functions were used to play stereo sound, the left and right channels were switched. That issue has been fixed.<br> This does not affect the camera shutter sound, which is monaural.</description></P>
<HR>
<H3><A name="note68-09">Note 68-09:(DSP) Restricted playable shutter sound data</A></H3>
<P><description>Guidelines regulate the playback of DSP shutter sounds. A check feature has been added to the <CODE>DSP_PlayShutterSound</CODE> function to make sure that shutter sounds are not played if the frequency is different from the I2S setting. <br>Therefore, the specification for stereo/monaural has been removed from the arguments of the <CODE>DSP_PlayShutterSound</CODE> function, and the following sound data has been deleted.
        <ul>
          <li>$TwlSDK/data/shutter_sound/shutter_sound_16000.raw</li>
          <li>$TwlSDK/data/shutter_sound/shutter_sound_16000.wav</li>
          <li>$TwlSDK/data/shutter_sound/shutter_sound_32730.raw</li>
          <li>$TwlSDK/data/shutter_sound/shutter_sound_47610.raw</li>
          <li>$TwlSDK/data/videorec_sound/videorec_sound_begin_32730.raw</li>
          <li>$TwlSDK/data/videorec_sound/videorec_sound_begin_47610.raw</li>
          <li>$TwlSDK/data/videorec_sound/videorec_sound_end_32730.raw</li>
          <li>$TwlSDK/data/videorec_sound/videorec_sound_end_47610.raw</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note68-10">Note 68-10:(DevEnv) Added documentation for ARM7 components</A></H3>
<P><description>The following documentation about the ARM7 components has been added.<br> <CODE>$TwlSDK/docs/TechnicalNotes/AboutComponents.pdf</CODE></description></P>
<HR>
<H3><A name="note68-11">Note 68-11:(DevEnv) Added ARM7 component</A></H3>
<P><description>Added <CODE>ferret.TWL</CODE> to the ARM7 components.<br> Like <CODE>racoon.TWL</CODE>, this component can only be used when creating TWL-exclusive applications.<br> This new component is more compact than <CODE>racoon.TWL</CODE> because it omits the features for wireless communications and use of the camera.</description></P>
<HR>
<H3><A name="note68-12">Note 68-12:(DevEnv) Corrected the BuildFinalRom demo</A></H3>
<P><description>Because <CODE>libsyscall.twl.a</CODE> now makes use of items that belong to the TWL-SDK, it has been deleted from <CODE>$TwlSDK/build/demos/tips/BuildFinalRom</CODE>.<br> For more information, read the TWL-SDK application development guide, <CODE>$TwlSDK/docs/TechnicalNotes/AboutTwlApplication.pdf</CODE>.</description></P>
<HR>
<H3><A name="note68-13">Note 68-13:(DevEnv) Added build switch to disable IS-NITRO-DEBUGGER debug features</A></H3>
<P><description>A build switch has been added so you can reduce the amount of memory used by the TWL-SDK in a development environment where debugging is carried out only by IS-TWL-DEBUGGER. The switch disables the IS-NITRO-DEBUGGER debug features and circumvents unnecessary library links.</description></P>
<HR>
<H3><A name="note68-14">Note 68-14:(DevEnv) Made revisions relating to NITRO build Static segment</A></H3>
<P><description>In programs built as NITRO-only titles, the default address of the <CODE>Static </CODE> segment was defined as 0x02000400. Because this includes an unused region of 1KB, it has been revised to 0x02000000.<br><br> This revision does not affect the behavior of the application, but it increases the available arena region by 1KB.</description></P>
<HR>
<H3><A name="note68-15">Note 68-15:(DevEnv) Added guide for transition from NITRO-SDK</A></H3>
<P><description>The following new document explains how to transition from NITRO-SDK to TWL-SDK,<br> <CODE>$TwlSDK/docs/TechnicalNotes/AboutNitroToTwl.pdf</CODE></description></P>
<HR>
<H3><A name="note68-16">Note 68-16:(ENV) Corrected API name of ENV_SetResourceSetArray function</A></H3>
<P><description>The <CODE>ENV_SetResourceSetArray</CODE> function had the wrong API name. The reference and the API name have been corrected.<br><br> The API name that was in effect before this correction can still be used, so this change does not require you to revise existing code.</description></P>
<HR>
<H3><A name="note68-17">Note 68-17:(FS) Added the FS_ATTRIBUTE_IS_OFFLINE flag</A></H3>
<P><description>Added the FS_ATTRIBUTE_IS_OFFLINE flag, which provides an easy way to determine whether a file is located in the TWL-only region in the NITRO environment.<br><br> This flag is returned as one of the entry attributes by the <CODE>FS_ReadDirectory</CODE> and <CODE>FS_GetPathInfo</CODE> functions.</description></P>
<HR>
<H3><A name="note68-18">Note 68-18:(FS)  Fixed a bug in the FS_GetSeekCacheSize function</A></H3>
<P><description>When the file size was not divisible by the cluster size, the <CODE>FS_GetSeekCacheSize</CODE> function would return a value that was 1-cluster too small. That bug has been fixed.</description></P>
<HR>
<H3><A name="note68-19">Note 68-19:(FS)  Fixed bugs in the FS_SetSeekCache and FS_SeekFile functions</A></H3>
<P><description>Both the <CODE>FS_SetSeekCache</CODE> and <CODE>FS_SeekFile</CODE> functions would sometimes read outside the region for the seek cache.</description></P>
<HR>
<H3><A name="note68-20">Note 68-20:(FS) Revised the overlay-staticinit demo</A></H3>
<P><description>In the <CODE>$TwlSDK/build/demos/fs/overlay-staticinit sample demo</CODE>, the upper and lower screens were reversed. That  has been fixed.</description></P>
<HR>
<H3><A name="note68-21">Note 68-21:(FS) Added functions to determine archive status</A></H3>
<P><description>The following group of functions has been added to determine whether archives exist and whether they are available.
        <ul>
<li>FS_OpenTopLevelDirectory</li>
<li>FS_IsArchiveReady</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note68-22">Note 68-22:(FS) Made revisions specific to cache operation when accessing files</A></H3>
<P><description>When the <CODE>FS_ReadFileAsync</CODE> function was used to asynchronously read a NAND or SD card archive file, if the specified buffer address was not 32-byte aligned, the beginning of the data would be cached. That bug has been fixed.<br><br> The function reference was also edited to explain that if the buffer is referenced before the read process is completed, the consistency between the actual data and the cache will be lost.</description></P>
<HR>
<H3><A name="note68-23">Note 68-23:(GX) Revised the Sub_Double3D sample demo</A></H3>
<P><description>When the <CODE>$TwlSDK/build/demos/gx/UnitTours/Sub_Double3D</CODE> sample demo alternately showed the captured image and the original image, there was no way to deal with screen flicker. This has been fixed.</description></P>
<HR>
<H3><A name="note68-24">Note 68-24:(MB) Added formal support for HYBRID program clone boot feature</A></H3>
<P><description>Revised the internal operations of the MB library and the <CODE>emuchild.exe</CODE> tool so now HYBRID mode programs can also use the clone boot feature.</description></P>
<HR>
<H3><A name="note68-25">Note 68-25:(NA) Revised the NA_LoadSharedFontTable function</A></H3>
<P><description>Fixed the <CODE>NA_LoadSharedFontTable</CODE> function so it can be called more than once.<br> In line with this change, <CODE>pBuffer</CODE> can now be deallocated after the function succeeds.</description></P>
<HR>
<H3><A name="note68-26">Note 68-26:(OS) Made OS_GetSerialNo a private function</A></H3>
<P><description>The  <CODE>OS_GetSerialNo</CODE> function, which is used to get the WL product serial number, is now private because it is not appropriate for use in applications.</description></P>
<HR>
<H3><A name="note68-27">Note 68-27:(OS) Changed the OS_ResetSystem function process</A></H3>
<P><description>The <CODE>OS_ResetSystem</CODE> function design prohibited interrupts <I>after</I> DMA completion. The order has been changed, so now interrupts are prohibited <I>before</I> DMA completion.</description></P>
<HR>
<H3><A name="note68-28">Note 68-28:(OS) Revised references to arena and protection region</A></H3>
<P><description>In the OS Reference Manual, the memory maps in the overviews for the arena and protection region were revised to reflect the fact that the start of main memory is a system-reserved region.</description></P>
<HR>
<H3><A name="note68-29">Note 68-29:(OS) Revised functions that get Parental Control status</A></H3>
<P><description>The following functions, which get Parental Control status, have all been changed to return FALSE when Parental Control settings have not been entirely configured in the console.
        <ul>
<li>OS_IsRestrictPictoChatBoot</li>
<li>OS_IsRestrictDSDownloadBoot</li>
<li>OS_IsRestrictBrowserBoot</li>
<li>OS_IsRestrictPrepaidPoint</li>
<li>OS_IsRestrictPhotoExchange</li>
<li>OS_IsRestrictUGC</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note68-30">Note 68-30:(PM) Added the pm-2 demo</A></H3>
<P><description>Added the <CODE>$TwlSDK/build/demos.TWL/spi/pm-2</CODE> sample.<br> This sample demo uses the <CODE>PM_SetAutoExit</CODE> function to enable a choice between immediately shutting down via the POWER button or delaying shutdown until the user's process ends.</description></P>
<HR>
<H3><A name="note68-31">Note 68-31:(PM) Added exclusive control for hardware reset and application jumps</A></H3>
<P><description>If the power button is pressed or a battery-low interrupt is detected during a hardware reset or a application jump, the latter process is now given priority.</description></P>
<HR>
<H3><A name="note68-32">Note 68-32:(PM) Fixed a bug with hardware reset</A></H3>
<P><description>If a hardware reset was conducted during the execution of certain SNDEX functions (for example, <CODE>SNDEX_SetI2SFrequencyAsync</CODE> and <CODE>SNDEX_SetIirFilterAsync</CODE>), the hardware reset would not complete. That bug has been fixed.</description></P>
<HR>
<H3><A name="note68-33">Note 68-33:(SND) Prohibited changing DSPMixRate during shutter sound playback</A></H3>
<P><description>When the shutter sound is being played by the <CODE>DSP_PlayShutterSound</CODE> function, the <CODE>DSPMixRate</CODE> setting is temporarily altered inside the library. Depending on the timing of the call to the <CODE>SNDEX_SetDSPMixRate[Async]</CODE> functions, this setting was occasionally overwritten. The process has been revised so that now when the <CODE>SNDEX_SetDSPMixRate[Async]</CODE> functions are called during shutter sound playback, the function returns <CODE>SNDEX_RESULT_EXCLUSIVE</CODE>.</P>
<HR>
<H3><A name="note68-34">Note 68-34:(SND) Prohibited execution of SNDEX functions during shutter sound playback</A></H3>
<P>If a series of processes using <CODE>SNDEX </CODE> functions are conducted before and after the playback of shutter sounds, an interrupt by another <CODE>SNDEX</CODE> function during the midst of this series can, depending on the timing, leave the system in an unknown state. To fix this bug, the  <CODE>SNDEX</CODE> functions (with some exceptions) now return <CODE>SNDEX_RESULT_EXCLUSIVE</CODE> and fail if they execute while shutter sounds are being played by the <CODE>DSP_PlayShutterSound</CODE> function. Note that this revision does not guarantee success of shutter sound playback. In fact, if the <CODE>DSP_PlayShutterSound</CODE> function executes while <CODE>SNDEX</CODE> functions are processing, it will fail due to exclusive control by the SNDEX library.</description></P>
<HR>
<H3><A name="note68-35">Note 68-35:(SND) Fixed a problem related to the execution of multiple SNDEX functions</A></H3>
<P><description>The SNDEX library's exclusive control was incomplete. When multiple <CODE>SNDEX</CODE> functions were executed in parallel, sometimes an internal state would become invalid and an error would return, regardless of the success or failure of the process in ARM7.<br> This problem has been corrected.</description></P>
<HR>
<H3><A name="note68-36">Note 68-36:(SND) Corrected return value typo in asynchronous function references</A></H3>
<P><description>The references of the asynchronous functions stated that <CODE>SNDEX_PXI_RESULT_EXCLUSIVE</CODE> was returned as the processing result, but that is incorrect. The references have been revised to read that the return value is  <CODE>SNDEX_RESULT_EXCLUSIVE</CODE>.<br> Since these two constants are equivalent, the correct behavior will result even if the incorrect notation is used.</description></P>
<HR>
<H3><A name="note68-37">Note 68-37:(SSP) Revised behavior in HYBRID build NITRO mode</A></H3>
<P><description>With the HYBRID build, the SSP library could not be used in NITRO mode. That has been fixed.</description></P>
<HR>
<H3><A name="note68-38">Note 68-38:(SSP) Privatized the JPEG encode/decode signature feature</A></H3>
<P><description>The guidelines now prohibit the use of the signature feature in JPEG files in ROM archives, so the following signature-related functions have been made private.
        <ul>
<li>SSP_SetJpegEncoderSignMode</li>
<li>SSP_SetJpegDecoderSignMode</li>
<li>SSP_CheckJpegDecoderSign</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note68-39">Note 68-39:(SSP) Added the SSP_ConvertJpegEncodeData and SSP_StartJpegEncoderWithEncodeData functions</A></H3>
<P><description>Divided the encoding function, <CODE>SSP_StartJpegEncoder</CODE>, into a pre-encoding process and a process of actual encoding. These are the <CODE>SSP_ConvertJpegEncodeData</CODE> and <CODE>SSP_StartJpegEncoderWithEncodeData</CODE> functions.</description></P>
<HR>
<H3><A name="note68-40">Note 68-40:(TOOL) Fixed bugs in NandFiler</A></H3>
<P><description>Restore did not work with Save Data titles that had a '9' in their game code. That bug has been fixed.</description></P>
<HR>
<H3><A name="note68-41">Note 68-41:(TOOL) Added a TWL version of mb_child.srl</A></H3>
<P><description>Added <CODE>mb_child.srl</CODE>, which behaves almost the same as DS Download Play in the DSi.<br> Signature-verification of downloaded child applications has been omitted so a Download Play child can be started on a development console.</description></P>
<HR>
<H3><A name="note68-42">Note 68-42:(TOOL) Added a TWL screen banner viewer to addbanner</A></H3>
<P><description>Added a feature to <CODE>addbanner</CODE> for checking how banners appear on the actual TWL screen.<br> For more information, see the <CODE>addbanner</CODE> manual.</description></P>
<HR>
<H3><A name="note68-43">Note 68-43: (TOOL) Revisions to buryarg.TWL</A></H3>
<P><description>Argument data was not embedded correctly when <CODE>buryarg.TWL </CODE> specified a destination of standard output. That has been fixed.</description></P>
<HR>
<H3><A name="note68-44">Note 68-44:(TOOL) Expanded cmptad functionality</A></H3>
<P><description>Added a feature to the <CODE>cmptad</CODE> tool to compare the identity of an SRL included in a TAD file and a specified SRL.</description></P>
<HR>
<H3><A name="note68-45">Note 68-45:(TOOL) Enhanced error-checking functionality of compstatic tool</A></H3>
<P><description>The <CODE>compstatic</CODE> tool supports the ability to embed an overlay digest value table in a binary file. If you use this feature without preparing a region for embedding, the wrong region can be destroyed and unexpected behavior may occur.<br> This bug has been fixed, and incorrect usage is now detected as an error.</description></P>
<HR>
<H3><A name="note68-46">Note 68-46:(TOOL) Revised makebanner and makebanner.TWL</A></H3>
<P><description>Since kanji characters cannot be used for game titles in banners, a warning is now displayed when kanji characters are included.<br> However, the check for kanji is not performed on banners for China (version 2).</description></P>
<HR>
<H3><A name="note68-47">Note 68-47:(TOOL) Made changes to makerom.TWL.exe</A></H3>
<P><description>The following changes have been made to <CODE>makerom.TWL.exe</CODE>.
        <ul>
<li>An error is now generated when the banner specification is not a TWL banner.</li>
<li>The guidelines prohibit access to <CODE>SDCard</CODE>, but it is now allowed for the specific purpose of debugging in DEBUG and RELEASE builds.<br>Use this to check for bugs on machines with which you cannot use a debugger.</li>
<li>When <CODE>JpegSign</CODE> cannot be used, an error is now generated if TRUE has been specified.<br><CODE>TRUE</CODE> can be specified for the <CODE>JpegSign</CODE> property only if access to SD cards or NAND has been permitted.</li>
        </ul>
      </description></P>
<HR>
<H3><A name="note68-48">Note 68-48:(TOOL) Changed makerom.exe</A></H3>
<P><description>An error is now generated when the banner specification is not an NTR banner.</description></P>
<HR>
<H3><A name="note68-49">Note 68-49:(TOOL) Added functionality to showversion to display build mode</A></H3>
<P><description>In addition to existing information, the target (ARM9, ARM7) and build mode (DEBUG, RELEASE, FINALROM) are now shown.<br> An error is displayed if different build modes are mixed.</description></P>
<HR>
<H3><A name="note68-50">Note 68-50:(TOOL) Added background graphic for banner previewing</A></H3>
<P><description>Added the following background graphic so the created banner can be previewed on the same screen as the DSi menu using the TWL-System NITRO-Viewer.<br> <CODE>$TwlSDK/build/demos.TWL/tips/TWLBanner_anim1/banner/SDK_demo</CODE></description></P>
<HR>
<H3><A name="note68-51">Note 68-51:(WM) Fixed a bug in MP communication during component overload</A></H3>
<P><description>MP communications would be cut when the component load became unusually high. That bug has been fixed.</description></P>
<HR>
<H3><A name="note68-52">Note 68-52:(WM) Changed behavior for Wireless OFF mode</A></H3>
<P><description>The timing of errors returned from the WM library differed for TWL systems running in Wireless OFF mode and NITRO systems running with wireless communications prohibited. The same process can now be used to determine whether the use of wireless communications is prohibited.</description></P>
<HR>
<H3><A name="note68-53">Note 68-53:(WVR) Fixed a bug in Wireless library shutdown in switchover demo</A></H3>
<P><description>There was a problem with the Wireless library quit process when transitioning from the WC library to the WH library. That has been fixed.</description></P>
<HR>
<H3><A name="note68-54">Note 68-54: (MISC) Changed part of the banner format</A></H3>
<P><description>Along with the partial changes to the banner format, the following functions and tools have been revised so they now generate an error when the configured animation data is invalid.
        <ul>
<li><CODE>NA_SaveSubBanner</CODE></li>
<li><CODE>bannercvtr</CODE></li>
<li><CODE>makebanner.TWL</CODE></li>
        </ul>
For more information, see the <CODE>$TwlSDK/man/ja_JP/tools/bannercvtr</CODE> manual.</description></P>
<HR>
<H3><A name="KnownIssues_5_1_PR">Known issues in TWL-SDK version 5.1 PR</A></H3>
<knownissues><description>
        <ul>
<li>If a program built in HYBRID mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.</li>
<li>FINALROM application jumps do not work properly on TS boards.</li>
<li>With some NITRO titles, <CODE>mb_child_simple.srl</CODE> does not run as a multiboot child on IS-TWL-DEBUGGER.</li>
        </ul>
      </description></knownissues><HR>
<HR>
<H2 style="line-height: 0"><A name="sdk_5_00" id="sdk_5_00">TWL-SDK Version 5.0 Official Release</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2008/10/23)</P>
</DIV>

<HR>
<H3><A name="note67-01" id="note67-01">Note 67-01: (CAMERA) Corrected error handling for <CODE>simpleShoot-1</CODE>, <CODE>simpleShoot-2</CODE></A></H3>
<P>The <CODE>DSP_PlayShutterSound</CODE> function would sometimes fail when using the camera to continuously capture images with the <CODE>simpleShoot-1</CODE> and <CODE>simpleShoot-2</CODE> demos. That failure would result in an <CODE>OS_Panic</CODE> function termination. <BR>However, actual use of the <CODE>DSP_PlayShutterSound</CODE> function assumed that the user would try until an image was successfully captured. Corrections reflect that.<BR><BR> This change was added in version 5.0 RC3, but it was left out of the changelog.
</P>

<HR>
<H3><A name="note67-02" id="note67-02">Note 67-02: (CAMERA) Revised the <CODE>simpleShoot-2</CODE> demo</A></H3>
<P>There are operations in <CODE>simpleShoot-2</CODE>, the demo that performs video capture, that violated guidelines. Operations were revised accordingly.
</P>

<HR>
<H3><A name="note67-03" id="note67-03">Note 67-03: (CARD) Support for parent backup device</A></H3>
<P>Made the CARD library compatible with 1Mb-EEPROM backup devices and added <CODE>CARD_BACKUP_TYPE_EEPROM_1MBITS</CODE> to the <CODE>CARDBackupType</CODE> enumerated type.<BR> In relation, the reference and sample demos were updated.
</P>

<HR>
<H3><A name="note67-04" id="note67-04">Note 67-04: (DSP) Revised synchronous version of the DSP graphics component function</A></H3>
<P>The following two revisions were added.
<UL>
<LI>Within the synchronous functions, the wait for termination from DSP was changed from an interrupt to a polling of the corresponding register.
<LI>When the synchronous function is run frequently with a high-priority thread, other execution rights do not readily transfer to low-priority threads. This problem was fixed.
</UL>
</P>

<HR>
<H3><A name="note67-05" id="note67-05">Note 67-05: (DSP) Corrected inconsistency in the results of the <CODE>DSP_Scaling*</CODE> and <CODE>DSP_CalcScalingFactor*</CODE> functions</A></H3>
<P>When enlarging an image using the <CODE>DSP_Scaling*</CODE> functions, output was sometimes produced that did not match that of the <CODE>DSP_CalcScalingFactor*</CODE> functions, depending on the size of the input image and the specified magnification. This bug was fixed. <BR><BR> When this problem would occur, there was a risk of a buffer overflow, depending on the size of the buffer storing results to be passed to the <CODE>DSP_Scaling*</CODE> functions.
</P>

<HR>
<H3><A name="note67-06" id="note67-06">Note 67-06: (DSP) Revised termination process for each DSP component</A></H3>
<P>There were some inadequacies in the DSP component termination process. These were revised.
</P>

<HR>
<H3><A name="note67-07" id="note67-07">Note 67-07:(DevEnv) Updated documents specific to the build switch</A></H3>
<P>Added an explanation to <CODE>$TwlSDK/docs/SDKRules/Rule-Defines.html</CODE> for the <CODE>*_BUILD_TYPE</CODE> build switch.<BR><BR> Portions were difficult to see in the <B>Build Switch Usage Table</B>. There were also mistakes. These have been fixed. 
</P>

<HR>
<H3><A name="note67-08" id="note67-08">Note 67-08: (FS) Improved open determination for TWL-exclusive files</A></H3>
<P>Internal determination of the FS library was improved to fail with <CODE>FS_RESULT_PERMISSION_DENIED</CODE> when a hybrid application is operating in the NITRO environment, and a file was opened in a TWL-exclusive region.
</P>

<HR>
<H3><A name="note67-09" id="note67-09">Note 67-09: (MB) Added a switch for the build mode on multiboot-wfs distributed child devices</A></H3>
<P>Added a correction to child device applications distributed with a multiboot-wfs demo to Makefile to enable both NITRO-compatible and hybrid builds.<BR><BR> The TWL-specific features cannot be used even if the ROM built in hybrid mode was distributed to TWL system.<BR> See the function reference's MB library overview for more information.
</P>

<HR>
<H3><A name="note67-10" id="note67-10">Note 67-10: (MI) Added the <CODE>MI_SendNDmaGXCommand*</CODE> functions</A></H3>
<P>Conventionally, DMA was used as the function for sending the display list (the GX command string) to the command FIFO. However, a function that uses a new DMA has been added.
</P>

<HR>
<H3><A name="note67-11" id="note67-11">Note 67-11:(OS) Added the <CODE>OS_IsCodecTwlMode</CODE> function</A></H3>
<P>Added the <CODE>OS_IsCodecTwlMode</CODE> function to get the codec operation mode.
</P>

<HR>
<H3><A name="note67-12" id="note67-12">Note 67-12: (OS) Added the demo for the <CODE>OS_JumpTo*</CODE> functions</A></H3>
<P>Added <CODE>$TwlSDK/build/demos.TWL/os/os_jump</CODE> as a demo to indicate how the <CODE>OS_JumpToSystemMenu</CODE>, <CODE>OS_RebootSystem</CODE>, <CODE>OS_JumpToWirelessSetting</CODE>, <CODE>OS_JumpToInternetSetting</CODE>, and <CODE>OS_JumpToEULAViewer</CODE> functions work.
</P>

<HR>
<H3><A name="note67-13" id="note67-13">Note 67-13: (OS) Added a function to get the status of parental controls</A></H3>
<P>Added a function for the application to get Parental Controls information performed by the TWL system settings.
</P>

<HR>
<H3><A name="note67-14" id="note67-14">Note 67-14: (OS) Movement of the function reference's Operating Environment section</A></H3>
<P>References specific to operating environments such as the TWL-SDK function reference and the <CODE>OS_GetConsoleType</CODE> function had been placed in a category called <B>OS/Debug (Operating Environment)</B>. However, these functions are expected to be used not only in debugging, but also with ordinary applications. They have therefore been removed from the debugging category to the <B>OS/Operating Environment</B> section.
</P>

<HR>
<H3><A name="note67-15" id="note67-15">Note 67-15: (PM) Added exclusive control for hardware resets and application jumps</A></H3>
<P>By making application jumps and Power Button hardware resets exclusive, the possibility of unexpected operations happening when both occur simultaneously is eliminated. 
</P>

<HR>
<H3><A name="note67-16" id="note67-16">Note 67-16: (PM) Revised Power Button process</A></H3>
<P>Fixed a bug where the system would not shutdown but would instead perform a hardware reset when the Power Button was held down. 
</P>

<HR>
<H3><A name="note67-17" id="note67-17">Note 67-17: (SCFG) Adjusted SCFG functions</A></H3>
<P>The Function Reference Manual listed the <CODE>SCFG_IsWramAccessible</CODE> and <CODE>SCFG_IsVramAccessible</CODE> functions, but the definition of <CODE>scfg.h</CODE> listed them as the <CODE>SCFG_IsWRAMAccessible</CODE> and <CODE>SCFG_IsVRAMAccessible</CODE> functions.<BR>That was changed to reflect the listing in the Function Reference Manual. The <CODE>SCFG_IsWramAccessible</CODE> and <CODE>SCFG_IsVramAccessible</CODE> functions are the standard.<BR>However, as these may already be described as the <CODE>SCFG_IsWRAMAccessible</CODE> and <CODE>SCFG_IsVRAMAccessible</CODE> functions, the corresponding functions will be defined with a <CODE>#define</CODE> statement.<BR><BR> In addition, the spelling of the <CODE>SCFG_GetPsramdBoundary</CODE> function was corrected to the <CODE>SCFG_GetPsramBoundary</CODE> function. 
</P>

<HR>
<H3><A name="note67-18" id="note67-18">Note 67-18: (SND) Abolished headphone mute when setting the IIR filter (targeting microphone input)</A></H3>
<P>Headphone output was unnecessarily suppressed when changing the parameters for the IIR filter that targets microphone input using the <CODE>SNDEX_SetIirFilter[Async]</CODE> functions.<BR> This problem has been corrected.
</P>

<HR>
<H3><A name="note67-19" id="note67-19">Note 67-19: (SND) Fixed a <CODE>SNDEX_SetVolumeSwitchCallback</CODE> function bug</A></H3>
<P>Fixed a bug where the callback registered with the <CODE>SNDEX_SetVolumeSwitchCallback</CODE> function was not normally invoked.
</P>

<HR>
<H3><A name="note67-20" id="note67-20">Note 67-20: (SND) Added functionality to the <CODE>extraFunc</CODE> demo</A></H3>
<P>Added functionality to the <CODE>extraFunc</CODE> demo to check the callback that notifies the pressing of the volume switch and the connection of headphones.
</P>

<HR>
<H3><A name="note67-21" id="note67-21">Note 67-21: (SSP) NITRO mode support for the JPEG library</A></H3>
<P>Excluding signature functionality, the SSP library JPEG codec can now also be used in NITRO mode.
</P>

<HR>
<H3><A name="note67-22" id="note67-22">Note 67-22: (SSP) Added error processing for the <CODE>SSP_StartJpegEncoder</CODE> function</A></H3>
<P>When the specified size for an image could not be encoded by the <CODE>SSP_StartJpegEncoder</CODE> function, corrupt images ended up being encoded. This was corrected to return an error in such cases.
</P>

<HR>
<H3><A name="note67-23" id="note67-23">Note 67-23: (STD) Handled a bug where the <CODE>STD_CompareNString</CODE> function would not return correct values</A></H3>
<P>Fixed a bug where the <CODE>STD_CompareNString</CODE> function did not return correct values even if there was a match, depending on the value saved in the ending address, rounded up in 4-byte units, for the comparison's first string.
</P>

<HR>
<H3><A name="note67-24" id="note67-24">Note 67-24: (STD) Revised the <CODE>STD_ConvertAsciiToInt</CODE> and <CODE>STD_ConvertAsciiToLong</CODE> functions</A></H3>
<P>When an integer overflow occurs, the corresponding standard functions, <CODE>atoi</CODE> and <CODE>atol</CODE>, behaved differently. This issues has been corrected.
</P>

<HR>
<H3><A name="note67-25" id="note67-25">Note 67-25: (STD) Revised the <CODE>STD_TSNPrintf</CODE>, <CODE>STD_TSPrintf</CODE>, <CODE>STD_TVSNPrintf</CODE>, and <CODE>STD_TVSPrintf</CODE> functions</A></H3>
<P>Given security issues, fixed such that the <CODE>%n</CODE> format is not supported.
</P>

<HR>
<H3><A name="note67-26" id="note67-26">Note 67-26: (STD) Revised the <CODE>STD_TSScanf</CODE> and <CODE>STD_TVSScanf</CODE> functions</A></H3>
<P>When scanning <CODE>NULL</CODE> characters, the standard <CODE>sscanf</CODE> function and its behavior differed. This issue has been corrected.
</P>

<HR>
<H3><A name="note67-27" id="note67-27">Note 67-27: (TOOL) Added backup and restore features for saved data in <CODE>NandFiler</CODE></A></H3>
<P>Changed so that it is possible to backup NAND application save data to an SD card.<BR>This makes it possible to restore data saved in the system to the state when the data was backed up.
</P>

<HR>
<H3><A name="note67-28" id="note67-28">Note 67-28: (TOOL) Added the ability to import from DS cards to <CODE>TwINmenu</CODE></A></H3>
<P>Added a Card mode to <CODE>TwINmenu</CODE> that references and imports a TAD file written to a DS card. <BR>DC cards can be used instead of SD cards.
</P>

<HR>
<H3><A name="note67-29" id="note67-29">Note 67-29: (TOOL) Added the <CODE>cmptad</CODE> tool</A></H3>
<P>Added the <CODE>cmptad</CODE> tool to determine whether the SRL files included in two TAD files are the same. 
</P>

<HR>
<H3><A name="note67-30" id="note67-30">Note 67-30: (TOOL) Added <CODE>makebanner.exe</CODE> and <CODE>makebanner.TWL.exe</CODE> warnings</A></H3>
<P>Added a feature to <CODE>makebanner.exe</CODE>, and <CODE>makebanner.TWL.exe</CODE> to determine whether the game title has characters that can be displayed on the DS and TWL platforms and whether the horizontal width will fit within the range of the frame. <BR>If characters or the horizontal width are illegal, a warning is displayed.
</P>

<HR>
<H3><A name="note67-31" id="note67-31">Note 67-31: (TOOL) Added <CODE>makelst</CODE> and <CODE>stripdebug</CODE> references</A></H3>
<P>Added references for <CODE>makelst</CODE> and <CODE>stripdebug</CODE>, auxiliary tools for the use of the EL library.
</P>

<HR>
<H3><A name="note67-32" id="note67-32">Note 67-32: (TOOL) Changed <CODE>makerom.TWL.exe</CODE></A></H3>
<P>Made the following changes to <CODE>makerom.TWL.exe</CODE>.
<UL>
<LI>Deleted <CODE>NITRO</CODE> from the <CODE>-D</CODE> option's <CODE>TARGET_PLATFORM</CODE> specification and changed the specification for hybrid application builds to <CODE>TWL-HYB</CODE> and the specification for LTD application builds to <CODE>TWL-LTD</CODE>.
<LI>Corrected so that the ROM archive file disposed in the TWL-exclusive region is a hashing target.
<LI>Changed so that the EULA's version and its required agreement flag can be configured separately.
<LI>Changed so that the EULA version is set to &quot;1&quot; in default.
</UL>
</P>

<HR>
<H3><A name="note67-33" id="note67-33">Note 67-33: (TOOL) Added a feature to <CODE>maketad</CODE> to create an SRL file for writing to a DS card</A></H3>
<P>Added a feature to maketad to output an SRL file that contains a TAD file. <BR>This SRL file can only be used with the Card mode added to <CODE>TwINmenu</CODE>.
</P>

<HR>
<H3><A name="note67-34" id="note67-34">Note 67-34: (TWL Wireless) Fixed a bug where the system would hang when a reset is applied during TWL wireless communication</A></H3>
<P>In extremely rare cases when a reset is applied during TWL wireless communication, the system would hang, leaving the reset incomplete. This bug has been verified and fixed.
</P>

<HR>
<H3><A name="KnownIssues_5_00" id="KnownIssues_5_00">Known issues in TWL-SDK version 5.0 official release</A></H3>
<P><UL>
<LI>If a program built in hybrid mode is run in a NITRO environment, any argument data that was embedded with the <CODE>buryarg</CODE> tool cannot be accessed properly.
<LI>FINALROM application jumps do not work properly on TS boards.
<LI>On some NTR titles, <CODE>mb_child_simple.srl</CODE> does not operate on IS-TWL-DEBUGGER as a multi-boot child device.
</UL></P>
<HR>
<P style="text-align: right">Software Development Support Group</P>
<hr><p>CONFIDENTIAL</p></body>
</HTML>
